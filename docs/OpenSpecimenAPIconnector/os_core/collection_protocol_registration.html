<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>OpenSpecimenAPIconnector.os_core.collection_protocol_registration API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>OpenSpecimenAPIconnector.os_core.collection_protocol_registration</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#! /bin/python3

# Import
import json

from .req_util import OS_request_gen
from .. import config_manager

class collection_protocol_registration:

    &#34;&#34;&#34;Handles the API calls to registrate participants to a Collection Protocol

    Handles the OpenSpecimen API calls to registrate participants to an existing Collection Protocol.
    This class can create participants, delete participants, register existing participants to another protocol,
    merge participants, get the details of an existing participant or more existing participants, update a participant,
    get the consent forms of a participant, download a consent form and delete consents form of participants.

    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
    just pass the parameters via JSON-formatted string. This means the user has to know the keywords.
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.

    Example
    -------

    A code example, where also Participants are registrated is in the Jupyter-Notebook::

        $ jupyter notebook main.ipynb
    &#34;&#34;&#34;

    def __init__(self):

        &#34;&#34;&#34;Constructor of the core class collection_protocol_registration

        Constructor of the class collection_protocol_event. Connects this class to OpenSpecimen
        specific request handle (os_core.request_util.py).

        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consists of two strings ( loginname , password)
        &#34;&#34;&#34;
        self.base_url = config_manager.get_url() + &#39;/collection-protocol-registrations&#39;
        self.auth = config_manager.get_auth() 
        self.OS_request_gen = OS_request_gen(self.auth)

    def ausgabe(self):

        &#34;&#34;&#34;Testing of the URL and authentification.

        If there are any unexpected errors, one can easily test if the URL and login data is spelled correctly.
        The function prints the URL and login data to the output terminal, which was handed over to the class.
        &#34;&#34;&#34;

        print(self.base_url, self.OS_request_gen.auth)


    def create_participant(self, params):

        &#34;&#34;&#34;Create or update a participant to a Collection Protocol.

        This function can create a new participant or update an existing participant to an already existing
        Collection Protocol. To use this function one has to know either the Collection Protocoll id ::cpId::,
        the title of the Collection Protocol ::cpTitle:: or the short title of the Collection Protocol ::cpshorttitle:: .
        Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
        collection_protocol_util in os_util. To update a participant, one has to specify the unique ID of the participant.
        This Id can be searched via the function get_participant_matches in the os_core class participants.

        Parameters
        ----------
        params : string
            JSON formatted string with the parameters of the participant. The paramter participant is a JSON-formatted string itself,
            for creating a participant it can be left empty; for updating the ID of the participant is needed. The keys of the participant
            dict are id[mandatory for updating], firstName, middleName, lastName, uid, birthdate, vitalStatus, deathDate, gender,
            race, ethnicities, sexGenotype, pmis, mrn, siteName, empi.

        One of the following keys is mandatory to identify the protocol where the participant is created or updated cpId, cpTitle or cpShortTitle.

            The key ppid has to be left blank, if it is set to be autogenerated by the system and is mandatory, if it is created manually.

        registrationDate is a mandatory key, the date format is YYYY-MM-DD .

        Returns
        -------
        JSON-dict
            Details of the created or updated Participant or the OpenSpecimen error message as Dictionary.
        &#34;&#34;&#34;

        url = self.base_url + &#39;/&#39;
        payload = params
        r = self.OS_request_gen.post_request(url, payload)

        return json.loads(r.text)


    def delete_consent(self, cprid):

        &#34;&#34;&#34;Delete a consent form of a participant.

        Deletes a consent form of an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
            dict with value true or error message 
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid) + &#39;/consent-form&#39;
        url = self.base_url + endpoint
        r = self.OS_request_gen.delete_request(url)

        return json.loads(r.text)


    def delete_participant(self, cprid):

        &#34;&#34;&#34;Delete a participant from a Collection Protocol

        Deletes an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
            Details of the deleted participant or OpenSpecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid)
        url = self.base_url + endpoint
        r = self.OS_request_gen.delete_request(url)

        return json.loads(r.text)


    def download_consent_form(self, cprid):

        &#34;&#34;&#34;Download the consent form of a participant.

        Downloads the consent form of an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        binary
            Binary file content of the consent form or a status code.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid) + &#39;/consent-form&#39;
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return r


    def get_consents(self, cprid):

        &#34;&#34;&#34;Get the consent form of a participant.

        Gets the consent form of an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
            Details of the consent form or the openSpecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid) + &#39;/consents&#39;
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return r


    def get_registration(self, cprid):

        &#34;&#34;&#34;Get the details form of a participant.

        Gets the details as JSON-dict form of an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
            Details of the participant or the openSpecimen&#39;s error message.
        &#34;&#34;&#34;
 
        endpoint = &#39;/&#39; + str(cprid)
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)


    def get_registrations(self, params):

        &#34;&#34;&#34;Search for one or more participants

        Gets the details of one or more participants, which are specified in the parameters.
        The Parameters are passed via a JSON-formatted string. This function is used in the 
        os_util class cpr_util, where the specific parameters can be passed.

        Parameter
        ---------
        params : string
            Json formatted string with keys: cpId, registrationDate[optional], name(substring of first, last or middlename)[optional],
            ppid[optional], participantId[optional], dob[optional], specimen[optional], startAt(default=0)[optional],
            maxResults(default=100)[optional], includeStats(default=false)[optional], exactMatch(default=false)[optional]

        Returns
        -------
        JSON-dict
            Details of the Participant, who are matching the search criteria.
        &#34;&#34;&#34;

        endpoint = &#39;/list&#39;
        url = self.base_url + endpoint
        payload= params
        r = self.OS_request_gen.post_request(url, payload)

        return json.loads(r.text)

  
    def register_to_cp(self, params):

        &#34;&#34;&#34;Register a participant to another Collection Protocol

        Registers an already existing Participant to another Collection Protocol.
        The Participants unique ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.
        Also, the collection protocol ID of the Protocol in which the participant is registered at has to be known.

        Parameter
        ---------
        params : string
            JSON-formatted string with the Parameters: the keys are participant( value is a dict with key id and value
            Pariticipant ID[mandatory])[mandatory], registrationDate [mandatory], cpId [mandatory],
            ppid[mandatory if manually generated, leave empty if system-generated]

        Returns
        -------
        JSON-dict
            JSON-dict of the participant which is registred to another protocol.
        &#34;&#34;&#34;

        url = self.base_url + &#39;/&#39;
        payload = params
        r = self.OS_request_gen.post_request(url, payload)

        return json.loads(r.text)



    def merge_participants(self, id_from, id_to):

        &#34;&#34;&#34;Merge Participant x to Participant y

        Merges Participant with the unique Participant ID ::id_from:: to the Participant with
        unique Participant ID ::id_to::. This will move data from all visits and specimens from the source participant to the target participant
        and then deletes the source participant.
        The Participants unique ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameters
        ----------
        id_from : int
            System generated unique ID of the source participant. Will get converted to a string.
        
        id_to : int
            System generated unique ID of the target participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
           Returns details of the merged participants as JSON-dict or OpenSpecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39;+ str(id_from)
        url = self.base_url + endpoint
        payload = &#39;{\&#34;participant\&#34;:{\&#34;id\&#34;:\&#34;&#39; + str(id_to) + &#39;\&#34;}}&#39;
        r = self.OS_request_gen.put_request(url, payload)

        return json.loads(r.text)

    
    def update_participant(self, cprid, params):

        &#34;&#34;&#34;Update a participant already in a Collection Protocol.

        This function can update an existing participant with a unique Participant ID ::cprid:: to an already existing
        Collection Protocol. To use this function one has to know either the Collection Protocoll id ::cpId::,
        the title of the Collection Protocol ::cpTitle:: or the short title of the Collection Protocol ::cpshorttitle:: .
        Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
        collection_protocol_util in os_util. To update a participant, one has to specify the unique ID of the participant.
        This Id can be searched via the function get_participant_matches in the os_core class participants.

        Parameters
        ----------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        params : string
            JSON formatted string with the parameters of the participant. The paramter participant is a JSON-formatted string itself,
            the parameters which are passed will get updated. The keys of the participant
            dict are id[mandatory], firstName, middleName, lastName, uid, birthdate, vitalStatus, deathDate, gender,
            race, ethnicities, sexGenotype, pmis, mrn, siteName, empi.

        One of the following keys is mandatory to identify the protocol, where the participant is created or updated cpId, cpTitle or cpShortTitle.

            The key ppid has to be left blank, if it is set to be autogenerated by the system and is mandatory, if it is created manually.

        registrationDate is a mandatory key, the date format is YYYY-MM-DD .

        Returns
        -------
        JSON-dict
            Details of the created or updated Participant or the OpenSpecimen error message as Dictionary.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid)
        url = self.base_url + endpoint
        payload = params
        r = self.OS_request_gen.put_request(url, payload)
        return json.loads(r.text)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration"><code class="flex name class">
<span>class <span class="ident">collection_protocol_registration</span></span>
</code></dt>
<dd>
<div class="desc"><p>Handles the API calls to registrate participants to a Collection Protocol</p>
<p>Handles the OpenSpecimen API calls to registrate participants to an existing Collection Protocol.
This class can create participants, delete participants, register existing participants to another protocol,
merge participants, get the details of an existing participant or more existing participants, update a participant,
get the consent forms of a participant, download a consent form and delete consents form of participants.</p>
<h2 id="notes">Notes</h2>
<p>In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
just pass the parameters via JSON-formatted string. This means the user has to know the keywords.
The API calls are documented in <a href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
<h2 id="example">Example</h2>
<p>A code example, where also Participants are registrated is in the Jupyter-Notebook::</p>
<pre><code>$ jupyter notebook main.ipynb
</code></pre>
<p>Constructor of the core class collection_protocol_registration</p>
<p>Constructor of the class collection_protocol_event. Connects this class to OpenSpecimen
specific request handle (os_core.request_util.py).</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>base_url</code></strong> :&ensp;<code>string</code></dt>
<dd>URL to openspecimen, has the format: http(s)://<host>:<port>/openspecimen/rest/ng</dd>
<dt><strong><code>auth</code></strong> :&ensp;<code>tuple</code></dt>
<dd>Consists of two strings ( loginname , password)</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class collection_protocol_registration:

    &#34;&#34;&#34;Handles the API calls to registrate participants to a Collection Protocol

    Handles the OpenSpecimen API calls to registrate participants to an existing Collection Protocol.
    This class can create participants, delete participants, register existing participants to another protocol,
    merge participants, get the details of an existing participant or more existing participants, update a participant,
    get the consent forms of a participant, download a consent form and delete consents form of participants.

    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
    just pass the parameters via JSON-formatted string. This means the user has to know the keywords.
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.

    Example
    -------

    A code example, where also Participants are registrated is in the Jupyter-Notebook::

        $ jupyter notebook main.ipynb
    &#34;&#34;&#34;

    def __init__(self):

        &#34;&#34;&#34;Constructor of the core class collection_protocol_registration

        Constructor of the class collection_protocol_event. Connects this class to OpenSpecimen
        specific request handle (os_core.request_util.py).

        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consists of two strings ( loginname , password)
        &#34;&#34;&#34;
        self.base_url = config_manager.get_url() + &#39;/collection-protocol-registrations&#39;
        self.auth = config_manager.get_auth() 
        self.OS_request_gen = OS_request_gen(self.auth)

    def ausgabe(self):

        &#34;&#34;&#34;Testing of the URL and authentification.

        If there are any unexpected errors, one can easily test if the URL and login data is spelled correctly.
        The function prints the URL and login data to the output terminal, which was handed over to the class.
        &#34;&#34;&#34;

        print(self.base_url, self.OS_request_gen.auth)


    def create_participant(self, params):

        &#34;&#34;&#34;Create or update a participant to a Collection Protocol.

        This function can create a new participant or update an existing participant to an already existing
        Collection Protocol. To use this function one has to know either the Collection Protocoll id ::cpId::,
        the title of the Collection Protocol ::cpTitle:: or the short title of the Collection Protocol ::cpshorttitle:: .
        Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
        collection_protocol_util in os_util. To update a participant, one has to specify the unique ID of the participant.
        This Id can be searched via the function get_participant_matches in the os_core class participants.

        Parameters
        ----------
        params : string
            JSON formatted string with the parameters of the participant. The paramter participant is a JSON-formatted string itself,
            for creating a participant it can be left empty; for updating the ID of the participant is needed. The keys of the participant
            dict are id[mandatory for updating], firstName, middleName, lastName, uid, birthdate, vitalStatus, deathDate, gender,
            race, ethnicities, sexGenotype, pmis, mrn, siteName, empi.

        One of the following keys is mandatory to identify the protocol where the participant is created or updated cpId, cpTitle or cpShortTitle.

            The key ppid has to be left blank, if it is set to be autogenerated by the system and is mandatory, if it is created manually.

        registrationDate is a mandatory key, the date format is YYYY-MM-DD .

        Returns
        -------
        JSON-dict
            Details of the created or updated Participant or the OpenSpecimen error message as Dictionary.
        &#34;&#34;&#34;

        url = self.base_url + &#39;/&#39;
        payload = params
        r = self.OS_request_gen.post_request(url, payload)

        return json.loads(r.text)


    def delete_consent(self, cprid):

        &#34;&#34;&#34;Delete a consent form of a participant.

        Deletes a consent form of an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
            dict with value true or error message 
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid) + &#39;/consent-form&#39;
        url = self.base_url + endpoint
        r = self.OS_request_gen.delete_request(url)

        return json.loads(r.text)


    def delete_participant(self, cprid):

        &#34;&#34;&#34;Delete a participant from a Collection Protocol

        Deletes an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
            Details of the deleted participant or OpenSpecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid)
        url = self.base_url + endpoint
        r = self.OS_request_gen.delete_request(url)

        return json.loads(r.text)


    def download_consent_form(self, cprid):

        &#34;&#34;&#34;Download the consent form of a participant.

        Downloads the consent form of an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        binary
            Binary file content of the consent form or a status code.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid) + &#39;/consent-form&#39;
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return r


    def get_consents(self, cprid):

        &#34;&#34;&#34;Get the consent form of a participant.

        Gets the consent form of an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
            Details of the consent form or the openSpecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid) + &#39;/consents&#39;
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return r


    def get_registration(self, cprid):

        &#34;&#34;&#34;Get the details form of a participant.

        Gets the details as JSON-dict form of an existing participant with the uniquely participant ID ::cprid::
        which is generated from the system. The ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameter
        ---------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
            Details of the participant or the openSpecimen&#39;s error message.
        &#34;&#34;&#34;
 
        endpoint = &#39;/&#39; + str(cprid)
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)


    def get_registrations(self, params):

        &#34;&#34;&#34;Search for one or more participants

        Gets the details of one or more participants, which are specified in the parameters.
        The Parameters are passed via a JSON-formatted string. This function is used in the 
        os_util class cpr_util, where the specific parameters can be passed.

        Parameter
        ---------
        params : string
            Json formatted string with keys: cpId, registrationDate[optional], name(substring of first, last or middlename)[optional],
            ppid[optional], participantId[optional], dob[optional], specimen[optional], startAt(default=0)[optional],
            maxResults(default=100)[optional], includeStats(default=false)[optional], exactMatch(default=false)[optional]

        Returns
        -------
        JSON-dict
            Details of the Participant, who are matching the search criteria.
        &#34;&#34;&#34;

        endpoint = &#39;/list&#39;
        url = self.base_url + endpoint
        payload= params
        r = self.OS_request_gen.post_request(url, payload)

        return json.loads(r.text)

  
    def register_to_cp(self, params):

        &#34;&#34;&#34;Register a participant to another Collection Protocol

        Registers an already existing Participant to another Collection Protocol.
        The Participants unique ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.
        Also, the collection protocol ID of the Protocol in which the participant is registered at has to be known.

        Parameter
        ---------
        params : string
            JSON-formatted string with the Parameters: the keys are participant( value is a dict with key id and value
            Pariticipant ID[mandatory])[mandatory], registrationDate [mandatory], cpId [mandatory],
            ppid[mandatory if manually generated, leave empty if system-generated]

        Returns
        -------
        JSON-dict
            JSON-dict of the participant which is registred to another protocol.
        &#34;&#34;&#34;

        url = self.base_url + &#39;/&#39;
        payload = params
        r = self.OS_request_gen.post_request(url, payload)

        return json.loads(r.text)



    def merge_participants(self, id_from, id_to):

        &#34;&#34;&#34;Merge Participant x to Participant y

        Merges Participant with the unique Participant ID ::id_from:: to the Participant with
        unique Participant ID ::id_to::. This will move data from all visits and specimens from the source participant to the target participant
        and then deletes the source participant.
        The Participants unique ID has to be known and can be seen for example via 
        the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
        or with the function get_participant_matches in the os_core class participants.

        Parameters
        ----------
        id_from : int
            System generated unique ID of the source participant. Will get converted to a string.
        
        id_to : int
            System generated unique ID of the target participant. Will get converted to a string.

        Returns
        -------
        JSON-dict
           Returns details of the merged participants as JSON-dict or OpenSpecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39;+ str(id_from)
        url = self.base_url + endpoint
        payload = &#39;{\&#34;participant\&#34;:{\&#34;id\&#34;:\&#34;&#39; + str(id_to) + &#39;\&#34;}}&#39;
        r = self.OS_request_gen.put_request(url, payload)

        return json.loads(r.text)

    
    def update_participant(self, cprid, params):

        &#34;&#34;&#34;Update a participant already in a Collection Protocol.

        This function can update an existing participant with a unique Participant ID ::cprid:: to an already existing
        Collection Protocol. To use this function one has to know either the Collection Protocoll id ::cpId::,
        the title of the Collection Protocol ::cpTitle:: or the short title of the Collection Protocol ::cpshorttitle:: .
        Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
        collection_protocol_util in os_util. To update a participant, one has to specify the unique ID of the participant.
        This Id can be searched via the function get_participant_matches in the os_core class participants.

        Parameters
        ----------
        cprid : int
            System generated unique ID of the participant. Will get converted to a string.

        params : string
            JSON formatted string with the parameters of the participant. The paramter participant is a JSON-formatted string itself,
            the parameters which are passed will get updated. The keys of the participant
            dict are id[mandatory], firstName, middleName, lastName, uid, birthdate, vitalStatus, deathDate, gender,
            race, ethnicities, sexGenotype, pmis, mrn, siteName, empi.

        One of the following keys is mandatory to identify the protocol, where the participant is created or updated cpId, cpTitle or cpShortTitle.

            The key ppid has to be left blank, if it is set to be autogenerated by the system and is mandatory, if it is created manually.

        registrationDate is a mandatory key, the date format is YYYY-MM-DD .

        Returns
        -------
        JSON-dict
            Details of the created or updated Participant or the OpenSpecimen error message as Dictionary.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(cprid)
        url = self.base_url + endpoint
        payload = params
        r = self.OS_request_gen.put_request(url, payload)
        return json.loads(r.text)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.ausgabe"><code class="name flex">
<span>def <span class="ident">ausgabe</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Testing of the URL and authentification.</p>
<p>If there are any unexpected errors, one can easily test if the URL and login data is spelled correctly.
The function prints the URL and login data to the output terminal, which was handed over to the class.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def ausgabe(self):

    &#34;&#34;&#34;Testing of the URL and authentification.

    If there are any unexpected errors, one can easily test if the URL and login data is spelled correctly.
    The function prints the URL and login data to the output terminal, which was handed over to the class.
    &#34;&#34;&#34;

    print(self.base_url, self.OS_request_gen.auth)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.create_participant"><code class="name flex">
<span>def <span class="ident">create_participant</span></span>(<span>self, params)</span>
</code></dt>
<dd>
<div class="desc"><p>Create or update a participant to a Collection Protocol.</p>
<p>This function can create a new participant or update an existing participant to an already existing
Collection Protocol. To use this function one has to know either the Collection Protocoll id ::cpId::,
the title of the Collection Protocol ::cpTitle:: or the short title of the Collection Protocol ::cpshorttitle:: .
Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
collection_protocol_util in os_util. To update a participant, one has to specify the unique ID of the participant.
This Id can be searched via the function get_participant_matches in the os_core class participants.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>params</code></strong> :&ensp;<code>string</code></dt>
<dd>JSON formatted string with the parameters of the participant. The paramter participant is a JSON-formatted string itself,
for creating a participant it can be left empty; for updating the ID of the participant is needed. The keys of the participant
dict are id[mandatory for updating], firstName, middleName, lastName, uid, birthdate, vitalStatus, deathDate, gender,
race, ethnicities, sexGenotype, pmis, mrn, siteName, empi.</dd>
</dl>
<p>One of the following keys is mandatory to identify the protocol where the participant is created or updated cpId, cpTitle or cpShortTitle.</p>
<pre><code>The key ppid has to be left blank, if it is set to be autogenerated by the system and is mandatory, if it is created manually.
</code></pre>
<p>registrationDate is a mandatory key, the date format is YYYY-MM-DD .</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the created or updated Participant or the OpenSpecimen error message as Dictionary.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_participant(self, params):

    &#34;&#34;&#34;Create or update a participant to a Collection Protocol.

    This function can create a new participant or update an existing participant to an already existing
    Collection Protocol. To use this function one has to know either the Collection Protocoll id ::cpId::,
    the title of the Collection Protocol ::cpTitle:: or the short title of the Collection Protocol ::cpshorttitle:: .
    Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
    collection_protocol_util in os_util. To update a participant, one has to specify the unique ID of the participant.
    This Id can be searched via the function get_participant_matches in the os_core class participants.

    Parameters
    ----------
    params : string
        JSON formatted string with the parameters of the participant. The paramter participant is a JSON-formatted string itself,
        for creating a participant it can be left empty; for updating the ID of the participant is needed. The keys of the participant
        dict are id[mandatory for updating], firstName, middleName, lastName, uid, birthdate, vitalStatus, deathDate, gender,
        race, ethnicities, sexGenotype, pmis, mrn, siteName, empi.

    One of the following keys is mandatory to identify the protocol where the participant is created or updated cpId, cpTitle or cpShortTitle.

        The key ppid has to be left blank, if it is set to be autogenerated by the system and is mandatory, if it is created manually.

    registrationDate is a mandatory key, the date format is YYYY-MM-DD .

    Returns
    -------
    JSON-dict
        Details of the created or updated Participant or the OpenSpecimen error message as Dictionary.
    &#34;&#34;&#34;

    url = self.base_url + &#39;/&#39;
    payload = params
    r = self.OS_request_gen.post_request(url, payload)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.delete_consent"><code class="name flex">
<span>def <span class="ident">delete_consent</span></span>(<span>self, cprid)</span>
</code></dt>
<dd>
<div class="desc"><p>Delete a consent form of a participant.</p>
<p>Deletes a consent form of an existing participant with the uniquely participant ID ::cprid::
which is generated from the system. The ID has to be known and can be seen for example via
the GUI in the URL: http(s)://<host>:<port>/openspecimen/cp-view/{cpId}/participants/{cprid}/&hellip;
or with the function get_participant_matches in the os_core class participants.</p>
<h2 id="parameter">Parameter</h2>
<p>cprid : int
System generated unique ID of the participant. Will get converted to a string.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>dict with value true or error message</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_consent(self, cprid):

    &#34;&#34;&#34;Delete a consent form of a participant.

    Deletes a consent form of an existing participant with the uniquely participant ID ::cprid::
    which is generated from the system. The ID has to be known and can be seen for example via 
    the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
    or with the function get_participant_matches in the os_core class participants.

    Parameter
    ---------
    cprid : int
        System generated unique ID of the participant. Will get converted to a string.

    Returns
    -------
    JSON-dict
        dict with value true or error message 
    &#34;&#34;&#34;

    endpoint = &#39;/&#39; + str(cprid) + &#39;/consent-form&#39;
    url = self.base_url + endpoint
    r = self.OS_request_gen.delete_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.delete_participant"><code class="name flex">
<span>def <span class="ident">delete_participant</span></span>(<span>self, cprid)</span>
</code></dt>
<dd>
<div class="desc"><p>Delete a participant from a Collection Protocol</p>
<p>Deletes an existing participant with the uniquely participant ID ::cprid::
which is generated from the system. The ID has to be known and can be seen for example via
the GUI in the URL: http(s)://<host>:<port>/openspecimen/cp-view/{cpId}/participants/{cprid}/&hellip;
or with the function get_participant_matches in the os_core class participants.</p>
<h2 id="parameter">Parameter</h2>
<p>cprid : int
System generated unique ID of the participant. Will get converted to a string.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the deleted participant or OpenSpecimen's error message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_participant(self, cprid):

    &#34;&#34;&#34;Delete a participant from a Collection Protocol

    Deletes an existing participant with the uniquely participant ID ::cprid::
    which is generated from the system. The ID has to be known and can be seen for example via 
    the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
    or with the function get_participant_matches in the os_core class participants.

    Parameter
    ---------
    cprid : int
        System generated unique ID of the participant. Will get converted to a string.

    Returns
    -------
    JSON-dict
        Details of the deleted participant or OpenSpecimen&#39;s error message.
    &#34;&#34;&#34;

    endpoint = &#39;/&#39; + str(cprid)
    url = self.base_url + endpoint
    r = self.OS_request_gen.delete_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.download_consent_form"><code class="name flex">
<span>def <span class="ident">download_consent_form</span></span>(<span>self, cprid)</span>
</code></dt>
<dd>
<div class="desc"><p>Download the consent form of a participant.</p>
<p>Downloads the consent form of an existing participant with the uniquely participant ID ::cprid::
which is generated from the system. The ID has to be known and can be seen for example via
the GUI in the URL: http(s)://<host>:<port>/openspecimen/cp-view/{cpId}/participants/{cprid}/&hellip;
or with the function get_participant_matches in the os_core class participants.</p>
<h2 id="parameter">Parameter</h2>
<p>cprid : int
System generated unique ID of the participant. Will get converted to a string.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>binary</code></dt>
<dd>Binary file content of the consent form or a status code.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def download_consent_form(self, cprid):

    &#34;&#34;&#34;Download the consent form of a participant.

    Downloads the consent form of an existing participant with the uniquely participant ID ::cprid::
    which is generated from the system. The ID has to be known and can be seen for example via 
    the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
    or with the function get_participant_matches in the os_core class participants.

    Parameter
    ---------
    cprid : int
        System generated unique ID of the participant. Will get converted to a string.

    Returns
    -------
    binary
        Binary file content of the consent form or a status code.
    &#34;&#34;&#34;

    endpoint = &#39;/&#39; + str(cprid) + &#39;/consent-form&#39;
    url = self.base_url + endpoint
    r = self.OS_request_gen.get_request(url)

    return r</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_consents"><code class="name flex">
<span>def <span class="ident">get_consents</span></span>(<span>self, cprid)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the consent form of a participant.</p>
<p>Gets the consent form of an existing participant with the uniquely participant ID ::cprid::
which is generated from the system. The ID has to be known and can be seen for example via
the GUI in the URL: http(s)://<host>:<port>/openspecimen/cp-view/{cpId}/participants/{cprid}/&hellip;
or with the function get_participant_matches in the os_core class participants.</p>
<h2 id="parameter">Parameter</h2>
<p>cprid : int
System generated unique ID of the participant. Will get converted to a string.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the consent form or the openSpecimen's error message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_consents(self, cprid):

    &#34;&#34;&#34;Get the consent form of a participant.

    Gets the consent form of an existing participant with the uniquely participant ID ::cprid::
    which is generated from the system. The ID has to be known and can be seen for example via 
    the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
    or with the function get_participant_matches in the os_core class participants.

    Parameter
    ---------
    cprid : int
        System generated unique ID of the participant. Will get converted to a string.

    Returns
    -------
    JSON-dict
        Details of the consent form or the openSpecimen&#39;s error message.
    &#34;&#34;&#34;

    endpoint = &#39;/&#39; + str(cprid) + &#39;/consents&#39;
    url = self.base_url + endpoint
    r = self.OS_request_gen.get_request(url)

    return r</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_registration"><code class="name flex">
<span>def <span class="ident">get_registration</span></span>(<span>self, cprid)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the details form of a participant.</p>
<p>Gets the details as JSON-dict form of an existing participant with the uniquely participant ID ::cprid::
which is generated from the system. The ID has to be known and can be seen for example via
the GUI in the URL: http(s)://<host>:<port>/openspecimen/cp-view/{cpId}/participants/{cprid}/&hellip;
or with the function get_participant_matches in the os_core class participants.</p>
<h2 id="parameter">Parameter</h2>
<p>cprid : int
System generated unique ID of the participant. Will get converted to a string.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the participant or the openSpecimen's error message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_registration(self, cprid):

    &#34;&#34;&#34;Get the details form of a participant.

    Gets the details as JSON-dict form of an existing participant with the uniquely participant ID ::cprid::
    which is generated from the system. The ID has to be known and can be seen for example via 
    the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
    or with the function get_participant_matches in the os_core class participants.

    Parameter
    ---------
    cprid : int
        System generated unique ID of the participant. Will get converted to a string.

    Returns
    -------
    JSON-dict
        Details of the participant or the openSpecimen&#39;s error message.
    &#34;&#34;&#34;

    endpoint = &#39;/&#39; + str(cprid)
    url = self.base_url + endpoint
    r = self.OS_request_gen.get_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_registrations"><code class="name flex">
<span>def <span class="ident">get_registrations</span></span>(<span>self, params)</span>
</code></dt>
<dd>
<div class="desc"><p>Search for one or more participants</p>
<p>Gets the details of one or more participants, which are specified in the parameters.
The Parameters are passed via a JSON-formatted string. This function is used in the
os_util class cpr_util, where the specific parameters can be passed.</p>
<h2 id="parameter">Parameter</h2>
<p>params : string
Json formatted string with keys: cpId, registrationDate[optional], name(substring of first, last or middlename)[optional],
ppid[optional], participantId[optional], dob[optional], specimen[optional], startAt(default=0)[optional],
maxResults(default=100)[optional], includeStats(default=false)[optional], exactMatch(default=false)[optional]</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the Participant, who are matching the search criteria.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_registrations(self, params):

    &#34;&#34;&#34;Search for one or more participants

    Gets the details of one or more participants, which are specified in the parameters.
    The Parameters are passed via a JSON-formatted string. This function is used in the 
    os_util class cpr_util, where the specific parameters can be passed.

    Parameter
    ---------
    params : string
        Json formatted string with keys: cpId, registrationDate[optional], name(substring of first, last or middlename)[optional],
        ppid[optional], participantId[optional], dob[optional], specimen[optional], startAt(default=0)[optional],
        maxResults(default=100)[optional], includeStats(default=false)[optional], exactMatch(default=false)[optional]

    Returns
    -------
    JSON-dict
        Details of the Participant, who are matching the search criteria.
    &#34;&#34;&#34;

    endpoint = &#39;/list&#39;
    url = self.base_url + endpoint
    payload= params
    r = self.OS_request_gen.post_request(url, payload)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.merge_participants"><code class="name flex">
<span>def <span class="ident">merge_participants</span></span>(<span>self, id_from, id_to)</span>
</code></dt>
<dd>
<div class="desc"><p>Merge Participant x to Participant y</p>
<p>Merges Participant with the unique Participant ID ::id_from:: to the Participant with
unique Participant ID ::id_to::. This will move data from all visits and specimens from the source participant to the target participant
and then deletes the source participant.
The Participants unique ID has to be known and can be seen for example via
the GUI in the URL: http(s)://<host>:<port>/openspecimen/cp-view/{cpId}/participants/{cprid}/&hellip;
or with the function get_participant_matches in the os_core class participants.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>id_from</code></strong> :&ensp;<code>int</code></dt>
<dd>System generated unique ID of the source participant. Will get converted to a string.</dd>
<dt><strong><code>id_to</code></strong> :&ensp;<code>int</code></dt>
<dd>System generated unique ID of the target participant. Will get converted to a string.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>&nbsp;</dd>
</dl>
<p>Returns details of the merged participants as JSON-dict or OpenSpecimen's error message.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def merge_participants(self, id_from, id_to):

    &#34;&#34;&#34;Merge Participant x to Participant y

    Merges Participant with the unique Participant ID ::id_from:: to the Participant with
    unique Participant ID ::id_to::. This will move data from all visits and specimens from the source participant to the target participant
    and then deletes the source participant.
    The Participants unique ID has to be known and can be seen for example via 
    the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
    or with the function get_participant_matches in the os_core class participants.

    Parameters
    ----------
    id_from : int
        System generated unique ID of the source participant. Will get converted to a string.
    
    id_to : int
        System generated unique ID of the target participant. Will get converted to a string.

    Returns
    -------
    JSON-dict
       Returns details of the merged participants as JSON-dict or OpenSpecimen&#39;s error message.
    &#34;&#34;&#34;

    endpoint = &#39;/&#39;+ str(id_from)
    url = self.base_url + endpoint
    payload = &#39;{\&#34;participant\&#34;:{\&#34;id\&#34;:\&#34;&#39; + str(id_to) + &#39;\&#34;}}&#39;
    r = self.OS_request_gen.put_request(url, payload)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.register_to_cp"><code class="name flex">
<span>def <span class="ident">register_to_cp</span></span>(<span>self, params)</span>
</code></dt>
<dd>
<div class="desc"><p>Register a participant to another Collection Protocol</p>
<p>Registers an already existing Participant to another Collection Protocol.
The Participants unique ID has to be known and can be seen for example via
the GUI in the URL: http(s)://<host>:<port>/openspecimen/cp-view/{cpId}/participants/{cprid}/&hellip;
or with the function get_participant_matches in the os_core class participants.
Also, the collection protocol ID of the Protocol in which the participant is registered at has to be known.</p>
<h2 id="parameter">Parameter</h2>
<p>params : string
JSON-formatted string with the Parameters: the keys are participant( value is a dict with key id and value
Pariticipant ID[mandatory])[mandatory], registrationDate [mandatory], cpId [mandatory],
ppid[mandatory if manually generated, leave empty if system-generated]</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>JSON-dict of the participant which is registred to another protocol.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def register_to_cp(self, params):

    &#34;&#34;&#34;Register a participant to another Collection Protocol

    Registers an already existing Participant to another Collection Protocol.
    The Participants unique ID has to be known and can be seen for example via 
    the GUI in the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpId}/participants/{cprid}/...
    or with the function get_participant_matches in the os_core class participants.
    Also, the collection protocol ID of the Protocol in which the participant is registered at has to be known.

    Parameter
    ---------
    params : string
        JSON-formatted string with the Parameters: the keys are participant( value is a dict with key id and value
        Pariticipant ID[mandatory])[mandatory], registrationDate [mandatory], cpId [mandatory],
        ppid[mandatory if manually generated, leave empty if system-generated]

    Returns
    -------
    JSON-dict
        JSON-dict of the participant which is registred to another protocol.
    &#34;&#34;&#34;

    url = self.base_url + &#39;/&#39;
    payload = params
    r = self.OS_request_gen.post_request(url, payload)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.update_participant"><code class="name flex">
<span>def <span class="ident">update_participant</span></span>(<span>self, cprid, params)</span>
</code></dt>
<dd>
<div class="desc"><p>Update a participant already in a Collection Protocol.</p>
<p>This function can update an existing participant with a unique Participant ID ::cprid:: to an already existing
Collection Protocol. To use this function one has to know either the Collection Protocoll id ::cpId::,
the title of the Collection Protocol ::cpTitle:: or the short title of the Collection Protocol ::cpshorttitle:: .
Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
collection_protocol_util in os_util. To update a participant, one has to specify the unique ID of the participant.
This Id can be searched via the function get_participant_matches in the os_core class participants.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>cprid</code></strong> :&ensp;<code>int</code></dt>
<dd>System generated unique ID of the participant. Will get converted to a string.</dd>
<dt><strong><code>params</code></strong> :&ensp;<code>string</code></dt>
<dd>JSON formatted string with the parameters of the participant. The paramter participant is a JSON-formatted string itself,
the parameters which are passed will get updated. The keys of the participant
dict are id[mandatory], firstName, middleName, lastName, uid, birthdate, vitalStatus, deathDate, gender,
race, ethnicities, sexGenotype, pmis, mrn, siteName, empi.</dd>
</dl>
<p>One of the following keys is mandatory to identify the protocol, where the participant is created or updated cpId, cpTitle or cpShortTitle.</p>
<pre><code>The key ppid has to be left blank, if it is set to be autogenerated by the system and is mandatory, if it is created manually.
</code></pre>
<p>registrationDate is a mandatory key, the date format is YYYY-MM-DD .</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the created or updated Participant or the OpenSpecimen error message as Dictionary.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_participant(self, cprid, params):

    &#34;&#34;&#34;Update a participant already in a Collection Protocol.

    This function can update an existing participant with a unique Participant ID ::cprid:: to an already existing
    Collection Protocol. To use this function one has to know either the Collection Protocoll id ::cpId::,
    the title of the Collection Protocol ::cpTitle:: or the short title of the Collection Protocol ::cpshorttitle:: .
    Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
    collection_protocol_util in os_util. To update a participant, one has to specify the unique ID of the participant.
    This Id can be searched via the function get_participant_matches in the os_core class participants.

    Parameters
    ----------
    cprid : int
        System generated unique ID of the participant. Will get converted to a string.

    params : string
        JSON formatted string with the parameters of the participant. The paramter participant is a JSON-formatted string itself,
        the parameters which are passed will get updated. The keys of the participant
        dict are id[mandatory], firstName, middleName, lastName, uid, birthdate, vitalStatus, deathDate, gender,
        race, ethnicities, sexGenotype, pmis, mrn, siteName, empi.

    One of the following keys is mandatory to identify the protocol, where the participant is created or updated cpId, cpTitle or cpShortTitle.

        The key ppid has to be left blank, if it is set to be autogenerated by the system and is mandatory, if it is created manually.

    registrationDate is a mandatory key, the date format is YYYY-MM-DD .

    Returns
    -------
    JSON-dict
        Details of the created or updated Participant or the OpenSpecimen error message as Dictionary.
    &#34;&#34;&#34;

    endpoint = &#39;/&#39; + str(cprid)
    url = self.base_url + endpoint
    payload = params
    r = self.OS_request_gen.put_request(url, payload)
    return json.loads(r.text)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="OpenSpecimenAPIconnector.os_core" href="index.html">OpenSpecimenAPIconnector.os_core</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration">collection_protocol_registration</a></code></h4>
<ul class="">
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.ausgabe" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.ausgabe">ausgabe</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.create_participant" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.create_participant">create_participant</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.delete_consent" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.delete_consent">delete_consent</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.delete_participant" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.delete_participant">delete_participant</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.download_consent_form" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.download_consent_form">download_consent_form</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_consents" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_consents">get_consents</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_registration" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_registration">get_registration</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_registrations" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.get_registrations">get_registrations</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.merge_participants" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.merge_participants">merge_participants</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.register_to_cp" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.register_to_cp">register_to_cp</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.update_participant" href="#OpenSpecimenAPIconnector.os_core.collection_protocol_registration.collection_protocol_registration.update_participant">update_participant</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>