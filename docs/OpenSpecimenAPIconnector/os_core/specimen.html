<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>OpenSpecimenAPIconnector.os_core.specimen API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>OpenSpecimenAPIconnector.os_core.specimen</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#! /bin/python3

# Import
from datetime import datetime
from .req_util import OS_request_gen

import json


class specimen:
    
    &#34;&#34;&#34;Handles the calls for Specimens
    
    This class handles the API calls for OpenSpecimen Specimens/Aliquots/Derivatives. It can create, delete, 
    search specimens with different parameters, get all specimens in the Sytem.
    The output is a JSON dict or the Error message as dict. It also can check if a
    specimen exists which returns a string which tells you if it exists.
    
    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
    just pass the parameters via JSON-formatted string. This means the user has to know the keywords.
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.
    
    Example
    -------
    A code example, where the Specimens/Derivatives/Aliquots are handled is in the Jupyter-Notebook::
        $ jupyter notebook main.ipynb
    &#34;&#34;&#34;

    def __init__(self, base_url, auth):

        &#34;&#34;&#34;Constructor of the Class collection_protocol
        
        Constructor of the class colelction_protocol, can handle the basic API-calls
        of the collection protocol in OpenSpecimen. Connects this class to OpenSpecimen
        specific request handle (os_core.request_util.py).
        
        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consits of two strings ( loginname , password)
        &#34;&#34;&#34; 
        
        self.OS_request_gen = OS_request_gen(auth)
        self.base_url = base_url + &#39;/specimens&#39;


    def ausgabe(self):
        
        &#34;&#34;&#34;Testing of the URL and authentification.
        
        If there are unexpected errors one can easily test if the URL and login data is correctly spelled.
        the function prints the URL and login data, handed over to the class, to the output terminal.
        &#34;&#34;&#34;

        print(self.base_url, self.OS_request_gen.auth)
        

    def get_specimen(self, specimenid):
        
        &#34;&#34;&#34;Get the Specimen with the ID ::specimenid::
        
        Get the details of the Specimen with the unique ID ::cspecimenid::.
        This ID is generated automatically from OpenSpecimen when the Specimen is created.
        It can be seen in the GUI by clicking on the desired Specimen, and read from the URL:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimens/{specimenid}/... .
        Or via search Specimen, for example by name and then extract the ID via key [&#34;id&#34;].
        
        Parameters
        ----------
        specimenid : string or int
            The System&#39;s ID of the Specimen, will be converted to a string.
        Returns
        -------
        JSON-dict
            Details of the Specimen with the specified ID, or the OpenSpecimen error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(specimenid)
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)


    def check_specimen(self, specimenLabel):
        
        &#34;&#34;&#34;Check if a Specimen with Label exists
        
        Check if a Specimen with Label ::specimenLabel:: already exists in the System.
        Can be interesting if one manually creates Label to avoid Specimens with the same label.
        
        Parameters
        ----------
        specimenLabel : string
            Label which should be checked as string. Get converted to a string
        
        Returns
        -------
        string
            If Specimen exists, returns &#34;Specimen with label &lt;specimenLabel&gt; exists&#34;.
            Else &#34;Specimen with label &lt;specimenLabel&gt; does not exist&#34;.
        &#34;&#34;&#34;

        endpoint = &#39;?label=&#39; + str(specimenLabel)
        url = self.base_url + endpoint
        r = self.OS_request_gen.head_request(url)

        if r.status_code == 200:
            r = &#39;Specimen with Label &#39; + str(specimenLabel) + &#39; exists.&#39;
        else:
            r = &#39;Specimen with Label &#39; + \
                str(specimenLabel) + &#39; does not exist.&#39;

        return r


    def create_specimen(self, params):

        &#34;&#34;&#34;Creates a Specimen
        
        Creates a Specimen. In order to use this function one has to know
        the parameters which OpenSpecimen needs to create a Specimen. One can use it via the os_util class
        specimen_util.py. This allows just the basic definition, if one has Extensions 
        e.g. BBMRI contact, this fields has to be added separatly. 
        
        Parameters
        ----------
        params : string
            JSON formatted string with parameters: label[mandatory if its created manually, leave empty if the System creates it
            automatically], specimenclass, type, pathology, atomicSite, laterality, initialQty, availableQty, lineage,
            visitId,  status, storageLocation(dict with keys positionX[optional], 
            positionY[optional])[optional], concetration[optional], biohazards[optional], comments[optional],
            collectionEvent(DICT with keys user,time, container[otpional], procedure[optional]),
            receivedEvent(DICT with keys user, time, receivedQuality), extensionDetails(DICT with keys useUdn, attrsmap,
            DICT with extension keys)[optional]
            
        Returns
        -------
        json-dict
            Either details of the created Specimen as dictornary or OpenSpecimen&#39;s error message
        &#34;&#34;&#34;
        
        url = self.base_url 
        payload = params
        r = self.OS_request_gen.post_request(url, data=payload)

        return json.loads(r.text)

    
    def search_specimens(self, search_string):
        
        &#34;&#34;&#34;Search for  Specimen with specific values.
        
        Search for one or more Specimens with the values in the search_string defined. The search string looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;...&amp;{param_x}={value_x}
        With the class specimen_util from os_util and function ::search_specimens:: the search string is generated
        and this function is called. Not all keys from OpenSpecimen can be easily searched after.
        
        Parameters
        ----------
        search_string : string
            String with the following format: ?{param_1}={value_1}&amp;...&amp;{param_x}={value_x} . The parameters can be one of the following:
            label[optional], cprId[optional], eventId[optional], visitId[optional]
        Returns
        -------
        dict
            Details of the matching Specimens, if no one matches it is an empty list.
        &#34;&#34;&#34;
        
        endpoint = str(search_string)
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)

    def update_specimen(self, specimenid, updateparams):
        
        &#34;&#34;&#34;Updates a existing Specimen/Aliquot/Derivative
        
        Updates a existing Specimen/Derivative/Aliquot with the automatically generated OpsenSpecimen&#39;s system wide
        unique Specimen ID ::specimenid::, with the Parameters ::updateparams:: which are passed to the function.
        The ID of the Specimen have to be known and can for example be seen in the GUI by clicking on 
        theSpecimen, which has the format http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimen/{specimenid} .
        Or via the function search_specimens and extract from there with the key [&#34;id&#34;]
        
        Note
        ----
        The optional parameters are those, which are optional for a Specimens. For updating all parameters are optional,
        does which are not passed to the function will stay the same as before.
        
        Parameter
        ---------
        cpid : strinf or int
            Unique Collection Protocol ID which is generated automatically from the System. It will be converted to a string.
        
        params : string
            JSON formatted string with parameters: label[mandatory if its created manually, leave empty if the System creates it
            automatically], specimenclass, type, pathology, atomicSite, laterality, initialQty, availableQty, lineage,
            visitId, parentId[mandatory if Aliquot/Derivative], status, storageLocation(dict with keys positionX[optional],
            positionY[optional])[optional], concetration[optional],         biohazards[optional], comments[optional],
            collectionEvent(DICT with keys user,time, container[otpional], procedure[optional]),
            receivedEvent(DICT with keys user, time, receivedQuality), extensionDetails(DICT with keys useUdn, attrsmap,
            DICT with extension keys)[optional]
            
        Returns
        -------
        JSON-dict
            JSON-dict with the details of the updated Colelction Protocol or the OpenSpecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39;+str(specimenid)
        url = self.base_url + endpoint
        data = updateparams
        r = self.OS_request_gen.put_request(url, data)
        
        return json.loads(r.text)


    def delete_specimen(self, specimenids):
        
        &#34;&#34;&#34;Delete a Specimen/Derivative/Aliquot
        
        Delete an already existing Specimen/Derivative/Aliquot. The parameter ::specimenid:: is the uniqe ID of the Specimen/
        Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the 
        Specimen/Derivative/Aliquot and read it from the URL, with format:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpid}/specimen/{specimenid}/... .
        An other possibility is to search via &#39;search_specimens&#39; for a specific parameter and then extract the ID
        from the JSON-dict which get returned. The function allows also to delete a list of specimen
        
        Parameters
        ----------
        specimenids: string 
            The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itselfs. 
            Deleting specimens has the form &#34;?id=specimenid_1+...+specimenid_n&#34;
            
        Returns
        -------
        JSON-dict
            Details of the Specimens which is deleted or the OpenSpecimen error message as dict.
        &#34;&#34;&#34;

        url = self.base_url + specimenids
        r = self.OS_request_gen.delete_request(url)

        return json.loads(r.text)

##TODO create aliquot</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="OpenSpecimenAPIconnector.os_core.specimen.specimen"><code class="flex name class">
<span>class <span class="ident">specimen</span></span>
<span>(</span><span>base_url, auth)</span>
</code></dt>
<dd>
<div class="desc"><p>Handles the calls for Specimens</p>
<p>This class handles the API calls for OpenSpecimen Specimens/Aliquots/Derivatives. It can create, delete,
search specimens with different parameters, get all specimens in the Sytem.
The output is a JSON dict or the Error message as dict. It also can check if a
specimen exists which returns a string which tells you if it exists.</p>
<h2 id="notes">Notes</h2>
<p>In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
just pass the parameters via JSON-formatted string. This means the user has to know the keywords.
The API calls are documented in <a href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
<h2 id="example">Example</h2>
<p>A code example, where the Specimens/Derivatives/Aliquots are handled is in the Jupyter-Notebook::
$ jupyter notebook main.ipynb</p>
<p>Constructor of the Class collection_protocol</p>
<p>Constructor of the class colelction_protocol, can handle the basic API-calls
of the collection protocol in OpenSpecimen. Connects this class to OpenSpecimen
specific request handle (os_core.request_util.py).</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>base_url</code></strong> :&ensp;<code>string</code></dt>
<dd>URL to openspecimen, has the format: http(s)://<host>:<port>/openspecimen/rest/ng</dd>
<dt><strong><code>auth</code></strong> :&ensp;<code>tuple</code></dt>
<dd>Consits of two strings ( loginname , password)</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class specimen:
    
    &#34;&#34;&#34;Handles the calls for Specimens
    
    This class handles the API calls for OpenSpecimen Specimens/Aliquots/Derivatives. It can create, delete, 
    search specimens with different parameters, get all specimens in the Sytem.
    The output is a JSON dict or the Error message as dict. It also can check if a
    specimen exists which returns a string which tells you if it exists.
    
    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
    just pass the parameters via JSON-formatted string. This means the user has to know the keywords.
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.
    
    Example
    -------
    A code example, where the Specimens/Derivatives/Aliquots are handled is in the Jupyter-Notebook::
        $ jupyter notebook main.ipynb
    &#34;&#34;&#34;

    def __init__(self, base_url, auth):

        &#34;&#34;&#34;Constructor of the Class collection_protocol
        
        Constructor of the class colelction_protocol, can handle the basic API-calls
        of the collection protocol in OpenSpecimen. Connects this class to OpenSpecimen
        specific request handle (os_core.request_util.py).
        
        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consits of two strings ( loginname , password)
        &#34;&#34;&#34; 
        
        self.OS_request_gen = OS_request_gen(auth)
        self.base_url = base_url + &#39;/specimens&#39;


    def ausgabe(self):
        
        &#34;&#34;&#34;Testing of the URL and authentification.
        
        If there are unexpected errors one can easily test if the URL and login data is correctly spelled.
        the function prints the URL and login data, handed over to the class, to the output terminal.
        &#34;&#34;&#34;

        print(self.base_url, self.OS_request_gen.auth)
        

    def get_specimen(self, specimenid):
        
        &#34;&#34;&#34;Get the Specimen with the ID ::specimenid::
        
        Get the details of the Specimen with the unique ID ::cspecimenid::.
        This ID is generated automatically from OpenSpecimen when the Specimen is created.
        It can be seen in the GUI by clicking on the desired Specimen, and read from the URL:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimens/{specimenid}/... .
        Or via search Specimen, for example by name and then extract the ID via key [&#34;id&#34;].
        
        Parameters
        ----------
        specimenid : string or int
            The System&#39;s ID of the Specimen, will be converted to a string.
        Returns
        -------
        JSON-dict
            Details of the Specimen with the specified ID, or the OpenSpecimen error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39; + str(specimenid)
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)


    def check_specimen(self, specimenLabel):
        
        &#34;&#34;&#34;Check if a Specimen with Label exists
        
        Check if a Specimen with Label ::specimenLabel:: already exists in the System.
        Can be interesting if one manually creates Label to avoid Specimens with the same label.
        
        Parameters
        ----------
        specimenLabel : string
            Label which should be checked as string. Get converted to a string
        
        Returns
        -------
        string
            If Specimen exists, returns &#34;Specimen with label &lt;specimenLabel&gt; exists&#34;.
            Else &#34;Specimen with label &lt;specimenLabel&gt; does not exist&#34;.
        &#34;&#34;&#34;

        endpoint = &#39;?label=&#39; + str(specimenLabel)
        url = self.base_url + endpoint
        r = self.OS_request_gen.head_request(url)

        if r.status_code == 200:
            r = &#39;Specimen with Label &#39; + str(specimenLabel) + &#39; exists.&#39;
        else:
            r = &#39;Specimen with Label &#39; + \
                str(specimenLabel) + &#39; does not exist.&#39;

        return r


    def create_specimen(self, params):

        &#34;&#34;&#34;Creates a Specimen
        
        Creates a Specimen. In order to use this function one has to know
        the parameters which OpenSpecimen needs to create a Specimen. One can use it via the os_util class
        specimen_util.py. This allows just the basic definition, if one has Extensions 
        e.g. BBMRI contact, this fields has to be added separatly. 
        
        Parameters
        ----------
        params : string
            JSON formatted string with parameters: label[mandatory if its created manually, leave empty if the System creates it
            automatically], specimenclass, type, pathology, atomicSite, laterality, initialQty, availableQty, lineage,
            visitId,  status, storageLocation(dict with keys positionX[optional], 
            positionY[optional])[optional], concetration[optional], biohazards[optional], comments[optional],
            collectionEvent(DICT with keys user,time, container[otpional], procedure[optional]),
            receivedEvent(DICT with keys user, time, receivedQuality), extensionDetails(DICT with keys useUdn, attrsmap,
            DICT with extension keys)[optional]
            
        Returns
        -------
        json-dict
            Either details of the created Specimen as dictornary or OpenSpecimen&#39;s error message
        &#34;&#34;&#34;
        
        url = self.base_url 
        payload = params
        r = self.OS_request_gen.post_request(url, data=payload)

        return json.loads(r.text)

    
    def search_specimens(self, search_string):
        
        &#34;&#34;&#34;Search for  Specimen with specific values.
        
        Search for one or more Specimens with the values in the search_string defined. The search string looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;...&amp;{param_x}={value_x}
        With the class specimen_util from os_util and function ::search_specimens:: the search string is generated
        and this function is called. Not all keys from OpenSpecimen can be easily searched after.
        
        Parameters
        ----------
        search_string : string
            String with the following format: ?{param_1}={value_1}&amp;...&amp;{param_x}={value_x} . The parameters can be one of the following:
            label[optional], cprId[optional], eventId[optional], visitId[optional]
        Returns
        -------
        dict
            Details of the matching Specimens, if no one matches it is an empty list.
        &#34;&#34;&#34;
        
        endpoint = str(search_string)
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)

    def update_specimen(self, specimenid, updateparams):
        
        &#34;&#34;&#34;Updates a existing Specimen/Aliquot/Derivative
        
        Updates a existing Specimen/Derivative/Aliquot with the automatically generated OpsenSpecimen&#39;s system wide
        unique Specimen ID ::specimenid::, with the Parameters ::updateparams:: which are passed to the function.
        The ID of the Specimen have to be known and can for example be seen in the GUI by clicking on 
        theSpecimen, which has the format http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimen/{specimenid} .
        Or via the function search_specimens and extract from there with the key [&#34;id&#34;]
        
        Note
        ----
        The optional parameters are those, which are optional for a Specimens. For updating all parameters are optional,
        does which are not passed to the function will stay the same as before.
        
        Parameter
        ---------
        cpid : strinf or int
            Unique Collection Protocol ID which is generated automatically from the System. It will be converted to a string.
        
        params : string
            JSON formatted string with parameters: label[mandatory if its created manually, leave empty if the System creates it
            automatically], specimenclass, type, pathology, atomicSite, laterality, initialQty, availableQty, lineage,
            visitId, parentId[mandatory if Aliquot/Derivative], status, storageLocation(dict with keys positionX[optional],
            positionY[optional])[optional], concetration[optional],         biohazards[optional], comments[optional],
            collectionEvent(DICT with keys user,time, container[otpional], procedure[optional]),
            receivedEvent(DICT with keys user, time, receivedQuality), extensionDetails(DICT with keys useUdn, attrsmap,
            DICT with extension keys)[optional]
            
        Returns
        -------
        JSON-dict
            JSON-dict with the details of the updated Colelction Protocol or the OpenSpecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/&#39;+str(specimenid)
        url = self.base_url + endpoint
        data = updateparams
        r = self.OS_request_gen.put_request(url, data)
        
        return json.loads(r.text)


    def delete_specimen(self, specimenids):
        
        &#34;&#34;&#34;Delete a Specimen/Derivative/Aliquot
        
        Delete an already existing Specimen/Derivative/Aliquot. The parameter ::specimenid:: is the uniqe ID of the Specimen/
        Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the 
        Specimen/Derivative/Aliquot and read it from the URL, with format:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpid}/specimen/{specimenid}/... .
        An other possibility is to search via &#39;search_specimens&#39; for a specific parameter and then extract the ID
        from the JSON-dict which get returned. The function allows also to delete a list of specimen
        
        Parameters
        ----------
        specimenids: string 
            The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itselfs. 
            Deleting specimens has the form &#34;?id=specimenid_1+...+specimenid_n&#34;
            
        Returns
        -------
        JSON-dict
            Details of the Specimens which is deleted or the OpenSpecimen error message as dict.
        &#34;&#34;&#34;

        url = self.base_url + specimenids
        r = self.OS_request_gen.delete_request(url)

        return json.loads(r.text)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="OpenSpecimenAPIconnector.os_core.specimen.specimen.ausgabe"><code class="name flex">
<span>def <span class="ident">ausgabe</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Testing of the URL and authentification.</p>
<p>If there are unexpected errors one can easily test if the URL and login data is correctly spelled.
the function prints the URL and login data, handed over to the class, to the output terminal.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def ausgabe(self):
    
    &#34;&#34;&#34;Testing of the URL and authentification.
    
    If there are unexpected errors one can easily test if the URL and login data is correctly spelled.
    the function prints the URL and login data, handed over to the class, to the output terminal.
    &#34;&#34;&#34;

    print(self.base_url, self.OS_request_gen.auth)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.specimen.specimen.check_specimen"><code class="name flex">
<span>def <span class="ident">check_specimen</span></span>(<span>self, specimenLabel)</span>
</code></dt>
<dd>
<div class="desc"><p>Check if a Specimen with Label exists</p>
<p>Check if a Specimen with Label ::specimenLabel:: already exists in the System.
Can be interesting if one manually creates Label to avoid Specimens with the same label.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>specimenLabel</code></strong> :&ensp;<code>string</code></dt>
<dd>Label which should be checked as string. Get converted to a string</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>string</code></dt>
<dd>If Specimen exists, returns "Specimen with label <specimenLabel> exists".
Else "Specimen with label <specimenLabel> does not exist".</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_specimen(self, specimenLabel):
    
    &#34;&#34;&#34;Check if a Specimen with Label exists
    
    Check if a Specimen with Label ::specimenLabel:: already exists in the System.
    Can be interesting if one manually creates Label to avoid Specimens with the same label.
    
    Parameters
    ----------
    specimenLabel : string
        Label which should be checked as string. Get converted to a string
    
    Returns
    -------
    string
        If Specimen exists, returns &#34;Specimen with label &lt;specimenLabel&gt; exists&#34;.
        Else &#34;Specimen with label &lt;specimenLabel&gt; does not exist&#34;.
    &#34;&#34;&#34;

    endpoint = &#39;?label=&#39; + str(specimenLabel)
    url = self.base_url + endpoint
    r = self.OS_request_gen.head_request(url)

    if r.status_code == 200:
        r = &#39;Specimen with Label &#39; + str(specimenLabel) + &#39; exists.&#39;
    else:
        r = &#39;Specimen with Label &#39; + \
            str(specimenLabel) + &#39; does not exist.&#39;

    return r</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.specimen.specimen.create_specimen"><code class="name flex">
<span>def <span class="ident">create_specimen</span></span>(<span>self, params)</span>
</code></dt>
<dd>
<div class="desc"><p>Creates a Specimen</p>
<p>Creates a Specimen. In order to use this function one has to know
the parameters which OpenSpecimen needs to create a Specimen. One can use it via the os_util class
specimen_util.py. This allows just the basic definition, if one has Extensions
e.g. BBMRI contact, this fields has to be added separatly. </p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>params</code></strong> :&ensp;<code>string</code></dt>
<dd>JSON formatted string with parameters: label[mandatory if its created manually, leave empty if the System creates it
automatically], specimenclass, type, pathology, atomicSite, laterality, initialQty, availableQty, lineage,
visitId,
status, storageLocation(dict with keys positionX[optional],
positionY[optional])[optional], concetration[optional], biohazards[optional], comments[optional],
collectionEvent(DICT with keys user,time, container[otpional], procedure[optional]),
receivedEvent(DICT with keys user, time, receivedQuality), extensionDetails(DICT with keys useUdn, attrsmap,
DICT with extension keys)[optional]</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>json-dict</code></dt>
<dd>Either details of the created Specimen as dictornary or OpenSpecimen's error message</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_specimen(self, params):

    &#34;&#34;&#34;Creates a Specimen
    
    Creates a Specimen. In order to use this function one has to know
    the parameters which OpenSpecimen needs to create a Specimen. One can use it via the os_util class
    specimen_util.py. This allows just the basic definition, if one has Extensions 
    e.g. BBMRI contact, this fields has to be added separatly. 
    
    Parameters
    ----------
    params : string
        JSON formatted string with parameters: label[mandatory if its created manually, leave empty if the System creates it
        automatically], specimenclass, type, pathology, atomicSite, laterality, initialQty, availableQty, lineage,
        visitId,  status, storageLocation(dict with keys positionX[optional], 
        positionY[optional])[optional], concetration[optional], biohazards[optional], comments[optional],
        collectionEvent(DICT with keys user,time, container[otpional], procedure[optional]),
        receivedEvent(DICT with keys user, time, receivedQuality), extensionDetails(DICT with keys useUdn, attrsmap,
        DICT with extension keys)[optional]
        
    Returns
    -------
    json-dict
        Either details of the created Specimen as dictornary or OpenSpecimen&#39;s error message
    &#34;&#34;&#34;
    
    url = self.base_url 
    payload = params
    r = self.OS_request_gen.post_request(url, data=payload)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.specimen.specimen.delete_specimen"><code class="name flex">
<span>def <span class="ident">delete_specimen</span></span>(<span>self, specimenids)</span>
</code></dt>
<dd>
<div class="desc"><p>Delete a Specimen/Derivative/Aliquot</p>
<p>Delete an already existing Specimen/Derivative/Aliquot. The parameter ::specimenid:: is the uniqe ID of the Specimen/
Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the
Specimen/Derivative/Aliquot and read it from the URL, with format:
http(s)://<host>:<port>/openspecimen/cp-view/{cpid}/specimen/{specimenid}/&hellip; .
An other possibility is to search via 'search_specimens' for a specific parameter and then extract the ID
from the JSON-dict which get returned. The function allows also to delete a list of specimen</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>specimenids</code></strong> :&ensp;<code>string </code></dt>
<dd>The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itselfs.
Deleting specimens has the form "?id=specimenid_1+&hellip;+specimenid_n"</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the Specimens which is deleted or the OpenSpecimen error message as dict.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_specimen(self, specimenids):
    
    &#34;&#34;&#34;Delete a Specimen/Derivative/Aliquot
    
    Delete an already existing Specimen/Derivative/Aliquot. The parameter ::specimenid:: is the uniqe ID of the Specimen/
    Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the 
    Specimen/Derivative/Aliquot and read it from the URL, with format:
    http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpid}/specimen/{specimenid}/... .
    An other possibility is to search via &#39;search_specimens&#39; for a specific parameter and then extract the ID
    from the JSON-dict which get returned. The function allows also to delete a list of specimen
    
    Parameters
    ----------
    specimenids: string 
        The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itselfs. 
        Deleting specimens has the form &#34;?id=specimenid_1+...+specimenid_n&#34;
        
    Returns
    -------
    JSON-dict
        Details of the Specimens which is deleted or the OpenSpecimen error message as dict.
    &#34;&#34;&#34;

    url = self.base_url + specimenids
    r = self.OS_request_gen.delete_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.specimen.specimen.get_specimen"><code class="name flex">
<span>def <span class="ident">get_specimen</span></span>(<span>self, specimenid)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the Specimen with the ID ::specimenid::</p>
<p>Get the details of the Specimen with the unique ID ::cspecimenid::.
This ID is generated automatically from OpenSpecimen when the Specimen is created.
It can be seen in the GUI by clicking on the desired Specimen, and read from the URL:
http(s)://<host>:<port>/openspecimen/cps/{cpid}/specimens/{specimenid}/&hellip; .
Or via search Specimen, for example by name and then extract the ID via key ["id"].</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>specimenid</code></strong> :&ensp;<code>string</code> or <code>int</code></dt>
<dd>The System's ID of the Specimen, will be converted to a string.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the Specimen with the specified ID, or the OpenSpecimen error message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_specimen(self, specimenid):
    
    &#34;&#34;&#34;Get the Specimen with the ID ::specimenid::
    
    Get the details of the Specimen with the unique ID ::cspecimenid::.
    This ID is generated automatically from OpenSpecimen when the Specimen is created.
    It can be seen in the GUI by clicking on the desired Specimen, and read from the URL:
    http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimens/{specimenid}/... .
    Or via search Specimen, for example by name and then extract the ID via key [&#34;id&#34;].
    
    Parameters
    ----------
    specimenid : string or int
        The System&#39;s ID of the Specimen, will be converted to a string.
    Returns
    -------
    JSON-dict
        Details of the Specimen with the specified ID, or the OpenSpecimen error message.
    &#34;&#34;&#34;

    endpoint = &#39;/&#39; + str(specimenid)
    url = self.base_url + endpoint
    r = self.OS_request_gen.get_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.specimen.specimen.search_specimens"><code class="name flex">
<span>def <span class="ident">search_specimens</span></span>(<span>self, search_string)</span>
</code></dt>
<dd>
<div class="desc"><p>Search for
Specimen with specific values.</p>
<p>Search for one or more Specimens with the values in the search_string defined. The search string looks like:
http(s)://<host>:<port>/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;&hellip;&amp;{param_x}={value_x}
With the class specimen_util from os_util and function ::search_specimens:: the search string is generated
and this function is called. Not all keys from OpenSpecimen can be easily searched after.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>search_string</code></strong> :&ensp;<code>string</code></dt>
<dd>String with the following format: ?{param_1}={value_1}&amp;&hellip;&amp;{param_x}={value_x} . The parameters can be one of the following:
label[optional], cprId[optional], eventId[optional], visitId[optional]</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Details of the matching Specimens, if no one matches it is an empty list.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def search_specimens(self, search_string):
    
    &#34;&#34;&#34;Search for  Specimen with specific values.
    
    Search for one or more Specimens with the values in the search_string defined. The search string looks like:
    http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;...&amp;{param_x}={value_x}
    With the class specimen_util from os_util and function ::search_specimens:: the search string is generated
    and this function is called. Not all keys from OpenSpecimen can be easily searched after.
    
    Parameters
    ----------
    search_string : string
        String with the following format: ?{param_1}={value_1}&amp;...&amp;{param_x}={value_x} . The parameters can be one of the following:
        label[optional], cprId[optional], eventId[optional], visitId[optional]
    Returns
    -------
    dict
        Details of the matching Specimens, if no one matches it is an empty list.
    &#34;&#34;&#34;
    
    endpoint = str(search_string)
    url = self.base_url + endpoint
    r = self.OS_request_gen.get_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.specimen.specimen.update_specimen"><code class="name flex">
<span>def <span class="ident">update_specimen</span></span>(<span>self, specimenid, updateparams)</span>
</code></dt>
<dd>
<div class="desc"><p>Updates a existing Specimen/Aliquot/Derivative</p>
<p>Updates a existing Specimen/Derivative/Aliquot with the automatically generated OpsenSpecimen's system wide
unique Specimen ID ::specimenid::, with the Parameters ::updateparams:: which are passed to the function.
The ID of the Specimen have to be known and can for example be seen in the GUI by clicking on
theSpecimen, which has the format http(s)://<host>:<port>/openspecimen/cps/{cpid}/specimen/{specimenid} .
Or via the function search_specimens and extract from there with the key ["id"]</p>
<h2 id="note">Note</h2>
<p>The optional parameters are those, which are optional for a Specimens. For updating all parameters are optional,
does which are not passed to the function will stay the same as before.</p>
<h2 id="parameter">Parameter</h2>
<p>cpid : strinf or int
Unique Collection Protocol ID which is generated automatically from the System. It will be converted to a string.</p>
<p>params : string
JSON formatted string with parameters: label[mandatory if its created manually, leave empty if the System creates it
automatically], specimenclass, type, pathology, atomicSite, laterality, initialQty, availableQty, lineage,
visitId, parentId[mandatory if Aliquot/Derivative], status, storageLocation(dict with keys positionX[optional],
positionY[optional])[optional], concetration[optional],
biohazards[optional], comments[optional],
collectionEvent(DICT with keys user,time, container[otpional], procedure[optional]),
receivedEvent(DICT with keys user, time, receivedQuality), extensionDetails(DICT with keys useUdn, attrsmap,
DICT with extension keys)[optional]</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>JSON-dict with the details of the updated Colelction Protocol or the OpenSpecimen's error message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_specimen(self, specimenid, updateparams):
    
    &#34;&#34;&#34;Updates a existing Specimen/Aliquot/Derivative
    
    Updates a existing Specimen/Derivative/Aliquot with the automatically generated OpsenSpecimen&#39;s system wide
    unique Specimen ID ::specimenid::, with the Parameters ::updateparams:: which are passed to the function.
    The ID of the Specimen have to be known and can for example be seen in the GUI by clicking on 
    theSpecimen, which has the format http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimen/{specimenid} .
    Or via the function search_specimens and extract from there with the key [&#34;id&#34;]
    
    Note
    ----
    The optional parameters are those, which are optional for a Specimens. For updating all parameters are optional,
    does which are not passed to the function will stay the same as before.
    
    Parameter
    ---------
    cpid : strinf or int
        Unique Collection Protocol ID which is generated automatically from the System. It will be converted to a string.
    
    params : string
        JSON formatted string with parameters: label[mandatory if its created manually, leave empty if the System creates it
        automatically], specimenclass, type, pathology, atomicSite, laterality, initialQty, availableQty, lineage,
        visitId, parentId[mandatory if Aliquot/Derivative], status, storageLocation(dict with keys positionX[optional],
        positionY[optional])[optional], concetration[optional],         biohazards[optional], comments[optional],
        collectionEvent(DICT with keys user,time, container[otpional], procedure[optional]),
        receivedEvent(DICT with keys user, time, receivedQuality), extensionDetails(DICT with keys useUdn, attrsmap,
        DICT with extension keys)[optional]
        
    Returns
    -------
    JSON-dict
        JSON-dict with the details of the updated Colelction Protocol or the OpenSpecimen&#39;s error message.
    &#34;&#34;&#34;

    endpoint = &#39;/&#39;+str(specimenid)
    url = self.base_url + endpoint
    data = updateparams
    r = self.OS_request_gen.put_request(url, data)
    
    return json.loads(r.text)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="OpenSpecimenAPIconnector.os_core" href="index.html">OpenSpecimenAPIconnector.os_core</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="OpenSpecimenAPIconnector.os_core.specimen.specimen" href="#OpenSpecimenAPIconnector.os_core.specimen.specimen">specimen</a></code></h4>
<ul class="two-column">
<li><code><a title="OpenSpecimenAPIconnector.os_core.specimen.specimen.ausgabe" href="#OpenSpecimenAPIconnector.os_core.specimen.specimen.ausgabe">ausgabe</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.specimen.specimen.check_specimen" href="#OpenSpecimenAPIconnector.os_core.specimen.specimen.check_specimen">check_specimen</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.specimen.specimen.create_specimen" href="#OpenSpecimenAPIconnector.os_core.specimen.specimen.create_specimen">create_specimen</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.specimen.specimen.delete_specimen" href="#OpenSpecimenAPIconnector.os_core.specimen.specimen.delete_specimen">delete_specimen</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.specimen.specimen.get_specimen" href="#OpenSpecimenAPIconnector.os_core.specimen.specimen.get_specimen">get_specimen</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.specimen.specimen.search_specimens" href="#OpenSpecimenAPIconnector.os_core.specimen.specimen.search_specimens">search_specimens</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.specimen.specimen.update_specimen" href="#OpenSpecimenAPIconnector.os_core.specimen.specimen.update_specimen">update_specimen</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>