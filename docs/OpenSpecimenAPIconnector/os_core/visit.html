<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>OpenSpecimenAPIconnector.os_core.visit API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>OpenSpecimenAPIconnector.os_core.visit</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#! /bin/python3

# Import
import json
from datetime import datetime
from .. import config_manager

from .req_util import OS_request_gen

class visit:

    &#34;&#34;&#34;Handles the API calls for Visits
    
    This class handles the API calls for OpenSpecimen visits. It can create, delete, 
    search visits with different parameters. Further visits can be added to a collection protocol within the system.
    The outputs are JSON dicts or the error messages as dict.
    
    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
    just pass the parameters via a JSON-formatted string. This means the user has to know the keywords.
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.
    
    Example
    -------
    A code example, where the visits are handled, is in the Jupyter-Notebook::
        $ jupyter notebook main.ipynb
    &#34;&#34;&#34;

    def __init__(self):

        &#34;&#34;&#34;Constructor of the Class visit
        
        Constructor of the class visit, can handle the basic API-calls
        of the visits in OpenSpecimen. Connects this class to OpenSpecimen
        specific request handle (os_core.request_util.py).
        
        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consists of two strings ( loginname , password)
        &#34;&#34;&#34; 
        self.base_url = config_manager.get_url()
        self.auth = config_manager.get_auth()
        self.OS_request_gen = OS_request_gen(self.auth)

    def ausgabe(self):

        &#34;&#34;&#34;Testing of the URL and authentification.
        
        If there are any unexpected errors, one can easily test if the URL and login data is spelled correctly.
        The function prints the URL and login data  to the output terminal, which was handed over to the class.
        &#34;&#34;&#34;

        print(self.base_url, self.OS_request_gen.auth)        


    def add_visit(self, params):

        &#34;&#34;&#34;Add a visit to a Participant.
        
        Add a visit to a participant in OpenSpecimen via API call. To use this function, one has to know the
        parameters of the participant, event and site.

        Note
        ----
        Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle)
        - name, site

        Parameters
        ----------
        params : string
            JSON formatted string with parameters: cprId, eventId, eventLabel, ppid, cptitle, cpShorttitle, name,
            clinicalDiagnoses[optional], clinicalStatus[optional], activityStatus [optional], site, status(permissable
            values: COMPLETE, PENDING, MISSED), missedReason[optional], missedBy[optional], comments[optional],
            surgicalPathologyNumber[optional], cohort[optional], visitDate[optional]
        
        Returns
        -------
        dict
            Details of the visit as JSON dict or the Openspecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/visits&#39;
        url = self.base_url + endpoint
        payload = params
        r = self.OS_request_gen.post_request(url, data=payload)

        return json.loads(r.text)


    def add_visit_specimen(self, params):

        &#34;&#34;&#34;Generate a visit and corresponding specimens

        Create a visit and specimens in one call. To use this function one has to know the parameters
        of the participants and events. Or one can use the create_visit_specimens function from the os_util
        class visit_util. 

        Note
        ----
        The visit fields can be seen in add_visit and the ones for specimens are in create specimen.

        Parameters
        ----------
        params : string
            JSON formatted string with parameters visit (dict-like string with details of the visit),
            specimens(dict-like string with details of the specimens)

        Returns
        -------
        dict
            JSON dict with the details of the created visit and specimens or OpenSpecimen&#39;s error message
        &#34;&#34;&#34;

        endpoint = &#39;/visits/collect&#39;
        url = self.base_url + endpoint
        payload = params
        r = self.OS_request_gen.post_request(url, data=payload)

        return json.loads(r.text)



    def delete_visit(self, visitid):

        &#34;&#34;&#34;Delete a Visit from OpenSpecimen

        Delete an existing visit in OpenSpecimen with the Visit ID visitid. This has to be known and can
        be found out in the GUI by clicking on a participant and the visit. It looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
        Or via the function get_visit_namespr, when one knows the name of the visit and then extract the ID from there.

        Parameters
        ----------
        visitid : int
            ID of the visit, gets converted to a string.

        Returns
        -------
        dict
            JSON-dict with the details of the deleted visit or the OpenSpecimen&#39;s error message
        &#34;&#34;&#34;

        endpoint = &#39;/visits/&#39; + str(visitid)
        url = self.base_url + endpoint

        r = self.OS_request_gen.delete_request(url)

        return json.loads(r.text)


    def get_visit(self, visitid):

        &#34;&#34;&#34;Get a Visit from OpenSpecimen

        Get an existing visit in OpenSpecimen with the Visit ID visitid. This has to be known and can
        be found out in the GUI by clicking on a participant and the visit. It looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
        Or via the function get_visit_namespr, when one knows the name of the visit and then extract the id from there.

        Parameters
        ----------
        visitid : int
            ID of the visit, gets converted to a string.

        Returns
        -------
        dict
            JSON-dict with the details of the visit with ID visitid or the OpenSpecimen&#39;s error message
        &#34;&#34;&#34;
        endpoint = &#39;/visits/&#39; + str(visitid)
        url = self.base_url + endpoint

        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)


    def get_visit_namespr(self, search_string):

        &#34;&#34;&#34;Get a Visit by the Name or the Surgical Pathology Number

        Get one or more visits by name or surgical pathology number. Parameters have to be known in advance 
        in order to use this function. If just the visitname is passed, one returns a visit with the corresponding name.
        If just the surgical pathology number is passed, it returns all visits attached to this number. If both are passed,
        it works as logical AND.

        Parameters
        ----------
        search_string : string
            string in the format &#39;?name=visitname(optional)&amp;sprNumer=sprnumber(optional)
        
        Returns
        -------
        dict
            JSON-dict with details of the visits.
        &#34;&#34;&#34;

        endpoint = &#39;/visits/bynamespr&#39;+ str(search_string)
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)


    def get_visits_cpr(self, search_string):

        &#34;&#34;&#34;Get a Visit by the Collection Protocol Registration ID.

        Get a visit by the collection protocoll registration ID. Parameters have to be known in advance 
        in order to use this function. They can be extracted from calling a search function in the 
        os_core class visits.

        Parameters
        ----------
        search_string : string
            string in the format &#39;?cprId=cprid&amp;includeStats=true/false(optional)&#39;
        
        Returns
        -------
        dict
            JSON-dict with details of the visit.
        &#34;&#34;&#34;
        
        endpoint = &#39;/visits&#39; + str(search_string)
        url= self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)

        
    def update_visit(self, visitid, params):

        &#34;&#34;&#34;Updating a visit

        Update an existing visit with ID visitid and the parameters params. All parameters are
        optional for updating and those which are not passed, stay the same. Those parameters and 
        the visit ID have to be known to use this function and can
        be found out in the GUI by clicking on a participant and the visit. It looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
        Or via the function get_visit_namespr, when one knows the name of the visit and then extract the ID from there.

        Note
        ----
        Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle),
        - name, -site

        Parameters
        ----------
        visitid : int
            ID of the visit as int or string, gets converted to a string
        
        params : string
            JSON- formatted string with parameters: cprId, eventId, eventLabel, eventPoint[optional], ppid, cptitle, cpShorttitle, name,
            clinicalDiagnoses[optional], clinicalStatus[optional], activityStatus [optional], site, status(permissable
            values: COMPLETE, PENDING, MISSED), missedReason[optional], missedBy[optional], comments[optional],
            surgicalPathologyNumber[optional], cohort[optional], visitDate[optional]

        Returns
        -------
        dict
            JSON-dict with details of the updated visit or OpenSpecimens error message 
        &#34;&#34;&#34;

        endpoint = &#39;/visits/&#39; + str(visitid)
        url = self.base_url +endpoint
        payload = params
        r = self.OS_request_gen.put_request(url, payload)

        return json.loads(r.text)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit"><code class="flex name class">
<span>class <span class="ident">visit</span></span>
</code></dt>
<dd>
<div class="desc"><p>Handles the API calls for Visits</p>
<p>This class handles the API calls for OpenSpecimen visits. It can create, delete,
search visits with different parameters. Further visits can be added to a collection protocol within the system.
The outputs are JSON dicts or the error messages as dict.</p>
<h2 id="notes">Notes</h2>
<p>In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
just pass the parameters via a JSON-formatted string. This means the user has to know the keywords.
The API calls are documented in <a href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
<h2 id="example">Example</h2>
<p>A code example, where the visits are handled, is in the Jupyter-Notebook::
$ jupyter notebook main.ipynb</p>
<p>Constructor of the Class visit</p>
<p>Constructor of the class visit, can handle the basic API-calls
of the visits in OpenSpecimen. Connects this class to OpenSpecimen
specific request handle (os_core.request_util.py).</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>base_url</code></strong> :&ensp;<code>string</code></dt>
<dd>URL to openspecimen, has the format: http(s)://<host>:<port>/openspecimen/rest/ng</dd>
<dt><strong><code>auth</code></strong> :&ensp;<code>tuple</code></dt>
<dd>Consists of two strings ( loginname , password)</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class visit:

    &#34;&#34;&#34;Handles the API calls for Visits
    
    This class handles the API calls for OpenSpecimen visits. It can create, delete, 
    search visits with different parameters. Further visits can be added to a collection protocol within the system.
    The outputs are JSON dicts or the error messages as dict.
    
    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
    just pass the parameters via a JSON-formatted string. This means the user has to know the keywords.
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.
    
    Example
    -------
    A code example, where the visits are handled, is in the Jupyter-Notebook::
        $ jupyter notebook main.ipynb
    &#34;&#34;&#34;

    def __init__(self):

        &#34;&#34;&#34;Constructor of the Class visit
        
        Constructor of the class visit, can handle the basic API-calls
        of the visits in OpenSpecimen. Connects this class to OpenSpecimen
        specific request handle (os_core.request_util.py).
        
        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consists of two strings ( loginname , password)
        &#34;&#34;&#34; 
        self.base_url = config_manager.get_url()
        self.auth = config_manager.get_auth()
        self.OS_request_gen = OS_request_gen(self.auth)

    def ausgabe(self):

        &#34;&#34;&#34;Testing of the URL and authentification.
        
        If there are any unexpected errors, one can easily test if the URL and login data is spelled correctly.
        The function prints the URL and login data  to the output terminal, which was handed over to the class.
        &#34;&#34;&#34;

        print(self.base_url, self.OS_request_gen.auth)        


    def add_visit(self, params):

        &#34;&#34;&#34;Add a visit to a Participant.
        
        Add a visit to a participant in OpenSpecimen via API call. To use this function, one has to know the
        parameters of the participant, event and site.

        Note
        ----
        Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle)
        - name, site

        Parameters
        ----------
        params : string
            JSON formatted string with parameters: cprId, eventId, eventLabel, ppid, cptitle, cpShorttitle, name,
            clinicalDiagnoses[optional], clinicalStatus[optional], activityStatus [optional], site, status(permissable
            values: COMPLETE, PENDING, MISSED), missedReason[optional], missedBy[optional], comments[optional],
            surgicalPathologyNumber[optional], cohort[optional], visitDate[optional]
        
        Returns
        -------
        dict
            Details of the visit as JSON dict or the Openspecimen&#39;s error message.
        &#34;&#34;&#34;

        endpoint = &#39;/visits&#39;
        url = self.base_url + endpoint
        payload = params
        r = self.OS_request_gen.post_request(url, data=payload)

        return json.loads(r.text)


    def add_visit_specimen(self, params):

        &#34;&#34;&#34;Generate a visit and corresponding specimens

        Create a visit and specimens in one call. To use this function one has to know the parameters
        of the participants and events. Or one can use the create_visit_specimens function from the os_util
        class visit_util. 

        Note
        ----
        The visit fields can be seen in add_visit and the ones for specimens are in create specimen.

        Parameters
        ----------
        params : string
            JSON formatted string with parameters visit (dict-like string with details of the visit),
            specimens(dict-like string with details of the specimens)

        Returns
        -------
        dict
            JSON dict with the details of the created visit and specimens or OpenSpecimen&#39;s error message
        &#34;&#34;&#34;

        endpoint = &#39;/visits/collect&#39;
        url = self.base_url + endpoint
        payload = params
        r = self.OS_request_gen.post_request(url, data=payload)

        return json.loads(r.text)



    def delete_visit(self, visitid):

        &#34;&#34;&#34;Delete a Visit from OpenSpecimen

        Delete an existing visit in OpenSpecimen with the Visit ID visitid. This has to be known and can
        be found out in the GUI by clicking on a participant and the visit. It looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
        Or via the function get_visit_namespr, when one knows the name of the visit and then extract the ID from there.

        Parameters
        ----------
        visitid : int
            ID of the visit, gets converted to a string.

        Returns
        -------
        dict
            JSON-dict with the details of the deleted visit or the OpenSpecimen&#39;s error message
        &#34;&#34;&#34;

        endpoint = &#39;/visits/&#39; + str(visitid)
        url = self.base_url + endpoint

        r = self.OS_request_gen.delete_request(url)

        return json.loads(r.text)


    def get_visit(self, visitid):

        &#34;&#34;&#34;Get a Visit from OpenSpecimen

        Get an existing visit in OpenSpecimen with the Visit ID visitid. This has to be known and can
        be found out in the GUI by clicking on a participant and the visit. It looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
        Or via the function get_visit_namespr, when one knows the name of the visit and then extract the id from there.

        Parameters
        ----------
        visitid : int
            ID of the visit, gets converted to a string.

        Returns
        -------
        dict
            JSON-dict with the details of the visit with ID visitid or the OpenSpecimen&#39;s error message
        &#34;&#34;&#34;
        endpoint = &#39;/visits/&#39; + str(visitid)
        url = self.base_url + endpoint

        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)


    def get_visit_namespr(self, search_string):

        &#34;&#34;&#34;Get a Visit by the Name or the Surgical Pathology Number

        Get one or more visits by name or surgical pathology number. Parameters have to be known in advance 
        in order to use this function. If just the visitname is passed, one returns a visit with the corresponding name.
        If just the surgical pathology number is passed, it returns all visits attached to this number. If both are passed,
        it works as logical AND.

        Parameters
        ----------
        search_string : string
            string in the format &#39;?name=visitname(optional)&amp;sprNumer=sprnumber(optional)
        
        Returns
        -------
        dict
            JSON-dict with details of the visits.
        &#34;&#34;&#34;

        endpoint = &#39;/visits/bynamespr&#39;+ str(search_string)
        url = self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)


    def get_visits_cpr(self, search_string):

        &#34;&#34;&#34;Get a Visit by the Collection Protocol Registration ID.

        Get a visit by the collection protocoll registration ID. Parameters have to be known in advance 
        in order to use this function. They can be extracted from calling a search function in the 
        os_core class visits.

        Parameters
        ----------
        search_string : string
            string in the format &#39;?cprId=cprid&amp;includeStats=true/false(optional)&#39;
        
        Returns
        -------
        dict
            JSON-dict with details of the visit.
        &#34;&#34;&#34;
        
        endpoint = &#39;/visits&#39; + str(search_string)
        url= self.base_url + endpoint
        r = self.OS_request_gen.get_request(url)

        return json.loads(r.text)

        
    def update_visit(self, visitid, params):

        &#34;&#34;&#34;Updating a visit

        Update an existing visit with ID visitid and the parameters params. All parameters are
        optional for updating and those which are not passed, stay the same. Those parameters and 
        the visit ID have to be known to use this function and can
        be found out in the GUI by clicking on a participant and the visit. It looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
        Or via the function get_visit_namespr, when one knows the name of the visit and then extract the ID from there.

        Note
        ----
        Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle),
        - name, -site

        Parameters
        ----------
        visitid : int
            ID of the visit as int or string, gets converted to a string
        
        params : string
            JSON- formatted string with parameters: cprId, eventId, eventLabel, eventPoint[optional], ppid, cptitle, cpShorttitle, name,
            clinicalDiagnoses[optional], clinicalStatus[optional], activityStatus [optional], site, status(permissable
            values: COMPLETE, PENDING, MISSED), missedReason[optional], missedBy[optional], comments[optional],
            surgicalPathologyNumber[optional], cohort[optional], visitDate[optional]

        Returns
        -------
        dict
            JSON-dict with details of the updated visit or OpenSpecimens error message 
        &#34;&#34;&#34;

        endpoint = &#39;/visits/&#39; + str(visitid)
        url = self.base_url +endpoint
        payload = params
        r = self.OS_request_gen.put_request(url, payload)

        return json.loads(r.text)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit.add_visit"><code class="name flex">
<span>def <span class="ident">add_visit</span></span>(<span>self, params)</span>
</code></dt>
<dd>
<div class="desc"><p>Add a visit to a Participant.</p>
<p>Add a visit to a participant in OpenSpecimen via API call. To use this function, one has to know the
parameters of the participant, event and site.</p>
<h2 id="note">Note</h2>
<p>Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle)
- name, site</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>params</code></strong> :&ensp;<code>string</code></dt>
<dd>JSON formatted string with parameters: cprId, eventId, eventLabel, ppid, cptitle, cpShorttitle, name,
clinicalDiagnoses[optional], clinicalStatus[optional], activityStatus [optional], site, status(permissable
values: COMPLETE, PENDING, MISSED), missedReason[optional], missedBy[optional], comments[optional],
surgicalPathologyNumber[optional], cohort[optional], visitDate[optional]</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Details of the visit as JSON dict or the Openspecimen's error message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_visit(self, params):

    &#34;&#34;&#34;Add a visit to a Participant.
    
    Add a visit to a participant in OpenSpecimen via API call. To use this function, one has to know the
    parameters of the participant, event and site.

    Note
    ----
    Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle)
    - name, site

    Parameters
    ----------
    params : string
        JSON formatted string with parameters: cprId, eventId, eventLabel, ppid, cptitle, cpShorttitle, name,
        clinicalDiagnoses[optional], clinicalStatus[optional], activityStatus [optional], site, status(permissable
        values: COMPLETE, PENDING, MISSED), missedReason[optional], missedBy[optional], comments[optional],
        surgicalPathologyNumber[optional], cohort[optional], visitDate[optional]
    
    Returns
    -------
    dict
        Details of the visit as JSON dict or the Openspecimen&#39;s error message.
    &#34;&#34;&#34;

    endpoint = &#39;/visits&#39;
    url = self.base_url + endpoint
    payload = params
    r = self.OS_request_gen.post_request(url, data=payload)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit.add_visit_specimen"><code class="name flex">
<span>def <span class="ident">add_visit_specimen</span></span>(<span>self, params)</span>
</code></dt>
<dd>
<div class="desc"><p>Generate a visit and corresponding specimens</p>
<p>Create a visit and specimens in one call. To use this function one has to know the parameters
of the participants and events. Or one can use the create_visit_specimens function from the os_util
class visit_util. </p>
<h2 id="note">Note</h2>
<p>The visit fields can be seen in add_visit and the ones for specimens are in create specimen.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>params</code></strong> :&ensp;<code>string</code></dt>
<dd>JSON formatted string with parameters visit (dict-like string with details of the visit),
specimens(dict-like string with details of the specimens)</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>JSON dict with the details of the created visit and specimens or OpenSpecimen's error message</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_visit_specimen(self, params):

    &#34;&#34;&#34;Generate a visit and corresponding specimens

    Create a visit and specimens in one call. To use this function one has to know the parameters
    of the participants and events. Or one can use the create_visit_specimens function from the os_util
    class visit_util. 

    Note
    ----
    The visit fields can be seen in add_visit and the ones for specimens are in create specimen.

    Parameters
    ----------
    params : string
        JSON formatted string with parameters visit (dict-like string with details of the visit),
        specimens(dict-like string with details of the specimens)

    Returns
    -------
    dict
        JSON dict with the details of the created visit and specimens or OpenSpecimen&#39;s error message
    &#34;&#34;&#34;

    endpoint = &#39;/visits/collect&#39;
    url = self.base_url + endpoint
    payload = params
    r = self.OS_request_gen.post_request(url, data=payload)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit.ausgabe"><code class="name flex">
<span>def <span class="ident">ausgabe</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Testing of the URL and authentification.</p>
<p>If there are any unexpected errors, one can easily test if the URL and login data is spelled correctly.
The function prints the URL and login data
to the output terminal, which was handed over to the class.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def ausgabe(self):

    &#34;&#34;&#34;Testing of the URL and authentification.
    
    If there are any unexpected errors, one can easily test if the URL and login data is spelled correctly.
    The function prints the URL and login data  to the output terminal, which was handed over to the class.
    &#34;&#34;&#34;

    print(self.base_url, self.OS_request_gen.auth)        </code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit.delete_visit"><code class="name flex">
<span>def <span class="ident">delete_visit</span></span>(<span>self, visitid)</span>
</code></dt>
<dd>
<div class="desc"><p>Delete a Visit from OpenSpecimen</p>
<p>Delete an existing visit in OpenSpecimen with the Visit ID visitid. This has to be known and can
be found out in the GUI by clicking on a participant and the visit. It looks like:
http(s)://<host>:<port>/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
Or via the function get_visit_namespr, when one knows the name of the visit and then extract the ID from there.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>visitid</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the visit, gets converted to a string.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>JSON-dict with the details of the deleted visit or the OpenSpecimen's error message</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_visit(self, visitid):

    &#34;&#34;&#34;Delete a Visit from OpenSpecimen

    Delete an existing visit in OpenSpecimen with the Visit ID visitid. This has to be known and can
    be found out in the GUI by clicking on a participant and the visit. It looks like:
    http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
    Or via the function get_visit_namespr, when one knows the name of the visit and then extract the ID from there.

    Parameters
    ----------
    visitid : int
        ID of the visit, gets converted to a string.

    Returns
    -------
    dict
        JSON-dict with the details of the deleted visit or the OpenSpecimen&#39;s error message
    &#34;&#34;&#34;

    endpoint = &#39;/visits/&#39; + str(visitid)
    url = self.base_url + endpoint

    r = self.OS_request_gen.delete_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit.get_visit"><code class="name flex">
<span>def <span class="ident">get_visit</span></span>(<span>self, visitid)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a Visit from OpenSpecimen</p>
<p>Get an existing visit in OpenSpecimen with the Visit ID visitid. This has to be known and can
be found out in the GUI by clicking on a participant and the visit. It looks like:
http(s)://<host>:<port>/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
Or via the function get_visit_namespr, when one knows the name of the visit and then extract the id from there.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>visitid</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the visit, gets converted to a string.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>JSON-dict with the details of the visit with ID visitid or the OpenSpecimen's error message</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_visit(self, visitid):

    &#34;&#34;&#34;Get a Visit from OpenSpecimen

    Get an existing visit in OpenSpecimen with the Visit ID visitid. This has to be known and can
    be found out in the GUI by clicking on a participant and the visit. It looks like:
    http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
    Or via the function get_visit_namespr, when one knows the name of the visit and then extract the id from there.

    Parameters
    ----------
    visitid : int
        ID of the visit, gets converted to a string.

    Returns
    -------
    dict
        JSON-dict with the details of the visit with ID visitid or the OpenSpecimen&#39;s error message
    &#34;&#34;&#34;
    endpoint = &#39;/visits/&#39; + str(visitid)
    url = self.base_url + endpoint

    r = self.OS_request_gen.get_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit.get_visit_namespr"><code class="name flex">
<span>def <span class="ident">get_visit_namespr</span></span>(<span>self, search_string)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a Visit by the Name or the Surgical Pathology Number</p>
<p>Get one or more visits by name or surgical pathology number. Parameters have to be known in advance
in order to use this function. If just the visitname is passed, one returns a visit with the corresponding name.
If just the surgical pathology number is passed, it returns all visits attached to this number. If both are passed,
it works as logical AND.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>search_string</code></strong> :&ensp;<code>string</code></dt>
<dd>string in the format '?name=visitname(optional)&amp;sprNumer=sprnumber(optional)</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>JSON-dict with details of the visits.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_visit_namespr(self, search_string):

    &#34;&#34;&#34;Get a Visit by the Name or the Surgical Pathology Number

    Get one or more visits by name or surgical pathology number. Parameters have to be known in advance 
    in order to use this function. If just the visitname is passed, one returns a visit with the corresponding name.
    If just the surgical pathology number is passed, it returns all visits attached to this number. If both are passed,
    it works as logical AND.

    Parameters
    ----------
    search_string : string
        string in the format &#39;?name=visitname(optional)&amp;sprNumer=sprnumber(optional)
    
    Returns
    -------
    dict
        JSON-dict with details of the visits.
    &#34;&#34;&#34;

    endpoint = &#39;/visits/bynamespr&#39;+ str(search_string)
    url = self.base_url + endpoint
    r = self.OS_request_gen.get_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit.get_visits_cpr"><code class="name flex">
<span>def <span class="ident">get_visits_cpr</span></span>(<span>self, search_string)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a Visit by the Collection Protocol Registration ID.</p>
<p>Get a visit by the collection protocoll registration ID. Parameters have to be known in advance
in order to use this function. They can be extracted from calling a search function in the
os_core class visits.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>search_string</code></strong> :&ensp;<code>string</code></dt>
<dd>string in the format '?cprId=cprid&amp;includeStats=true/false(optional)'</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>JSON-dict with details of the visit.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_visits_cpr(self, search_string):

    &#34;&#34;&#34;Get a Visit by the Collection Protocol Registration ID.

    Get a visit by the collection protocoll registration ID. Parameters have to be known in advance 
    in order to use this function. They can be extracted from calling a search function in the 
    os_core class visits.

    Parameters
    ----------
    search_string : string
        string in the format &#39;?cprId=cprid&amp;includeStats=true/false(optional)&#39;
    
    Returns
    -------
    dict
        JSON-dict with details of the visit.
    &#34;&#34;&#34;
    
    endpoint = &#39;/visits&#39; + str(search_string)
    url= self.base_url + endpoint
    r = self.OS_request_gen.get_request(url)

    return json.loads(r.text)</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_core.visit.visit.update_visit"><code class="name flex">
<span>def <span class="ident">update_visit</span></span>(<span>self, visitid, params)</span>
</code></dt>
<dd>
<div class="desc"><p>Updating a visit</p>
<p>Update an existing visit with ID visitid and the parameters params. All parameters are
optional for updating and those which are not passed, stay the same. Those parameters and
the visit ID have to be known to use this function and can
be found out in the GUI by clicking on a participant and the visit. It looks like:
http(s)://<host>:<port>/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
Or via the function get_visit_namespr, when one knows the name of the visit and then extract the ID from there.</p>
<h2 id="note">Note</h2>
<p>Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle),
- name, -site</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>visitid</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the visit as int or string, gets converted to a string</dd>
<dt><strong><code>params</code></strong> :&ensp;<code>string</code></dt>
<dd>JSON- formatted string with parameters: cprId, eventId, eventLabel, eventPoint[optional], ppid, cptitle, cpShorttitle, name,
clinicalDiagnoses[optional], clinicalStatus[optional], activityStatus [optional], site, status(permissable
values: COMPLETE, PENDING, MISSED), missedReason[optional], missedBy[optional], comments[optional],
surgicalPathologyNumber[optional], cohort[optional], visitDate[optional]</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>JSON-dict with details of the updated visit or OpenSpecimens error message</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_visit(self, visitid, params):

    &#34;&#34;&#34;Updating a visit

    Update an existing visit with ID visitid and the parameters params. All parameters are
    optional for updating and those which are not passed, stay the same. Those parameters and 
    the visit ID have to be known to use this function and can
    be found out in the GUI by clicking on a participant and the visit. It looks like:
    http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
    Or via the function get_visit_namespr, when one knows the name of the visit and then extract the ID from there.

    Note
    ----
    Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle),
    - name, -site

    Parameters
    ----------
    visitid : int
        ID of the visit as int or string, gets converted to a string
    
    params : string
        JSON- formatted string with parameters: cprId, eventId, eventLabel, eventPoint[optional], ppid, cptitle, cpShorttitle, name,
        clinicalDiagnoses[optional], clinicalStatus[optional], activityStatus [optional], site, status(permissable
        values: COMPLETE, PENDING, MISSED), missedReason[optional], missedBy[optional], comments[optional],
        surgicalPathologyNumber[optional], cohort[optional], visitDate[optional]

    Returns
    -------
    dict
        JSON-dict with details of the updated visit or OpenSpecimens error message 
    &#34;&#34;&#34;

    endpoint = &#39;/visits/&#39; + str(visitid)
    url = self.base_url +endpoint
    payload = params
    r = self.OS_request_gen.put_request(url, payload)

    return json.loads(r.text)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="OpenSpecimenAPIconnector.os_core" href="index.html">OpenSpecimenAPIconnector.os_core</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit" href="#OpenSpecimenAPIconnector.os_core.visit.visit">visit</a></code></h4>
<ul class="two-column">
<li><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit.add_visit" href="#OpenSpecimenAPIconnector.os_core.visit.visit.add_visit">add_visit</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit.add_visit_specimen" href="#OpenSpecimenAPIconnector.os_core.visit.visit.add_visit_specimen">add_visit_specimen</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit.ausgabe" href="#OpenSpecimenAPIconnector.os_core.visit.visit.ausgabe">ausgabe</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit.delete_visit" href="#OpenSpecimenAPIconnector.os_core.visit.visit.delete_visit">delete_visit</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit.get_visit" href="#OpenSpecimenAPIconnector.os_core.visit.visit.get_visit">get_visit</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit.get_visit_namespr" href="#OpenSpecimenAPIconnector.os_core.visit.visit.get_visit_namespr">get_visit_namespr</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit.get_visits_cpr" href="#OpenSpecimenAPIconnector.os_core.visit.visit.get_visits_cpr">get_visits_cpr</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_core.visit.visit.update_visit" href="#OpenSpecimenAPIconnector.os_core.visit.visit.update_visit">update_visit</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>