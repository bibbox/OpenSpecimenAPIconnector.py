<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>OpenSpecimenAPIconnector.os_util.specimen_util API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>OpenSpecimenAPIconnector.os_util.specimen_util</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#! /bin/python3

import pandas
import json
from datetime import date

from ..os_core.specimen import specimen
from ..os_core.url import url_gen
from ..os_core.jsons import Json_factory
from ..os_core.users import users



class specimen_util:

    &#34;&#34;&#34;Handles the calls for Specimens
    
    This class handles the API calls for OpenSpecimen Specimens. It can create, update, delete, 
    search specimens with different parameters. The other calls are in the os_core class specimens.
    The output is a JSON dict or the Error message as dict. It also can check if a
    specimen exists which returns a string which tells you if it exists.
    
    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. 
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.
    
    Example
    -------
    A code example, where the Specimens/Derivatives/Aliquots are handled is in the Jupyter-Notebook::
        $ jupyter notebook main.ipynb
    &#34;&#34;&#34;

    def __init__(self):

        &#34;&#34;&#34;Constructor of the Class specimens_util
        
        Constructor of the class specimen_util, can handle the basic API-calls
        of the specimensin OpenSpecimen. It also connects this class to the os_core classes
        specimen, url_gen and Json_factory.
        
        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consists of two strings ( loginname , password)
        &#34;&#34;&#34;

        self.specimen = specimen()
        self.url = url_gen()
        self.jsons = Json_factory()
        self.users = users()


    def search_specimens(self, label = None, cprid = None, eventid = None, visitid = None, maxres = &#34;100&#34;, exact = &#34;false&#34;, extension = &#34;true&#34;):

        &#34;&#34;&#34;Search for Specimen with specific values.
        
        Search for one or more Specimens with the values in the search_string defined. The search string looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;...&amp;{param_x}={value_x}
        
        
        Parameters
        ----------
        label : string
            Label of the specimen.

        cprid : int
            Collection Protocol Registration ID to what Participant the specimen belongs to.

        eventid : int
            Unique systemwide Identifier of the event.

        visitid : int
            Unique systemwide identifier of the visit.

        maxres : int
            Defines how many results are returned maximally.

        exact : string
            OpenSpecimen&#39;s boolean true/false. If true parameter have to match exactly.

        extension : string
            OpenSpecimen&#39;s boolean true/false. If true extension Details will get returned too.

        Returns
        -------
        dict
            Details of the matching Specimens, if no one matches it is an empty list.
        &#34;&#34;&#34;

        search_string = self.url.search_specimen(label = label, cprid = cprid, eventid = eventid, visitid = visitid,
                                             maxres = maxres, exact = exact, extension = extension)
        r = self.specimen.search_specimens(search_string = search_string)

        return r

    def create_specimen(self, specimenclass, specimentype , pathology , anatomic, laterality, initqty, avaqty, visitid, recqlt, userid, 
                        colltime = None, rectime = None, lineage = &#39;New&#39;, status = &#39;Collected&#39;, stor_name = None, storlocx = None,
                        storlocy = None, concetration = None, biohazard = None,  comments = None,  collproc=None, label = None,
                        conttype=None, extensionudn=None, extensionmap=None, extensiondict =None):

        &#34;&#34;&#34;Create a Specimen to a visit

        Create a Specimen to an already existing Visit. In order to use this function one has to know,
        the mandatory details of the specimen e.g. the class of the Specimen.
        
        Notes
        -----
        The label is mandatory if the Protocolsettings are such that the Label is created manually, otherwise
        it has to be left empty.

        Parameters
        ----------
        specimenclass : string
            Class of the specimen.
        
        specimentype : string
            Type of the specimen, belongs to the class.
        
        pathology : string
            Pathologystatus of the Specimen.

        anatomic : string
            The anatomic site of the specimen.
        
        laterality : string
            The laterality of the specimen.
        
        initqty : int
            The initial quantity of a specimen.
        
        avaqty : int
            The available quantity of a specimen.
        
        visitid : int
            The unique identifier of the visit.

        recqlt : string
            The received quality.
        
        label : string
            The Label of the specimen, if automatically generated it has to be left empty, or else it is mandatory.
            
        colltime : string
            Date and Time of the collection event, the format is in the OpenSpecimen&#39;s System configuration.[optional]
            
        rectime : string
            Date and Time of the received event, the format is in the OpenSpecimen&#39;s System configuration.[optional]
            
        lineage : string
            Lineage of the specimen, default value is New.
            
        status : string
            Status of the Specimen, default is &#39;Collected&#39;.
        
        stor_name : string
            Name of the container. [optional]
        
        storlocx : int
            Position of the specimen in the Container in x direction.[optional]

        storlocy : int
            Position of the specimen in the container in y direction.[optional]
            
        concetration  : int
            Concentration of the specimen[optional].
        
        biohazard : string
            Biohazards of that specimen.[optional]
        
        userid : int
            ID of the user who creates the specimen. If not specified the API user is taken.
            
        comments : string
            Comments regarding to the specimen[optional].
        
        collproc : string
            The procedure of the collection[otpional].

        conttype : string
            Type of the storage conatiner.
            
        extensionudn : string
            OpenSpecimen&#39;s boolean true/false. If true, the extension keys are the udn values of the corresponding form.[optional]
        
        extensionmap : string
            The name of the Form which should be taken.[optional]

        extensiondict : dict
            The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). [optional]

        Returns
        -------
        dict
            Dictionary with details of the specimen or the OpenSpecimen&#39;s error meessage.
        &#34;&#34;&#34;
               
        if rectime == None:
            rectime = date.today()
        
        if colltime == None:
            colltime = date.today()

        storloc = None
        if stor_name != None:
            storloc = self.jsons.storage_location_json(name = stor_name, xpos = storlocx, ypos = storlocy)

        extension =None
        if extensiondict != None:
            extension = self.jsons.create_extension(attrsmap = extensionmap, extensiondict = extensiondict, useudn = extensionudn)

        params = self.jsons.create_specimen_json(label = label, specimenclass = specimenclass, specimentype = specimentype, pathology =pathology,
                anatomic= anatomic, laterality = laterality, initqty = initqty, avaqty = avaqty, visitid = visitid, colltime = colltime,
                userid = userid, comments = comments, collproc = collproc, conttype = conttype, recqlt = recqlt, rectime = rectime,
                lineage = lineage, status = status, storloc = storloc, concentration = concetration, biohazard = biohazard,
                extension = extension)
        
        r = self.specimen.create_specimen(params = params)

        return r


    def update_specimen(self, specimenid, label = None, specimenclass = None, specimentype = None, pathology = None, anatomic = None, laterality = None,
                            initqty = None, avaqty = None, visitid = None, recqlt = None, colltime = None, rectime = None, lineage = &#39;New&#39;,
                            status = &#39;Collected&#39;, stor_name = None, storlocx = None, storlocy = None, concetration = None, biohazard = None,
                            userid = None, comments = None,  collproc=None, conttype=None, extensionudn=None, extensionmap=None, extensiondict =None):

        &#34;&#34;&#34;Update an existing Specimen

        Update an existing Specimen in order to use this function one has to know the specimenid. This can be seen via the GUI
        by clicking on the desired specimen, and read from the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimens/{specimenid}/... .
        Or via search Specimen, for example by name and then extract the ID via key [&#34;id&#34;].
        
        Notes
        -----
        The specimenid is mandatory, all the other keys are otional for updating. If left empty nothing will be changed.

        Parameters
        ----------
        specimenid : int
            Unique Id of the specimen.

        specimenclass : string
            Class of the specimen.
        
        specimentype : string
            Type of the specimen, belongs to the class.
        
        pathology : string
            Pathologystatus of the Specimen.

        anatomic : string
            The anatomic site of the specimen.
        
        laterality : string
            The laterality of the specimen.
        
        initqty : int
            The initial quantity of a specimen.
        
        avaqty : int
            The available quantity of a specimen.
        
        visitid : int
            The unique identifier of the visit.

        recqlt : string
            The received quality.
        
        label : string
            The Label of the specimen.
            
        colltime : string
            Date and Time of the collection event, the format is in the OpenSpecimen&#39;s System configuration.
            
        rectime : string
            Date and Time of the received event, the format is in the OpenSpecimen&#39;s System configuration.
            
        lineage : string
            Lineage of the specimen, default value is New.
            
        status : string
            Status of the Specimen, default is &#39;Collected&#39;.
        
        stor_name : string
            Name of the container. 
        
        storlocx : int
            Position of the specimen in the Container in x direction.

        storlocy : int
            Position of the specimen in the container in y direction.
            
        concetration  : int
            Concentration of the specimen.
        
        biohazard : string
            Biohazards of that specimen.
        
        userid : int
            ID of the user who creates the specimen. If not specified the API user is taken.
            
        comments : string
            Comments regarding to the specimen.
        
        collproc : string
            The procedure of the collection.

        conttype : string
            Type of the storage container.
            
        extensionudn : string
            OpenSpecimen&#39;s boolean true/false. If true the extension keys are the udn values of the corresponding form.
        
        extensionmap : string
            The name of the Form which should be taken.

        extensiondict : dict
            The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). 

        Returns
        -------
        dict
            Dictionary with details of the specimen or the OpenSpecimen&#39;s error meessage.
        &#34;&#34;&#34;

        storloc = None
        if stor_name != None:
            storloc = self.jsons.storage_location_json(name = stor_name, xpos = storlocx, ypos = storlocy)

        extension =None
        if extensiondict != None:
            extension = self.jsons.create_extension(attrsmap = extensionmap, extensiondict = extensiondict, useudn = extensionudn)

        params = self.jsons.create_specimen_json(label = label, specimenclass = specimenclass, specimentype = specimentype, pathology =pathology,
                anatomic= anatomic, laterality = laterality, initqty = initqty, avaqty = avaqty, visitid = visitid, colltime = colltime,
                userid = userid, comments = comments, collproc = collproc, conttype = conttype, recqlt = recqlt, rectime = rectime,
                lineage = lineage, status = status, storloc = storloc, concentration = concetration, biohazard = biohazard,
                extension = extension)
        
        r = self.specimen.update_specimen(specimenid = specimenid,params = params)

        return r

    def delete_specimens(self, specimenids):

        &#34;&#34;&#34;Delete a Specimen/Derivative/Aliquot
        
        Delete an already existing Specimen/Derivative/Aliquot. The parameter ::specimenid:: is the uniqe ID of the Specimen/
        Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the 
        Specimen/Derivative/Aliquot and read it from the URL, with format:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpid}/specimen/{specimenid}/... .
        Another possibility is to search via &#39;search_specimens&#39; for a specific parameter and then extract the ID
        from the JSON-dict which get returned. The function allows also to delete a list of specimen
        
        Parameters
        ----------
        specimenids: list or int 
            The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itself. 
            The URL of the specimens, which should be deleted, has the form &#34;?id=specimenid_1+...+specimenid_n&#34;
            
        Returns
        -------
        JSON-dict
            Details of the Specimens which are deleted or the OpenSpecimen error message as dict.
        &#34;&#34;&#34;

        specids = self.url.delete_specimens(specimenids = specimenids)
        r = self.specimen.delete_specimen(specimenids = specids)

        return r</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util"><code class="flex name class">
<span>class <span class="ident">specimen_util</span></span>
</code></dt>
<dd>
<div class="desc"><p>Handles the calls for Specimens</p>
<p>This class handles the API calls for OpenSpecimen Specimens. It can create, update, delete,
search specimens with different parameters. The other calls are in the os_core class specimens.
The output is a JSON dict or the Error message as dict. It also can check if a
specimen exists which returns a string which tells you if it exists.</p>
<h2 id="notes">Notes</h2>
<p>In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
<h2 id="example">Example</h2>
<p>A code example, where the Specimens/Derivatives/Aliquots are handled is in the Jupyter-Notebook::
$ jupyter notebook main.ipynb</p>
<p>Constructor of the Class specimens_util</p>
<p>Constructor of the class specimen_util, can handle the basic API-calls
of the specimensin OpenSpecimen. It also connects this class to the os_core classes
specimen, url_gen and Json_factory.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>base_url</code></strong> :&ensp;<code>string</code></dt>
<dd>URL to openspecimen, has the format: http(s)://<host>:<port>/openspecimen/rest/ng</dd>
<dt><strong><code>auth</code></strong> :&ensp;<code>tuple</code></dt>
<dd>Consists of two strings ( loginname , password)</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class specimen_util:

    &#34;&#34;&#34;Handles the calls for Specimens
    
    This class handles the API calls for OpenSpecimen Specimens. It can create, update, delete, 
    search specimens with different parameters. The other calls are in the os_core class specimens.
    The output is a JSON dict or the Error message as dict. It also can check if a
    specimen exists which returns a string which tells you if it exists.
    
    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. 
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.
    
    Example
    -------
    A code example, where the Specimens/Derivatives/Aliquots are handled is in the Jupyter-Notebook::
        $ jupyter notebook main.ipynb
    &#34;&#34;&#34;

    def __init__(self):

        &#34;&#34;&#34;Constructor of the Class specimens_util
        
        Constructor of the class specimen_util, can handle the basic API-calls
        of the specimensin OpenSpecimen. It also connects this class to the os_core classes
        specimen, url_gen and Json_factory.
        
        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consists of two strings ( loginname , password)
        &#34;&#34;&#34;

        self.specimen = specimen()
        self.url = url_gen()
        self.jsons = Json_factory()
        self.users = users()


    def search_specimens(self, label = None, cprid = None, eventid = None, visitid = None, maxres = &#34;100&#34;, exact = &#34;false&#34;, extension = &#34;true&#34;):

        &#34;&#34;&#34;Search for Specimen with specific values.
        
        Search for one or more Specimens with the values in the search_string defined. The search string looks like:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;...&amp;{param_x}={value_x}
        
        
        Parameters
        ----------
        label : string
            Label of the specimen.

        cprid : int
            Collection Protocol Registration ID to what Participant the specimen belongs to.

        eventid : int
            Unique systemwide Identifier of the event.

        visitid : int
            Unique systemwide identifier of the visit.

        maxres : int
            Defines how many results are returned maximally.

        exact : string
            OpenSpecimen&#39;s boolean true/false. If true parameter have to match exactly.

        extension : string
            OpenSpecimen&#39;s boolean true/false. If true extension Details will get returned too.

        Returns
        -------
        dict
            Details of the matching Specimens, if no one matches it is an empty list.
        &#34;&#34;&#34;

        search_string = self.url.search_specimen(label = label, cprid = cprid, eventid = eventid, visitid = visitid,
                                             maxres = maxres, exact = exact, extension = extension)
        r = self.specimen.search_specimens(search_string = search_string)

        return r

    def create_specimen(self, specimenclass, specimentype , pathology , anatomic, laterality, initqty, avaqty, visitid, recqlt, userid, 
                        colltime = None, rectime = None, lineage = &#39;New&#39;, status = &#39;Collected&#39;, stor_name = None, storlocx = None,
                        storlocy = None, concetration = None, biohazard = None,  comments = None,  collproc=None, label = None,
                        conttype=None, extensionudn=None, extensionmap=None, extensiondict =None):

        &#34;&#34;&#34;Create a Specimen to a visit

        Create a Specimen to an already existing Visit. In order to use this function one has to know,
        the mandatory details of the specimen e.g. the class of the Specimen.
        
        Notes
        -----
        The label is mandatory if the Protocolsettings are such that the Label is created manually, otherwise
        it has to be left empty.

        Parameters
        ----------
        specimenclass : string
            Class of the specimen.
        
        specimentype : string
            Type of the specimen, belongs to the class.
        
        pathology : string
            Pathologystatus of the Specimen.

        anatomic : string
            The anatomic site of the specimen.
        
        laterality : string
            The laterality of the specimen.
        
        initqty : int
            The initial quantity of a specimen.
        
        avaqty : int
            The available quantity of a specimen.
        
        visitid : int
            The unique identifier of the visit.

        recqlt : string
            The received quality.
        
        label : string
            The Label of the specimen, if automatically generated it has to be left empty, or else it is mandatory.
            
        colltime : string
            Date and Time of the collection event, the format is in the OpenSpecimen&#39;s System configuration.[optional]
            
        rectime : string
            Date and Time of the received event, the format is in the OpenSpecimen&#39;s System configuration.[optional]
            
        lineage : string
            Lineage of the specimen, default value is New.
            
        status : string
            Status of the Specimen, default is &#39;Collected&#39;.
        
        stor_name : string
            Name of the container. [optional]
        
        storlocx : int
            Position of the specimen in the Container in x direction.[optional]

        storlocy : int
            Position of the specimen in the container in y direction.[optional]
            
        concetration  : int
            Concentration of the specimen[optional].
        
        biohazard : string
            Biohazards of that specimen.[optional]
        
        userid : int
            ID of the user who creates the specimen. If not specified the API user is taken.
            
        comments : string
            Comments regarding to the specimen[optional].
        
        collproc : string
            The procedure of the collection[otpional].

        conttype : string
            Type of the storage conatiner.
            
        extensionudn : string
            OpenSpecimen&#39;s boolean true/false. If true, the extension keys are the udn values of the corresponding form.[optional]
        
        extensionmap : string
            The name of the Form which should be taken.[optional]

        extensiondict : dict
            The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). [optional]

        Returns
        -------
        dict
            Dictionary with details of the specimen or the OpenSpecimen&#39;s error meessage.
        &#34;&#34;&#34;
               
        if rectime == None:
            rectime = date.today()
        
        if colltime == None:
            colltime = date.today()

        storloc = None
        if stor_name != None:
            storloc = self.jsons.storage_location_json(name = stor_name, xpos = storlocx, ypos = storlocy)

        extension =None
        if extensiondict != None:
            extension = self.jsons.create_extension(attrsmap = extensionmap, extensiondict = extensiondict, useudn = extensionudn)

        params = self.jsons.create_specimen_json(label = label, specimenclass = specimenclass, specimentype = specimentype, pathology =pathology,
                anatomic= anatomic, laterality = laterality, initqty = initqty, avaqty = avaqty, visitid = visitid, colltime = colltime,
                userid = userid, comments = comments, collproc = collproc, conttype = conttype, recqlt = recqlt, rectime = rectime,
                lineage = lineage, status = status, storloc = storloc, concentration = concetration, biohazard = biohazard,
                extension = extension)
        
        r = self.specimen.create_specimen(params = params)

        return r


    def update_specimen(self, specimenid, label = None, specimenclass = None, specimentype = None, pathology = None, anatomic = None, laterality = None,
                            initqty = None, avaqty = None, visitid = None, recqlt = None, colltime = None, rectime = None, lineage = &#39;New&#39;,
                            status = &#39;Collected&#39;, stor_name = None, storlocx = None, storlocy = None, concetration = None, biohazard = None,
                            userid = None, comments = None,  collproc=None, conttype=None, extensionudn=None, extensionmap=None, extensiondict =None):

        &#34;&#34;&#34;Update an existing Specimen

        Update an existing Specimen in order to use this function one has to know the specimenid. This can be seen via the GUI
        by clicking on the desired specimen, and read from the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimens/{specimenid}/... .
        Or via search Specimen, for example by name and then extract the ID via key [&#34;id&#34;].
        
        Notes
        -----
        The specimenid is mandatory, all the other keys are otional for updating. If left empty nothing will be changed.

        Parameters
        ----------
        specimenid : int
            Unique Id of the specimen.

        specimenclass : string
            Class of the specimen.
        
        specimentype : string
            Type of the specimen, belongs to the class.
        
        pathology : string
            Pathologystatus of the Specimen.

        anatomic : string
            The anatomic site of the specimen.
        
        laterality : string
            The laterality of the specimen.
        
        initqty : int
            The initial quantity of a specimen.
        
        avaqty : int
            The available quantity of a specimen.
        
        visitid : int
            The unique identifier of the visit.

        recqlt : string
            The received quality.
        
        label : string
            The Label of the specimen.
            
        colltime : string
            Date and Time of the collection event, the format is in the OpenSpecimen&#39;s System configuration.
            
        rectime : string
            Date and Time of the received event, the format is in the OpenSpecimen&#39;s System configuration.
            
        lineage : string
            Lineage of the specimen, default value is New.
            
        status : string
            Status of the Specimen, default is &#39;Collected&#39;.
        
        stor_name : string
            Name of the container. 
        
        storlocx : int
            Position of the specimen in the Container in x direction.

        storlocy : int
            Position of the specimen in the container in y direction.
            
        concetration  : int
            Concentration of the specimen.
        
        biohazard : string
            Biohazards of that specimen.
        
        userid : int
            ID of the user who creates the specimen. If not specified the API user is taken.
            
        comments : string
            Comments regarding to the specimen.
        
        collproc : string
            The procedure of the collection.

        conttype : string
            Type of the storage container.
            
        extensionudn : string
            OpenSpecimen&#39;s boolean true/false. If true the extension keys are the udn values of the corresponding form.
        
        extensionmap : string
            The name of the Form which should be taken.

        extensiondict : dict
            The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). 

        Returns
        -------
        dict
            Dictionary with details of the specimen or the OpenSpecimen&#39;s error meessage.
        &#34;&#34;&#34;

        storloc = None
        if stor_name != None:
            storloc = self.jsons.storage_location_json(name = stor_name, xpos = storlocx, ypos = storlocy)

        extension =None
        if extensiondict != None:
            extension = self.jsons.create_extension(attrsmap = extensionmap, extensiondict = extensiondict, useudn = extensionudn)

        params = self.jsons.create_specimen_json(label = label, specimenclass = specimenclass, specimentype = specimentype, pathology =pathology,
                anatomic= anatomic, laterality = laterality, initqty = initqty, avaqty = avaqty, visitid = visitid, colltime = colltime,
                userid = userid, comments = comments, collproc = collproc, conttype = conttype, recqlt = recqlt, rectime = rectime,
                lineage = lineage, status = status, storloc = storloc, concentration = concetration, biohazard = biohazard,
                extension = extension)
        
        r = self.specimen.update_specimen(specimenid = specimenid,params = params)

        return r

    def delete_specimens(self, specimenids):

        &#34;&#34;&#34;Delete a Specimen/Derivative/Aliquot
        
        Delete an already existing Specimen/Derivative/Aliquot. The parameter ::specimenid:: is the uniqe ID of the Specimen/
        Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the 
        Specimen/Derivative/Aliquot and read it from the URL, with format:
        http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpid}/specimen/{specimenid}/... .
        Another possibility is to search via &#39;search_specimens&#39; for a specific parameter and then extract the ID
        from the JSON-dict which get returned. The function allows also to delete a list of specimen
        
        Parameters
        ----------
        specimenids: list or int 
            The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itself. 
            The URL of the specimens, which should be deleted, has the form &#34;?id=specimenid_1+...+specimenid_n&#34;
            
        Returns
        -------
        JSON-dict
            Details of the Specimens which are deleted or the OpenSpecimen error message as dict.
        &#34;&#34;&#34;

        specids = self.url.delete_specimens(specimenids = specimenids)
        r = self.specimen.delete_specimen(specimenids = specids)

        return r</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.create_specimen"><code class="name flex">
<span>def <span class="ident">create_specimen</span></span>(<span>self, specimenclass, specimentype, pathology, anatomic, laterality, initqty, avaqty, visitid, recqlt, userid, colltime=None, rectime=None, lineage='New', status='Collected', stor_name=None, storlocx=None, storlocy=None, concetration=None, biohazard=None, comments=None, collproc=None, label=None, conttype=None, extensionudn=None, extensionmap=None, extensiondict=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Create a Specimen to a visit</p>
<p>Create a Specimen to an already existing Visit. In order to use this function one has to know,
the mandatory details of the specimen e.g. the class of the Specimen.</p>
<h2 id="notes">Notes</h2>
<p>The label is mandatory if the Protocolsettings are such that the Label is created manually, otherwise
it has to be left empty.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>specimenclass</code></strong> :&ensp;<code>string</code></dt>
<dd>Class of the specimen.</dd>
<dt><strong><code>specimentype</code></strong> :&ensp;<code>string</code></dt>
<dd>Type of the specimen, belongs to the class.</dd>
<dt><strong><code>pathology</code></strong> :&ensp;<code>string</code></dt>
<dd>Pathologystatus of the Specimen.</dd>
<dt><strong><code>anatomic</code></strong> :&ensp;<code>string</code></dt>
<dd>The anatomic site of the specimen.</dd>
<dt><strong><code>laterality</code></strong> :&ensp;<code>string</code></dt>
<dd>The laterality of the specimen.</dd>
<dt><strong><code>initqty</code></strong> :&ensp;<code>int</code></dt>
<dd>The initial quantity of a specimen.</dd>
<dt><strong><code>avaqty</code></strong> :&ensp;<code>int</code></dt>
<dd>The available quantity of a specimen.</dd>
<dt><strong><code>visitid</code></strong> :&ensp;<code>int</code></dt>
<dd>The unique identifier of the visit.</dd>
<dt><strong><code>recqlt</code></strong> :&ensp;<code>string</code></dt>
<dd>The received quality.</dd>
<dt><strong><code>label</code></strong> :&ensp;<code>string</code></dt>
<dd>The Label of the specimen, if automatically generated it has to be left empty, or else it is mandatory.</dd>
<dt><strong><code>colltime</code></strong> :&ensp;<code>string</code></dt>
<dd>Date and Time of the collection event, the format is in the OpenSpecimen's System configuration.[optional]</dd>
<dt><strong><code>rectime</code></strong> :&ensp;<code>string</code></dt>
<dd>Date and Time of the received event, the format is in the OpenSpecimen's System configuration.[optional]</dd>
<dt><strong><code>lineage</code></strong> :&ensp;<code>string</code></dt>
<dd>Lineage of the specimen, default value is New.</dd>
<dt><strong><code>status</code></strong> :&ensp;<code>string</code></dt>
<dd>Status of the Specimen, default is 'Collected'.</dd>
<dt><strong><code>stor_name</code></strong> :&ensp;<code>string</code></dt>
<dd>Name of the container. [optional]</dd>
<dt><strong><code>storlocx</code></strong> :&ensp;<code>int</code></dt>
<dd>Position of the specimen in the Container in x direction.[optional]</dd>
<dt><strong><code>storlocy</code></strong> :&ensp;<code>int</code></dt>
<dd>Position of the specimen in the container in y direction.[optional]</dd>
</dl>
<p>concetration
: int
Concentration of the specimen[optional].</p>
<dl>
<dt><strong><code>biohazard</code></strong> :&ensp;<code>string</code></dt>
<dd>Biohazards of that specimen.[optional]</dd>
<dt><strong><code>userid</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the user who creates the specimen. If not specified the API user is taken.</dd>
<dt><strong><code>comments</code></strong> :&ensp;<code>string</code></dt>
<dd>Comments regarding to the specimen[optional].</dd>
<dt><strong><code>collproc</code></strong> :&ensp;<code>string</code></dt>
<dd>The procedure of the collection[otpional].</dd>
<dt><strong><code>conttype</code></strong> :&ensp;<code>string</code></dt>
<dd>Type of the storage conatiner.</dd>
<dt><strong><code>extensionudn</code></strong> :&ensp;<code>string</code></dt>
<dd>OpenSpecimen's boolean true/false. If true, the extension keys are the udn values of the corresponding form.[optional]</dd>
<dt><strong><code>extensionmap</code></strong> :&ensp;<code>string</code></dt>
<dd>The name of the Form which should be taken.[optional]</dd>
<dt><strong><code>extensiondict</code></strong> :&ensp;<code>dict</code></dt>
<dd>The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). [optional]</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Dictionary with details of the specimen or the OpenSpecimen's error meessage.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_specimen(self, specimenclass, specimentype , pathology , anatomic, laterality, initqty, avaqty, visitid, recqlt, userid, 
                    colltime = None, rectime = None, lineage = &#39;New&#39;, status = &#39;Collected&#39;, stor_name = None, storlocx = None,
                    storlocy = None, concetration = None, biohazard = None,  comments = None,  collproc=None, label = None,
                    conttype=None, extensionudn=None, extensionmap=None, extensiondict =None):

    &#34;&#34;&#34;Create a Specimen to a visit

    Create a Specimen to an already existing Visit. In order to use this function one has to know,
    the mandatory details of the specimen e.g. the class of the Specimen.
    
    Notes
    -----
    The label is mandatory if the Protocolsettings are such that the Label is created manually, otherwise
    it has to be left empty.

    Parameters
    ----------
    specimenclass : string
        Class of the specimen.
    
    specimentype : string
        Type of the specimen, belongs to the class.
    
    pathology : string
        Pathologystatus of the Specimen.

    anatomic : string
        The anatomic site of the specimen.
    
    laterality : string
        The laterality of the specimen.
    
    initqty : int
        The initial quantity of a specimen.
    
    avaqty : int
        The available quantity of a specimen.
    
    visitid : int
        The unique identifier of the visit.

    recqlt : string
        The received quality.
    
    label : string
        The Label of the specimen, if automatically generated it has to be left empty, or else it is mandatory.
        
    colltime : string
        Date and Time of the collection event, the format is in the OpenSpecimen&#39;s System configuration.[optional]
        
    rectime : string
        Date and Time of the received event, the format is in the OpenSpecimen&#39;s System configuration.[optional]
        
    lineage : string
        Lineage of the specimen, default value is New.
        
    status : string
        Status of the Specimen, default is &#39;Collected&#39;.
    
    stor_name : string
        Name of the container. [optional]
    
    storlocx : int
        Position of the specimen in the Container in x direction.[optional]

    storlocy : int
        Position of the specimen in the container in y direction.[optional]
        
    concetration  : int
        Concentration of the specimen[optional].
    
    biohazard : string
        Biohazards of that specimen.[optional]
    
    userid : int
        ID of the user who creates the specimen. If not specified the API user is taken.
        
    comments : string
        Comments regarding to the specimen[optional].
    
    collproc : string
        The procedure of the collection[otpional].

    conttype : string
        Type of the storage conatiner.
        
    extensionudn : string
        OpenSpecimen&#39;s boolean true/false. If true, the extension keys are the udn values of the corresponding form.[optional]
    
    extensionmap : string
        The name of the Form which should be taken.[optional]

    extensiondict : dict
        The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). [optional]

    Returns
    -------
    dict
        Dictionary with details of the specimen or the OpenSpecimen&#39;s error meessage.
    &#34;&#34;&#34;
           
    if rectime == None:
        rectime = date.today()
    
    if colltime == None:
        colltime = date.today()

    storloc = None
    if stor_name != None:
        storloc = self.jsons.storage_location_json(name = stor_name, xpos = storlocx, ypos = storlocy)

    extension =None
    if extensiondict != None:
        extension = self.jsons.create_extension(attrsmap = extensionmap, extensiondict = extensiondict, useudn = extensionudn)

    params = self.jsons.create_specimen_json(label = label, specimenclass = specimenclass, specimentype = specimentype, pathology =pathology,
            anatomic= anatomic, laterality = laterality, initqty = initqty, avaqty = avaqty, visitid = visitid, colltime = colltime,
            userid = userid, comments = comments, collproc = collproc, conttype = conttype, recqlt = recqlt, rectime = rectime,
            lineage = lineage, status = status, storloc = storloc, concentration = concetration, biohazard = biohazard,
            extension = extension)
    
    r = self.specimen.create_specimen(params = params)

    return r</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.delete_specimens"><code class="name flex">
<span>def <span class="ident">delete_specimens</span></span>(<span>self, specimenids)</span>
</code></dt>
<dd>
<div class="desc"><p>Delete a Specimen/Derivative/Aliquot</p>
<p>Delete an already existing Specimen/Derivative/Aliquot. The parameter ::specimenid:: is the uniqe ID of the Specimen/
Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the
Specimen/Derivative/Aliquot and read it from the URL, with format:
http(s)://<host>:<port>/openspecimen/cp-view/{cpid}/specimen/{specimenid}/&hellip; .
Another possibility is to search via 'search_specimens' for a specific parameter and then extract the ID
from the JSON-dict which get returned. The function allows also to delete a list of specimen</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>specimenids</code></strong> :&ensp;<code>list</code> or <code>int </code></dt>
<dd>The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itself.
The URL of the specimens, which should be deleted, has the form "?id=specimenid_1+&hellip;+specimenid_n"</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>JSON-dict</code></dt>
<dd>Details of the Specimens which are deleted or the OpenSpecimen error message as dict.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_specimens(self, specimenids):

    &#34;&#34;&#34;Delete a Specimen/Derivative/Aliquot
    
    Delete an already existing Specimen/Derivative/Aliquot. The parameter ::specimenid:: is the uniqe ID of the Specimen/
    Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the 
    Specimen/Derivative/Aliquot and read it from the URL, with format:
    http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpid}/specimen/{specimenid}/... .
    Another possibility is to search via &#39;search_specimens&#39; for a specific parameter and then extract the ID
    from the JSON-dict which get returned. The function allows also to delete a list of specimen
    
    Parameters
    ----------
    specimenids: list or int 
        The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itself. 
        The URL of the specimens, which should be deleted, has the form &#34;?id=specimenid_1+...+specimenid_n&#34;
        
    Returns
    -------
    JSON-dict
        Details of the Specimens which are deleted or the OpenSpecimen error message as dict.
    &#34;&#34;&#34;

    specids = self.url.delete_specimens(specimenids = specimenids)
    r = self.specimen.delete_specimen(specimenids = specids)

    return r</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.search_specimens"><code class="name flex">
<span>def <span class="ident">search_specimens</span></span>(<span>self, label=None, cprid=None, eventid=None, visitid=None, maxres='100', exact='false', extension='true')</span>
</code></dt>
<dd>
<div class="desc"><p>Search for Specimen with specific values.</p>
<p>Search for one or more Specimens with the values in the search_string defined. The search string looks like:
http(s)://<host>:<port>/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;&hellip;&amp;{param_x}={value_x}</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>label</code></strong> :&ensp;<code>string</code></dt>
<dd>Label of the specimen.</dd>
<dt><strong><code>cprid</code></strong> :&ensp;<code>int</code></dt>
<dd>Collection Protocol Registration ID to what Participant the specimen belongs to.</dd>
<dt><strong><code>eventid</code></strong> :&ensp;<code>int</code></dt>
<dd>Unique systemwide Identifier of the event.</dd>
<dt><strong><code>visitid</code></strong> :&ensp;<code>int</code></dt>
<dd>Unique systemwide identifier of the visit.</dd>
<dt><strong><code>maxres</code></strong> :&ensp;<code>int</code></dt>
<dd>Defines how many results are returned maximally.</dd>
<dt><strong><code>exact</code></strong> :&ensp;<code>string</code></dt>
<dd>OpenSpecimen's boolean true/false. If true parameter have to match exactly.</dd>
<dt><strong><code>extension</code></strong> :&ensp;<code>string</code></dt>
<dd>OpenSpecimen's boolean true/false. If true extension Details will get returned too.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Details of the matching Specimens, if no one matches it is an empty list.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def search_specimens(self, label = None, cprid = None, eventid = None, visitid = None, maxres = &#34;100&#34;, exact = &#34;false&#34;, extension = &#34;true&#34;):

    &#34;&#34;&#34;Search for Specimen with specific values.
    
    Search for one or more Specimens with the values in the search_string defined. The search string looks like:
    http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;...&amp;{param_x}={value_x}
    
    
    Parameters
    ----------
    label : string
        Label of the specimen.

    cprid : int
        Collection Protocol Registration ID to what Participant the specimen belongs to.

    eventid : int
        Unique systemwide Identifier of the event.

    visitid : int
        Unique systemwide identifier of the visit.

    maxres : int
        Defines how many results are returned maximally.

    exact : string
        OpenSpecimen&#39;s boolean true/false. If true parameter have to match exactly.

    extension : string
        OpenSpecimen&#39;s boolean true/false. If true extension Details will get returned too.

    Returns
    -------
    dict
        Details of the matching Specimens, if no one matches it is an empty list.
    &#34;&#34;&#34;

    search_string = self.url.search_specimen(label = label, cprid = cprid, eventid = eventid, visitid = visitid,
                                         maxres = maxres, exact = exact, extension = extension)
    r = self.specimen.search_specimens(search_string = search_string)

    return r</code></pre>
</details>
</dd>
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.update_specimen"><code class="name flex">
<span>def <span class="ident">update_specimen</span></span>(<span>self, specimenid, label=None, specimenclass=None, specimentype=None, pathology=None, anatomic=None, laterality=None, initqty=None, avaqty=None, visitid=None, recqlt=None, colltime=None, rectime=None, lineage='New', status='Collected', stor_name=None, storlocx=None, storlocy=None, concetration=None, biohazard=None, userid=None, comments=None, collproc=None, conttype=None, extensionudn=None, extensionmap=None, extensiondict=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Update an existing Specimen</p>
<p>Update an existing Specimen in order to use this function one has to know the specimenid. This can be seen via the GUI
by clicking on the desired specimen, and read from the URL: http(s)://<host>:<port>/openspecimen/cps/{cpid}/specimens/{specimenid}/&hellip; .
Or via search Specimen, for example by name and then extract the ID via key ["id"].</p>
<h2 id="notes">Notes</h2>
<p>The specimenid is mandatory, all the other keys are otional for updating. If left empty nothing will be changed.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>specimenid</code></strong> :&ensp;<code>int</code></dt>
<dd>Unique Id of the specimen.</dd>
<dt><strong><code>specimenclass</code></strong> :&ensp;<code>string</code></dt>
<dd>Class of the specimen.</dd>
<dt><strong><code>specimentype</code></strong> :&ensp;<code>string</code></dt>
<dd>Type of the specimen, belongs to the class.</dd>
<dt><strong><code>pathology</code></strong> :&ensp;<code>string</code></dt>
<dd>Pathologystatus of the Specimen.</dd>
<dt><strong><code>anatomic</code></strong> :&ensp;<code>string</code></dt>
<dd>The anatomic site of the specimen.</dd>
<dt><strong><code>laterality</code></strong> :&ensp;<code>string</code></dt>
<dd>The laterality of the specimen.</dd>
<dt><strong><code>initqty</code></strong> :&ensp;<code>int</code></dt>
<dd>The initial quantity of a specimen.</dd>
<dt><strong><code>avaqty</code></strong> :&ensp;<code>int</code></dt>
<dd>The available quantity of a specimen.</dd>
<dt><strong><code>visitid</code></strong> :&ensp;<code>int</code></dt>
<dd>The unique identifier of the visit.</dd>
<dt><strong><code>recqlt</code></strong> :&ensp;<code>string</code></dt>
<dd>The received quality.</dd>
<dt><strong><code>label</code></strong> :&ensp;<code>string</code></dt>
<dd>The Label of the specimen.</dd>
<dt><strong><code>colltime</code></strong> :&ensp;<code>string</code></dt>
<dd>Date and Time of the collection event, the format is in the OpenSpecimen's System configuration.</dd>
<dt><strong><code>rectime</code></strong> :&ensp;<code>string</code></dt>
<dd>Date and Time of the received event, the format is in the OpenSpecimen's System configuration.</dd>
<dt><strong><code>lineage</code></strong> :&ensp;<code>string</code></dt>
<dd>Lineage of the specimen, default value is New.</dd>
<dt><strong><code>status</code></strong> :&ensp;<code>string</code></dt>
<dd>Status of the Specimen, default is 'Collected'.</dd>
<dt><strong><code>stor_name</code></strong> :&ensp;<code>string</code></dt>
<dd>Name of the container.</dd>
<dt><strong><code>storlocx</code></strong> :&ensp;<code>int</code></dt>
<dd>Position of the specimen in the Container in x direction.</dd>
<dt><strong><code>storlocy</code></strong> :&ensp;<code>int</code></dt>
<dd>Position of the specimen in the container in y direction.</dd>
</dl>
<p>concetration
: int
Concentration of the specimen.</p>
<dl>
<dt><strong><code>biohazard</code></strong> :&ensp;<code>string</code></dt>
<dd>Biohazards of that specimen.</dd>
<dt><strong><code>userid</code></strong> :&ensp;<code>int</code></dt>
<dd>ID of the user who creates the specimen. If not specified the API user is taken.</dd>
<dt><strong><code>comments</code></strong> :&ensp;<code>string</code></dt>
<dd>Comments regarding to the specimen.</dd>
<dt><strong><code>collproc</code></strong> :&ensp;<code>string</code></dt>
<dd>The procedure of the collection.</dd>
<dt><strong><code>conttype</code></strong> :&ensp;<code>string</code></dt>
<dd>Type of the storage container.</dd>
<dt><strong><code>extensionudn</code></strong> :&ensp;<code>string</code></dt>
<dd>OpenSpecimen's boolean true/false. If true the extension keys are the udn values of the corresponding form.</dd>
<dt><strong><code>extensionmap</code></strong> :&ensp;<code>string</code></dt>
<dd>The name of the Form which should be taken.</dd>
<dt><strong><code>extensiondict</code></strong> :&ensp;<code>dict</code></dt>
<dd>The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before).</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Dictionary with details of the specimen or the OpenSpecimen's error meessage.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_specimen(self, specimenid, label = None, specimenclass = None, specimentype = None, pathology = None, anatomic = None, laterality = None,
                        initqty = None, avaqty = None, visitid = None, recqlt = None, colltime = None, rectime = None, lineage = &#39;New&#39;,
                        status = &#39;Collected&#39;, stor_name = None, storlocx = None, storlocy = None, concetration = None, biohazard = None,
                        userid = None, comments = None,  collproc=None, conttype=None, extensionudn=None, extensionmap=None, extensiondict =None):

    &#34;&#34;&#34;Update an existing Specimen

    Update an existing Specimen in order to use this function one has to know the specimenid. This can be seen via the GUI
    by clicking on the desired specimen, and read from the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimens/{specimenid}/... .
    Or via search Specimen, for example by name and then extract the ID via key [&#34;id&#34;].
    
    Notes
    -----
    The specimenid is mandatory, all the other keys are otional for updating. If left empty nothing will be changed.

    Parameters
    ----------
    specimenid : int
        Unique Id of the specimen.

    specimenclass : string
        Class of the specimen.
    
    specimentype : string
        Type of the specimen, belongs to the class.
    
    pathology : string
        Pathologystatus of the Specimen.

    anatomic : string
        The anatomic site of the specimen.
    
    laterality : string
        The laterality of the specimen.
    
    initqty : int
        The initial quantity of a specimen.
    
    avaqty : int
        The available quantity of a specimen.
    
    visitid : int
        The unique identifier of the visit.

    recqlt : string
        The received quality.
    
    label : string
        The Label of the specimen.
        
    colltime : string
        Date and Time of the collection event, the format is in the OpenSpecimen&#39;s System configuration.
        
    rectime : string
        Date and Time of the received event, the format is in the OpenSpecimen&#39;s System configuration.
        
    lineage : string
        Lineage of the specimen, default value is New.
        
    status : string
        Status of the Specimen, default is &#39;Collected&#39;.
    
    stor_name : string
        Name of the container. 
    
    storlocx : int
        Position of the specimen in the Container in x direction.

    storlocy : int
        Position of the specimen in the container in y direction.
        
    concetration  : int
        Concentration of the specimen.
    
    biohazard : string
        Biohazards of that specimen.
    
    userid : int
        ID of the user who creates the specimen. If not specified the API user is taken.
        
    comments : string
        Comments regarding to the specimen.
    
    collproc : string
        The procedure of the collection.

    conttype : string
        Type of the storage container.
        
    extensionudn : string
        OpenSpecimen&#39;s boolean true/false. If true the extension keys are the udn values of the corresponding form.
    
    extensionmap : string
        The name of the Form which should be taken.

    extensiondict : dict
        The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). 

    Returns
    -------
    dict
        Dictionary with details of the specimen or the OpenSpecimen&#39;s error meessage.
    &#34;&#34;&#34;

    storloc = None
    if stor_name != None:
        storloc = self.jsons.storage_location_json(name = stor_name, xpos = storlocx, ypos = storlocy)

    extension =None
    if extensiondict != None:
        extension = self.jsons.create_extension(attrsmap = extensionmap, extensiondict = extensiondict, useudn = extensionudn)

    params = self.jsons.create_specimen_json(label = label, specimenclass = specimenclass, specimentype = specimentype, pathology =pathology,
            anatomic= anatomic, laterality = laterality, initqty = initqty, avaqty = avaqty, visitid = visitid, colltime = colltime,
            userid = userid, comments = comments, collproc = collproc, conttype = conttype, recqlt = recqlt, rectime = rectime,
            lineage = lineage, status = status, storloc = storloc, concentration = concetration, biohazard = biohazard,
            extension = extension)
    
    r = self.specimen.update_specimen(specimenid = specimenid,params = params)

    return r</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="OpenSpecimenAPIconnector.os_util" href="index.html">OpenSpecimenAPIconnector.os_util</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util">specimen_util</a></code></h4>
<ul class="">
<li><code><a title="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.create_specimen" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.create_specimen">create_specimen</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.delete_specimens" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.delete_specimens">delete_specimens</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.search_specimens" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.search_specimens">search_specimens</a></code></li>
<li><code><a title="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.update_specimen" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.update_specimen">update_specimen</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>