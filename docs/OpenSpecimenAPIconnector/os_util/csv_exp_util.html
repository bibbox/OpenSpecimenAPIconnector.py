<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>OpenSpecimenAPIconnector.os_util.csv_exp_util API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>OpenSpecimenAPIconnector.os_util.csv_exp_util</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#! /bin/python3

from ..os_core.csv_export import CSV_exporter
from ..os_core.jsons import Json_factory
import json
import io
import pandas
import time

## TODO Add all the other entities currently in export operations. Da sollten wir nochmal dr√ºber sprechen

class csv_exporter:

    &#34;&#34;&#34;Handles the export of CSV files from open specimen for different entities like collection protocols, specimens etc etc.

    This class handles the CSV export of various different entities and creates CSV files of the requested entities like collection protocols, institutes etc.
    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. 
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.

    Example
    -------

    A code example, where the Institutes are handled is in the Jupyter-Notebook:

    $ jupyter notebook main.ipynb
    &#34;&#34;&#34;
    def __init__(self):

        &#34;&#34;&#34;Constructor of the Class csv_export

        Constructor of the class csv export holds the base parameters for the corresponding OpenSpecimen instance 

        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consists of two strings ( loginname , password)
        &#34;&#34;&#34;

        self.export = CSV_exporter()
        self.json = Json_factory()


    def csv_export(self, objecttype, recordids=None, cpid=None, ppids=None,  entitytype=None, formname=None, 
                            specimenlabels=None, csv=False):

        &#34;&#34;&#34;Export CV for entity collection protocol

        Export function for collection protocols 

        Parameters
        objecttype: string 
            Identifying the general object to be exported.
            Permissible Values: &#34;institute&#34;, &#34;site&#34;, &#34;user&#34;, &#34;cpr&#34;, &#34;specimen&#34;, &#34;extensions&#34;, &#34;storageContainer&#34;
        recordids: list or string
            Comma seperated list of record ids for fetching selected entries by their identifier. (Sites, Institutes, Users and Containers) 
        cp_id: string 
            Collection protocol id of export target not neccesary for objects higher in the hierachy like institue or site.
            For all others it can be specified or set to &#34;-1&#34; which means all data in the system.
        ppids: list or string
            List of comma seperated participant identifiers; String if its a singular participant to be exported
            Used in combination with specimen object type as a paramter
        entitytype: string
            Paramter defining the entity for data extraction (e.g.: attached form at participant level)
            used with the extension object type
        formname: string
            Defines the form to be downloaded in context of the extension object type together with the specified entity 
        specimenlabels: list or string
            List of comma seperated specimen identifiers; str if its a singular specimen to be exported        
        ----------
        
        Returns
        -------
        job: Pandas DataFrame or CSV binary File
            Returns the csv file as Pandas data frame or CSV binary string
        &#34;&#34;&#34;
        

        data = self.json.create_csv_export_job(objecttype = objecttype, cpid = cpid,
                entitytype = entitytype, formname = formname)
        
        job_id = self.export.create_export_job(data = data)

        job = self.export.get_job_output(job_id = job_id)

        if csv:
           job = job.to_csv(index=False)

        return job</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter"><code class="flex name class">
<span>class <span class="ident">csv_exporter</span></span>
</code></dt>
<dd>
<div class="desc"><p>Handles the export of CSV files from open specimen for different entities like collection protocols, specimens etc etc.</p>
<p>This class handles the CSV export of various different entities and creates CSV files of the requested entities like collection protocols, institutes etc.
Notes</p>
<hr>
<p>In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
<h2 id="example">Example</h2>
<p>A code example, where the Institutes are handled is in the Jupyter-Notebook:</p>
<p>$ jupyter notebook main.ipynb</p>
<p>Constructor of the Class csv_export</p>
<p>Constructor of the class csv export holds the base parameters for the corresponding OpenSpecimen instance </p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>base_url</code></strong> :&ensp;<code>string</code></dt>
<dd>URL to openspecimen, has the format: http(s)://<host>:<port>/openspecimen/rest/ng</dd>
<dt><strong><code>auth</code></strong> :&ensp;<code>tuple</code></dt>
<dd>Consists of two strings ( loginname , password)</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class csv_exporter:

    &#34;&#34;&#34;Handles the export of CSV files from open specimen for different entities like collection protocols, specimens etc etc.

    This class handles the CSV export of various different entities and creates CSV files of the requested entities like collection protocols, institutes etc.
    Notes
    -----
    In order to use this and also the other classes, the user has to know OpenSpecimen. 
    The API calls are documented in https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs and 
    the calls refer to this site. More details can be seen in the documentation.

    Example
    -------

    A code example, where the Institutes are handled is in the Jupyter-Notebook:

    $ jupyter notebook main.ipynb
    &#34;&#34;&#34;
    def __init__(self):

        &#34;&#34;&#34;Constructor of the Class csv_export

        Constructor of the class csv export holds the base parameters for the corresponding OpenSpecimen instance 

        Parameters
        ----------
        base_url : string
            URL to openspecimen, has the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/ng
        auth : tuple
            Consists of two strings ( loginname , password)
        &#34;&#34;&#34;

        self.export = CSV_exporter()
        self.json = Json_factory()


    def csv_export(self, objecttype, recordids=None, cpid=None, ppids=None,  entitytype=None, formname=None, 
                            specimenlabels=None, csv=False):

        &#34;&#34;&#34;Export CV for entity collection protocol

        Export function for collection protocols 

        Parameters
        objecttype: string 
            Identifying the general object to be exported.
            Permissible Values: &#34;institute&#34;, &#34;site&#34;, &#34;user&#34;, &#34;cpr&#34;, &#34;specimen&#34;, &#34;extensions&#34;, &#34;storageContainer&#34;
        recordids: list or string
            Comma seperated list of record ids for fetching selected entries by their identifier. (Sites, Institutes, Users and Containers) 
        cp_id: string 
            Collection protocol id of export target not neccesary for objects higher in the hierachy like institue or site.
            For all others it can be specified or set to &#34;-1&#34; which means all data in the system.
        ppids: list or string
            List of comma seperated participant identifiers; String if its a singular participant to be exported
            Used in combination with specimen object type as a paramter
        entitytype: string
            Paramter defining the entity for data extraction (e.g.: attached form at participant level)
            used with the extension object type
        formname: string
            Defines the form to be downloaded in context of the extension object type together with the specified entity 
        specimenlabels: list or string
            List of comma seperated specimen identifiers; str if its a singular specimen to be exported        
        ----------
        
        Returns
        -------
        job: Pandas DataFrame or CSV binary File
            Returns the csv file as Pandas data frame or CSV binary string
        &#34;&#34;&#34;
        

        data = self.json.create_csv_export_job(objecttype = objecttype, cpid = cpid,
                entitytype = entitytype, formname = formname)
        
        job_id = self.export.create_export_job(data = data)

        job = self.export.get_job_output(job_id = job_id)

        if csv:
           job = job.to_csv(index=False)

        return job</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter.csv_export"><code class="name flex">
<span>def <span class="ident">csv_export</span></span>(<span>self, objecttype, recordids=None, cpid=None, ppids=None, entitytype=None, formname=None, specimenlabels=None, csv=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Export CV for entity collection protocol</p>
<p>Export function for collection protocols </p>
<p>Parameters
objecttype: string
Identifying the general object to be exported.
Permissible Values: "institute", "site", "user", "cpr", "specimen", "extensions", "storageContainer"
recordids: list or string
Comma seperated list of record ids for fetching selected entries by their identifier. (Sites, Institutes, Users and Containers)
cp_id: string
Collection protocol id of export target not neccesary for objects higher in the hierachy like institue or site.
For all others it can be specified or set to "-1" which means all data in the system.
ppids: list or string
List of comma seperated participant identifiers; String if its a singular participant to be exported
Used in combination with specimen object type as a paramter
entitytype: string
Paramter defining the entity for data extraction (e.g.: attached form at participant level)
used with the extension object type
formname: string
Defines the form to be downloaded in context of the extension object type together with the specified entity
specimenlabels: list or string
List of comma seperated specimen identifiers; str if its a singular specimen to be exported
</p>
<hr>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>job</code></strong> :&ensp;<code>Pandas DataFrame</code> or <code>CSV binary File</code></dt>
<dd>Returns the csv file as Pandas data frame or CSV binary string</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def csv_export(self, objecttype, recordids=None, cpid=None, ppids=None,  entitytype=None, formname=None, 
                        specimenlabels=None, csv=False):

    &#34;&#34;&#34;Export CV for entity collection protocol

    Export function for collection protocols 

    Parameters
    objecttype: string 
        Identifying the general object to be exported.
        Permissible Values: &#34;institute&#34;, &#34;site&#34;, &#34;user&#34;, &#34;cpr&#34;, &#34;specimen&#34;, &#34;extensions&#34;, &#34;storageContainer&#34;
    recordids: list or string
        Comma seperated list of record ids for fetching selected entries by their identifier. (Sites, Institutes, Users and Containers) 
    cp_id: string 
        Collection protocol id of export target not neccesary for objects higher in the hierachy like institue or site.
        For all others it can be specified or set to &#34;-1&#34; which means all data in the system.
    ppids: list or string
        List of comma seperated participant identifiers; String if its a singular participant to be exported
        Used in combination with specimen object type as a paramter
    entitytype: string
        Paramter defining the entity for data extraction (e.g.: attached form at participant level)
        used with the extension object type
    formname: string
        Defines the form to be downloaded in context of the extension object type together with the specified entity 
    specimenlabels: list or string
        List of comma seperated specimen identifiers; str if its a singular specimen to be exported        
    ----------
    
    Returns
    -------
    job: Pandas DataFrame or CSV binary File
        Returns the csv file as Pandas data frame or CSV binary string
    &#34;&#34;&#34;
    

    data = self.json.create_csv_export_job(objecttype = objecttype, cpid = cpid,
            entitytype = entitytype, formname = formname)
    
    job_id = self.export.create_export_job(data = data)

    job = self.export.get_job_output(job_id = job_id)

    if csv:
       job = job.to_csv(index=False)

    return job</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="OpenSpecimenAPIconnector.os_util" href="index.html">OpenSpecimenAPIconnector.os_util</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter" href="#OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter">csv_exporter</a></code></h4>
<ul class="">
<li><code><a title="OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter.csv_export" href="#OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter.csv_export">csv_export</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>