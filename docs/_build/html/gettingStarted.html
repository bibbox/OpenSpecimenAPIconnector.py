

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting Started &mdash; OpenSpecimenAPIConnector 0.9.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="contents.html" class="icon icon-home"> OpenSpecimenAPIConnector
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#installing-the-package">Installing the Package</a></li>
<li><a class="reference internal" href="#importing-the-package">Importing the Package</a></li>
<li><a class="reference internal" href="#configuring-the-url-and-login">Configuring the URL and Login</a></li>
<li><a class="reference internal" href="#creating-an-institute">Creating an Institute</a></li>
<li><a class="reference internal" href="#creating-a-site">Creating a Site</a></li>
<li><a class="reference internal" href="#creating-a-collection-protocol">Creating a Collection Protocol</a></li>
<li><a class="reference internal" href="#creating-a-registration">Creating a Registration</a></li>
<li><a class="reference internal" href="#creating-a-specimen-together-with-a-visit">Creating a Specimen together with a Visit</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="contents.html">OpenSpecimenAPIConnector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="contents.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/gettingStarted.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>As an introduction to this package, a specimen with all its dependencies gets created.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The calls are done with the mandatory fields only. There are other fields which can be filled out, while creating the objects in OpenSpecimen. For further insights
on can read  the <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/overview">Documentation of OpenSpecimen</a> or  the
<a class="reference internal" href="index.html#index"><span class="std std-ref">Code Documentation of the pip-package</span></a>.</p>
</div>
<p>Before starting one has to <a class="reference internal" href="installing.html#installation"><span class="std std-ref">install</span></a> the package.
After the <a class="reference internal" href="installing.html#installation"><span class="std std-ref">installation</span></a> is done, one can use the package for the personal OpenSpecimen distribution.</p>
<div class="section" id="installing-the-package">
<h2>Installing the Package<a class="headerlink" href="#installing-the-package" title="Permalink to this headline">¶</a></h2>
<p>In your console one has to run</p>
<div class="code console highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">OpenSpecimenAPIConnector</span>
</pre></div>
</div>
<p>or</p>
<div class="code console highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">OpenSpecimenAPIConnector</span>
</pre></div>
</div>
</div>
<div class="section" id="importing-the-package">
<h2>Importing the Package<a class="headerlink" href="#importing-the-package" title="Permalink to this headline">¶</a></h2>
<p>First step is to import the modules to the python script.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">OpenSpecimenAPIconnector</span> <span class="k">as</span> <span class="nn">OSconn</span>
<span class="kn">import</span> <span class="nn">OpenSpecimenAPIconnector.os_core</span> <span class="k">as</span> <span class="nn">os_core</span>
<span class="kn">import</span> <span class="nn">OpenSpecimenAPIconnector.os_util</span> <span class="k">as</span> <span class="nn">os_util</span>
</pre></div>
</div>
<p>Instead of <code class="docutils literal notranslate"><span class="pre">OpenSpecimenAPIconnector.os_core</span> <span class="pre">as</span> <span class="pre">os_util</span></code> on can use <code class="docutils literal notranslate"><span class="pre">OSconn.os_util</span></code> in the code. The same applies for <code class="docutils literal notranslate"><span class="pre">os_core</span></code>.</p>
</div>
<div class="section" id="configuring-the-url-and-login">
<h2>Configuring the URL and Login<a class="headerlink" href="#configuring-the-url-and-login" title="Permalink to this headline">¶</a></h2>
<p>The next step is to define the URL of OpenSpecimen aswell as the Loginname and Password of the User, who wants to use this package.
The default password and loginname in OpenSpecimen are those which are used here:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set Login Example</span>
<span class="n">baseurl</span> <span class="o">=</span> <span class="s1">&#39;http(s)://&lt;OS-Instance-Name&gt;/openspecimen/rest/ng&#39;</span>
<span class="n">loginname</span> <span class="o">=</span> <span class="s2">&quot;admin&quot;</span>
<span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;Login@123&quot;</span>
<span class="n">auth</span> <span class="o">=</span> <span class="p">(</span><span class="n">loginname</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
<span class="n">OSconn</span><span class="o">.</span><span class="n">config_manager</span><span class="o">.</span><span class="n">set_login</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span><span class="p">,</span> <span class="n">auth</span> <span class="o">=</span> <span class="n">auth</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-an-institute">
<h2>Creating an Institute<a class="headerlink" href="#creating-an-institute" title="Permalink to this headline">¶</a></h2>
<p>OpenSpecimen has a hierarchy, which has to be respected when creating objects. For example if one wants to create a <strong>site</strong>, there has to be an <strong>institute</strong>.
So the highest instance is an <strong>institute</strong>. This can be done as follows, with the function <code class="docutils literal notranslate"><span class="pre">create_institute</span></code>:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># initialize</span>
<span class="n">institutes_util</span> <span class="o">=</span> <span class="n">os_util</span><span class="o">.</span><span class="n">institutes_util</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">institutes_util</span><span class="o">.</span><span class="n">create_institute</span><span class="p">(</span><span class="n">institutename</span> <span class="o">=</span> <span class="s1">&#39;Demo Institute&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The same can be done with the function in <code class="docutils literal notranslate"><span class="pre">os_core.institutes.create_institute</span></code>. The difference is that in the os_core functions one has to hand over a
JSON-formatted string. This is more general, its useable with customized OpenSpecimen versions. But it is more difficult to use.
The code then looks like:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">institute</span> <span class="pre">=</span> <span class="pre">os_core.institute()</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">institute.create_institute(params</span> <span class="pre">=</span> <span class="pre">'{\&quot;institutename\&quot;:\&quot;Demo</span> <span class="pre">Institute\&quot;}')</span></code></div>
</div>
<p class="last">In general, the parameters which are passed to <strong>os_core</strong> functions have all to be known, this means the <em>entity-name</em>, the <em>value</em> and the <em>type</em>.
There are some parameters, which are itself <em>dicts</em>. The <strong>os_util</strong> functions have a <em>defined input</em>, with the <em>standard values</em> of OpenSpecimen
and the json-formatted string is generated automatically.</p>
</div>
</div>
<div class="section" id="creating-a-site">
<h2>Creating a Site<a class="headerlink" href="#creating-a-site" title="Permalink to this headline">¶</a></h2>
<p>If there is an institute, one can create a site. This works with the method <code class="docutils literal notranslate"><span class="pre">create_institute</span></code> from the <cite>os_util</cite> class <cite>site_util</cite>
as follows:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#initialize</span>
<span class="n">site_util</span> <span class="o">=</span> <span class="n">os_util</span><span class="o">.</span><span class="n">site_util</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">site_util</span><span class="o">.</span><span class="n">create_sites</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Demo Site&#39;</span><span class="p">,</span> <span class="n">institutename</span> <span class="o">=</span> <span class="s1">&#39; Demo Institute&#39;</span><span class="p">,</span> <span class="n">type_</span> <span class="o">=</span> <span class="s1">&#39;not specified&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-collection-protocol">
<h2>Creating a Collection Protocol<a class="headerlink" href="#creating-a-collection-protocol" title="Permalink to this headline">¶</a></h2>
<p>On a Site on can have a collection, which can be managed in OpenSpecimen. For that one can create a Collection Protocol, with the  method <code class="docutils literal notranslate"><span class="pre">create_collection_protocol</span></code>
from the <cite>os_util</cite> class <cite>colletion_protocol_util</cite>:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#initialize</span>
<span class="n">collection_protocol_util</span> <span class="o">=</span> <span class="n">os_util</span><span class="o">.</span><span class="n">collection_protocol_util</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">collection_protocol_util</span><span class="o">.</span><span class="n">create_cp</span><span class="p">(</span><span class="n">short_title</span> <span class="o">=</span> <span class="s1">&#39;Demo CP&#39;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Demo Collection Protocol&#39;</span><span class="p">,</span> <span class="n">pi_mail</span> <span class="o">=</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="n">sites</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Demo Site&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The response is a dict with the details of the created collection protocol. For example the ID of the Colletion protocol can be extracted with key ‘id’.
This will be used later and can be done as follows.</p>
<div class="last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">cpId</span> <span class="pre">=</span> <span class="pre">collection</span> <span class="pre">protocol</span> <span class="pre">ID</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">cpID</span> <span class="pre">=</span> <span class="pre">response['id']</span></code></div>
</div>
</div>
</div>
<div class="section" id="creating-a-registration">
<h2>Creating a Registration<a class="headerlink" href="#creating-a-registration" title="Permalink to this headline">¶</a></h2>
<p>Once there is a Collection Protocol OpenSpecimen is ready to Register Participants. The method <code class="docutils literal notranslate"><span class="pre">create_registration</span></code>, from the <cite>os_util</cite> class <cite>cpr_util</cite> does the job:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#initialize</span>
<span class="n">cpr_util</span> <span class="o">=</span> <span class="n">os_util</span><span class="o">.</span><span class="n">cpr_util</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">cpr_util</span><span class="o">.</span><span class="n">create_registration</span><span class="p">(</span><span class="n">regdate</span> <span class="o">=</span> <span class="s1">&#39;2021-03-17&#39;</span><span class="p">,</span> <span class="n">cpid</span> <span class="o">=</span> <span class="n">cpID</span><span class="p">,</span> <span class="n">ppid</span> <span class="o">=</span> <span class="s2">&quot;DemoPPID&quot;</span><span class="p">,</span><span class="n">lastname</span> <span class="o">=</span> <span class="s2">&quot;Sepp&quot;</span><span class="p">)</span>
<span class="n">cprID</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="c1">#is needed afterwards</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-specimen-together-with-a-visit">
<h2>Creating a Specimen together with a Visit<a class="headerlink" href="#creating-a-specimen-together-with-a-visit" title="Permalink to this headline">¶</a></h2>
<p>In order to create a <cite>specimen</cite>, there has to be a visit. OpenSpecimen provides a call which created both at ones. This is the method <code class="docutils literal notranslate"><span class="pre">add_visit_speci</span></code> from the
<cite>os_util</cite> class <cite>vis_util</cite>.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#initialize</span>
<span class="n">vis_util</span> <span class="o">=</span> <span class="n">os_util</span><span class="o">.</span><span class="n">vis_util</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">vis_util</span><span class="o">.</span><span class="n">add_visit_speci</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Demo Visit&#39;</span><span class="p">,</span> <span class="n">lineage</span> <span class="o">=</span> <span class="s1">&#39;New&#39;</span><span class="p">,</span> <span class="n">av_qty</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">user</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">init_qty</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">spec_class</span> <span class="o">=</span><span class="s1">&#39;Fluid&#39;</span><span class="p">,</span>
                <span class="n">spec_type</span> <span class="o">=</span> <span class="s1">&#39;Bile&#39;</span><span class="p">,</span> <span class="n">anat_site</span> <span class="o">=</span><span class="s1">&#39;Anal Canal&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;Malignant&#39;</span><span class="p">,</span> <span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;Demo Site&#39;</span><span class="p">,</span> <span class="n">speclabel</span> <span class="o">=</span> <span class="s1">&#39;Demo Label&#39;</span> <span class="p">,</span><span class="n">cpid</span> <span class="o">=</span> <span class="n">cpID</span><span class="p">,</span>
                 <span class="n">ppid</span> <span class="o">=</span> <span class="s1">&#39;Demo PPID&#39;</span><span class="p">,</span> <span class="n">cprid</span> <span class="o">=</span> <span class="s1">&#39;cprID, colltime = &#39;</span><span class="mi">2021</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">17</span><span class="s1">&#39; ,rectime = &#39;</span><span class="mi">2021</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">17</span><span class="s1">&#39; )</span>

<span class="c1">#the user admin, which is created from OpenSpecimen when it is installed,  has the ID 2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If one knows the visits before which gets collected, then one can first create an <strong>event</strong>, then add the visit to the event and after that collect the specimen</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Christian Schorn, Simon Streit.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>