

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>OpenSpecimenAPIconnector.os_util package &mdash; OpenSpecimenAPIConnector 0.9.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../contents.html" class="icon icon-home"> OpenSpecimenAPIConnector
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">OpenSpecimenAPIconnector.os_util package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.aggregated_fields">OpenSpecimenAPIconnector.os_util.aggregated_fields module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.bulk_operations">OpenSpecimenAPIconnector.os_util.bulk_operations module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.collection_protocol_util">OpenSpecimenAPIconnector.os_util.collection_protocol_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.cpevent_util">OpenSpecimenAPIconnector.os_util.cpevent_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.cpr_util">OpenSpecimenAPIconnector.os_util.cpr_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.csv_exp_util">OpenSpecimenAPIconnector.os_util.csv_exp_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.institute_util">OpenSpecimenAPIconnector.os_util.institute_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.query_util">OpenSpecimenAPIconnector.os_util.query_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.site_util">OpenSpecimenAPIconnector.os_util.site_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.specimen_util">OpenSpecimenAPIconnector.os_util.specimen_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.users_util">OpenSpecimenAPIconnector.os_util.users_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util.visit_util">OpenSpecimenAPIconnector.os_util.visit_util module</a></li>
<li><a class="reference internal" href="#module-OpenSpecimenAPIconnector.os_util">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">OpenSpecimenAPIConnector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>OpenSpecimenAPIconnector.os_util package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/source/OpenSpecimenAPIconnector.os_util.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="openspecimenapiconnector-os-util-package">
<h1>OpenSpecimenAPIconnector.os_util package<a class="headerlink" href="#openspecimenapiconnector-os-util-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.aggregated_fields">
<span id="openspecimenapiconnector-os-util-aggregated-fields-module"></span><h2>OpenSpecimenAPIconnector.os_util.aggregated_fields module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.aggregated_fields" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.aggregated_fields.aggregator">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.aggregated_fields.</code><code class="descname">aggregator</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/aggregated_fields.html#aggregator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.aggregated_fields.aggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.aggregated_fields.aggregator.extract_age_fields">
<code class="descname">extract_age_fields</code><span class="sig-paren">(</span><em>cp_csv</em>, <em>cp_data</em>, <em>cp_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/aggregated_fields.html#aggregator.extract_age_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.aggregated_fields.aggregator.extract_age_fields" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.aggregated_fields.aggregator.run_aggregation">
<code class="descname">run_aggregation</code><span class="sig-paren">(</span><em>sel_schema</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/aggregated_fields.html#aggregator.run_aggregation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.aggregated_fields.aggregator.run_aggregation" title="Permalink to this definition">¶</a></dt>
<dd><p>General purpose aggreation for fields in attached forms
under developement.
TODO: See which entities are stored with extension detail
-
and where to use’’–_’</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.bulk_operations">
<span id="openspecimenapiconnector-os-util-bulk-operations-module"></span><h2>OpenSpecimenAPIconnector.os_util.bulk_operations module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.bulk_operations" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.bulk_operations.bulk_operations">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.bulk_operations.</code><code class="descname">bulk_operations</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/bulk_operations.html#bulk_operations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.bulk_operations.bulk_operations" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the OpenSpecimen CSV Bulk Importer via API.</p>
<p>Handles the API calls of the OpenSpecimen’s Bulk Importer for all the different schemas.
This class makes and executes an Import JOB.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The OpenSpecimen Documentation of Bulk Import can be seen at
<a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/440434702/Bulk+Import+via+API">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/440434702/Bulk+Import+via+API</a> .</p>
</div>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.bulk_operations.bulk_operations.bulk_import">
<code class="descname">bulk_import</code><span class="sig-paren">(</span><em>file</em>, <em>filename</em>, <em>schemaname</em>, <em>operation='CREATE'</em>, <em>dateformat=None</em>, <em>timeformat=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/bulk_operations.html#bulk_operations.bulk_import"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.bulk_operations.bulk_operations.bulk_import" title="Permalink to this definition">¶</a></dt>
<dd><p>Make and Run a CSV-bulk import job</p>
<p>Make a JOB, precisely upload a file to OpenSpecimen, extract the file-ID token from this return
and then execute it with the right schema and operation (Create or Update). To use this function one has to
know which entity should be created or updated and which fields are mandatory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file</strong> (<em>binary</em>) – The file to upload, is a CSV-file with separator ‘,’.</li>
<li><strong>filename</strong> (<em>string</em>) – Name of the file with ending (.csv)</li>
<li><strong>schemaname</strong> (<em>string</em>) – The schemaname in OpenSpecimen with permissable values are: cp, cpr, user, userRoles,
site, shipment, institute, dpRequirement, distributionProtocol, distributionorder,
storagecontainer, storagecontainerType, containerShipment, cpe, masterSpecimen, participant,
sr, visit, specimenAliquot, specimenDerivative, specimendisposal, consent</li>
<li><strong>operation</strong> (<em>string</em>) – String with Information if the file updates data or create it. Default value = ‘CREATE’.
Permissable values are CREATE or UPDATE</li>
<li><strong>dateformat</strong> (<em>string</em>) – If another dateformat than in the OpenSpecimen System configuration is taken, this has to be specified.</li>
<li><strong>timeformat</strong> (<em>string</em>) – If another timeformat than in the OpenSpecimen System configuration is taken, this has to be specified.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Data Frame with label, OS_IMPORT_STATUS OS_IMPORT_MESSAGE as column headers.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Pandas DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.collection_protocol_util">
<span id="openspecimenapiconnector-os-util-collection-protocol-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.collection_protocol_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.collection_protocol_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.collection_protocol_util.</code><code class="descname">collection_protocol_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/collection_protocol_util.html#collection_protocol_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Utility class for Site API calls</p>
<p>This class handles the API calls for OpenSpecimen Collection Protocol. It can create, update,
search  and merge  Protocols.
The output is a JSON dict or the Error message as JSON dict, except the Pandas dataframe.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen. In the core classes one can
just pass the parameters via JSON-formatted string. This means the user has to know the keywords.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<p>A code Examples, where the Collection protocols are handled is in the Jupyter-Notebook</p>
<blockquote>
<div>$ jupyter notebook main.ipynb</div></blockquote>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util.create_cp">
<code class="descname">create_cp</code><span class="sig-paren">(</span><em>short_title</em>, <em>title</em>, <em>pi_mail</em>, <em>sites</em>, <em>time_start=None</em>, <em>time_end=None</em>, <em>man_id=None</em>, <em>coords=None</em>, <em>consentsWaived=None</em>, <em>eth_cons_id=None</em>, <em>part_no=None</em>, <em>desc_url=None</em>, <em>visitNameFmt=None</em>, <em>specimenLabelFmt=None</em>, <em>derivativeLabelFmt=None</em>, <em>man_visit_name=None</em>, <em>man_spec_label=None</em>, <em>aliquots_in_same=None</em>, <em>activity=None</em>, <em>aliquotLabelFmt=None</em>, <em>ppidFmt=None</em>, <em>specimenCentric=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/collection_protocol_util.html#collection_protocol_util.create_cp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util.create_cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Collection protocol with the given Parameters</p>
<p>Create a collection protocol with the Parameters passed to the function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>short_title</strong> (<em>string</em>) – Short title of the Collection Protocol.</li>
<li><strong>title</strong> (<em>string</em>) – Title of the Collection Protocol.</li>
<li><strong>pi_mail</strong> (<em>string</em>) – Email Address of the Principal Investigator.</li>
<li><strong>time_start</strong> (<em>string</em>) – String with the start_time of the collection Protocol in the timeformat specified in the System configuration.</li>
<li><strong>time_end</strong> (<em>string</em>) – String with the end_time of the collection Protocol in the timeformat specified in the System configuration.</li>
<li><strong>sites</strong> (<em>list</em>) – Sites which are assigned to the collection Protocl.</li>
<li><strong>man_id</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false if the manual PPID creation is enabled.</li>
<li><strong>coords</strong> (<em>dict</em>) – dict with Coordinators and coordinator ids in it.</li>
<li><strong>consentsWaived</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false if consent should be waived.</li>
<li><strong>eth_cons_id</strong> (<em>string</em>) – Ethical aproavel id.</li>
<li><strong>part_no</strong> (<em>string</em>) – String with number of anticipated Participant count.</li>
<li><strong>desc_url = string</strong> – URL with the decription of the Collection Protocol.</li>
<li><strong>visitNameFMT</strong> (<em>string</em>) – String which contains the OpenSpecimen’s token for creating Visit Names automatically.</li>
<li><strong>man_visit_name</strong> (<em>string</em>) – String with OpenSpecimen’s boolean format if the Visits should be created manually.</li>
<li><strong>man_spec_label</strong> (<em>string</em>) – String with OpenSpecimen’s boolean format if the Specimen Labels should be created manually.</li>
<li><strong>man_spec_label</strong> (<em>string</em>) – String with OpenSpecimen’s boolean format if the Aliquotes are stored in the same Container.</li>
<li><strong>activity</strong> (<em>string</em>) – String with the acitivity status of the Specimen.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the created Collection Protocol, or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util.merge_cps">
<code class="descname">merge_cps</code><span class="sig-paren">(</span><em>src_cp</em>, <em>trg_cp</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/collection_protocol_util.html#collection_protocol_util.merge_cps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util.merge_cps" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge two Collection protocols</p>
<p>Merge two Colelction Protocols which are defined in src_cp and trg_cp together. To call this function the short titles of
the source and target collection protocol has to be known. The merged Protocol is the one with short title tgtCpShortTitle,
with merge logic outer.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Merging is restricted to Super Admins. The CPs must have the same format for PPI, visits and specimens. Or the target CP
has no specific formats.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>src_cp</strong> (<em>string</em>) – String with the shortTitle of the source collection Protocol.</li>
<li><strong>trgcp</strong> (<em>string</em>) – String with the shortTitle of the target collection Protocol.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">JSON dict with the short titles of the source and target Colelction Protocols.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util.search_cps">
<code class="descname">search_cps</code><span class="sig-paren">(</span><em>searchstring=None</em>, <em>title=None</em>, <em>piid=None</em>, <em>reponame=None</em>, <em>startat=None</em>, <em>maxresults=None</em>, <em>detailedlist=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/collection_protocol_util.html#collection_protocol_util.search_cps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util.search_cps" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for Colelction Protocols with specific values.</p>
<p>Search for one or more Collection Protocols with the search_string defined. The search string looks like:
http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/collection-protocols?{param_1}={value_1}&amp;…&amp;{param_x}={value_x}
With the class collection_protocol_util from os_util and function &lt;search_cps&gt; the search string is generated
and this function is called. Not all keys from OpenSpecimen can be easily searched after.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>search_string</strong> (<em>string</em>) – openSpecimen’s Advanced Query Language[optional]. Substring of the title or shorttitle</li>
<li><strong>title</strong> (<em>string</em>) – Name of the desired Collection Protocol</li>
<li><strong>ppid</strong> (<em>string or int</em>) – Id of the Pricincipal Investigator, gets converted to a string[optional].</li>
<li><strong>reponame</strong> (<em>string</em>) – Name of the Repository in which the Collection Protocol is[optional].</li>
<li><strong>startat</strong> (<em>int</em>) – Value which one of the outcomes is the first to show, if not specified OpenSpecimen takes 0.</li>
<li><strong>maxresults</strong> (<em>int</em>) – Value how many Collection Protocols are shown, if not specified OpenSpecimen takes 100.</li>
<li><strong>detailedList</strong> (<em>string</em>) – String in OpenSpecimen’s boolean format, permissable values are true/false. If not specified, OpenSpecimen takes false.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">[Details of the matching Collection Protocols, if no one matches it is an empty list.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util.update_cp">
<code class="descname">update_cp</code><span class="sig-paren">(</span><em>cpid</em>, <em>short_title=None</em>, <em>title=None</em>, <em>pi_mail=None</em>, <em>time_start=None</em>, <em>time_end=None</em>, <em>sites=None</em>, <em>man_id=False</em>, <em>coords=None</em>, <em>consentsWaived=None</em>, <em>eth_cons_id=None</em>, <em>part_no=None</em>, <em>desc_url=None</em>, <em>visitNameFmt=None</em>, <em>specimenLabelFmt=None</em>, <em>derivativeLabelFmt=None</em>, <em>man_visit_name=False</em>, <em>man_spec_label=True</em>, <em>aliquots_in_same=None</em>, <em>activity=None</em>, <em>aliquotLabelFmt=None</em>, <em>ppidFmt=None</em>, <em>specimenCentric=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/collection_protocol_util.html#collection_protocol_util.update_cp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.collection_protocol_util.collection_protocol_util.update_cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a Collection protocol with the given Parameters.</p>
<p>Update a collection protocol with the Parameters passed to the function. The Collection protocol ID
cpid is mandatory.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The parameters except cpid are mandatory. All values not passed will not get changed.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cpid</strong> (<em>int</em>) – ID of the Colelction Protocol which should get updated.</li>
<li><strong>short_title</strong> (<em>string</em>) – Short title of the Collection Protocol.</li>
<li><strong>title</strong> (<em>string</em>) – Title of the Collection Protocol.</li>
<li><strong>pi_mail</strong> (<em>string</em>) – Email Address of the Principal Investigator.</li>
<li><strong>time_start</strong> (<em>string</em>) – String with the start_time of the collection Protocol in the timeformat specified in the System configuration.</li>
<li><strong>time_end</strong> (<em>string</em>) – String with the end_time of the collection Protocol in the timeformat specified in the System configuration.</li>
<li><strong>sites</strong> (<em>list</em>) – Sites which are assigned to the Collection Protocl.</li>
<li><strong>man_id</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false if the manual PPID creation is enabled.</li>
<li><strong>coords</strong> (<em>dict</em>) – dict with Coordinators and coordinator ids in it.</li>
<li><strong>consentsWaived</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false if consent should be waived.</li>
<li><strong>eth_cons_id</strong> (<em>string</em>) – Ethical aproavel id.</li>
<li><strong>part_no</strong> (<em>string</em>) – String with number of anticipated Participant count.</li>
<li><strong>desc_url = string</strong> – URL with the decription of the Collection Protocol.</li>
<li><strong>visitNameFMT</strong> (<em>string</em>) – String which contains the OpenSpecimen’s token for creating Visit Names automatically.</li>
<li><strong>man_visit_name</strong> (<em>string</em>) – String with OpenSpecimen’s boolean format if the Visits should be created manually.</li>
<li><strong>man_spec_label</strong> (<em>string</em>) – String with OpenSpecimen’s boolean format if the Specimen Labels should be created manually.</li>
<li><strong>man_spec_label</strong> (<em>string</em>) – String with OpenSpecimen’s boolean format if the Aliquotes are stored in the same Container.</li>
<li><strong>activity</strong> (<em>string</em>) – String with the acitivity status of the Specimen.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the created Collection Protocol, or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.cpevent_util">
<span id="openspecimenapiconnector-os-util-cpevent-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.cpevent_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.cpevent_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.cpevent_util.cpevent_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.cpevent_util.</code><code class="descname">cpevent_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpevent_util.html#cpevent_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpevent_util.cpevent_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the Events of corresponding to a Collection Protocol</p>
<p>This class allows you to handle the events in Openspecimen. One can create an event,
but first the corresponding Collection Protocol has to be created, for Examples via os_core.collection_protocol.py.
or one can update an existing event. The other calls are in the os_core class collection_protocol_event.py.
The output is a JSON dict with either details or the Openspecimen error message.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<p>A code Examples, where also events are handled is in the Jupyter-Notebook</p>
<p>$ jupyter notebook main.ipynb</p>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.cpevent_util.cpevent_util.create_event">
<code class="descname">create_event</code><span class="sig-paren">(</span><em>label</em>, <em>point</em>, <em>cp</em>, <em>site</em>, <em>diagnosis</em>, <em>status</em>, <em>activity</em>, <em>unit</em>, <em>code=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpevent_util.html#cpevent_util.create_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpevent_util.cpevent_util.create_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an event for a given Collection Protocol.</p>
<p>Create an event for a given Collection Protocol. Details of the parameters can be found in
the parameters section.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>label</strong> (<em>string</em>) – Label of the Event, has to be unique.</li>
<li><strong>point</strong> (<em>string or int</em>) – Starting Point of the event, Value + unit (e.g. DAYS).</li>
<li><strong>cp</strong> (<em>string</em>) – title of the collection protocol.</li>
<li><strong>site</strong> (<em>string</em>) – The default Site of the event.</li>
<li><strong>diagnosis</strong> (<em>string</em>) – Defines the permissable values of the diagnosis.</li>
<li><strong>status</strong> (<em>string</em>) – Defines the permissable values of the clinical status.</li>
<li><strong>acitivity</strong> (<em>string</em>) – Defines the activity status of the event.</li>
<li><strong>unit</strong> (<em>string</em>) – Defines which unit has the starting point.</li>
<li><strong>code</strong> (<em>string</em>) – the event code, is optional. In order to define condionals in the workflow, one needs the event code.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Returns a json dict with the details of the created event, or the OpenSpecimen error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">json dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.cpevent_util.cpevent_util.update_event">
<code class="descname">update_event</code><span class="sig-paren">(</span><em>eventid</em>, <em>label=None</em>, <em>point=None</em>, <em>cp=None</em>, <em>site=None</em>, <em>diagnosis=None</em>, <em>status=None</em>, <em>activity=None</em>, <em>unit=None</em>, <em>code=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpevent_util.html#cpevent_util.update_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpevent_util.cpevent_util.update_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Update an event for a given Collection Protocol.</p>
<p>Update an event for a given Collection Protocol. To use this function one has to know the eventid,
it can for Examples be seen in the URL, if one click on the event in the GUI. The URL looks like:
http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/#/cps/{CollectionProtocolId}/specimen-requirements?eventId={eventid}
For Examples, one can extract the eventid with an event-key from OpenSpecimen, when first the function
“get_all_events(self, cpid)” for a specific Collection Protocol, with the Collection Protocol ID is called.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All parameters except the eventid are optional. If they are not passed to the function they stay the same as before.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>eventid</strong> (<em>int</em>) – The ID of the event. Gets converted to a string.</li>
<li><strong>label</strong> (<em>string</em>) – Label of the event, has to be unique.</li>
<li><strong>point</strong> (<em>int</em>) – Starting Point of the event, Value + unit (e.g. DAYS).</li>
<li><strong>cp</strong> (<em>string</em>) – title of the collection protocol.</li>
<li><strong>site</strong> (<em>string</em>) – The default Site of the event.</li>
<li><strong>diagnosis</strong> (<em>string</em>) – Defines the permissable values of the diagnosis.</li>
<li><strong>status</strong> (<em>string</em>) – Defines the permissable values of the clinical status.</li>
<li><strong>acitivity</strong> (<em>string</em>) – Defines the activity status of the event.</li>
<li><strong>unit</strong> (<em>string</em>) – Defines which unit has the starting point.</li>
<li><strong>code</strong> (<em>string</em>) – the event code, is optional. In order to define condionals in the workflow, one needs the event code.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Returns a json dict with the details of the created event, or the OpenSpecimen error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">json dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.cpr_util">
<span id="openspecimenapiconnector-os-util-cpr-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.cpr_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.cpr_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.cpr_util.</code><code class="descname">cpr_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpr_util.html#cpr_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the API calls to registrate participants to a Collection Protocol</p>
<p>Handles the OpenSpecimen API calls to registrate participants to an existing Collection Protocol.
This class can create participants, register existing participants to another protocol,
get the details of an existing participant or more existing participants, update a participant.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<p>A code Examples, where the Institutes are handled is in the Jupyter-Notebook:</p>
<blockquote>
<div>$ jupyter notebook main.ipynb</div></blockquote>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.create_registration">
<code class="descname">create_registration</code><span class="sig-paren">(</span><em>regdate</em>, <em>cpid=None</em>, <em>cptitle=None</em>, <em>cpshorttitle=None</em>, <em>ppid=None</em>, <em>firstname=None</em>, <em>middlename=None</em>, <em>lastname=None</em>, <em>uid=None</em>, <em>birthdate=None</em>, <em>vitalstatus=None</em>, <em>deathdate=None</em>, <em>gender=None</em>, <em>race=None</em>, <em>ethnicities=None</em>, <em>sexgenotype=None</em>, <em>pmis=None</em>, <em>mrn=None</em>, <em>sitename=None</em>, <em>empi=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpr_util.html#cpr_util.create_registration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.create_registration" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a participant to a Collection Protocol.</p>
<p>This function can create a new participant to an already existing Collection Protocol. To use this function one
has to known either the Collection Protocoll id &lt;cpId&gt;,the title of the Collection Protocol &lt;cpTitle&gt; or
the short title of the Collection Protocol &lt;cpshorttitle&gt; .
Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
collection_protocol_util in os_util.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Either cpid or cptitle or cpshorttitle are mandatory to identify the Collection Protocol.
ppid has to be left empty if PPID is auto-generated at protocol level, else it is mandatory.
regdate is mandatory.
For creating a Participant, all Participant fields can be left empty, except the first five have special rules.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>regdate</strong> (<em>string</em>) – Mandatory field with date of registration in the format which is defined in the systemsettings of OpenSpecimen.</li>
<li><strong>cpid</strong> (<em>int</em>) – Unique ID of the Collection Protocol, which is autogenerated from OpenSpecimen. cpid or cptitle or cpshorttile is mandatory.</li>
<li><strong>cptitle</strong> (<em>string</em>) – Unique title of the Collection Protocol. cpid or cptitle or cpshorttile is mandatory.</li>
<li><strong>cpshorttitle</strong> (<em>string</em>) – Unique Acronym of the Collection Protocol. cpid or cptitle or cpshorttile is mandatory.</li>
<li><strong>ppid</strong> (<em>string</em>) – Participant protocol ID, is mandatory if created manually and have to be empty if it is autogenerated.
This is a protocol setting.</li>
<li><strong>firstname</strong> (<em>string</em>) – Participants first name.</li>
<li><strong>middlename</strong> (<em>string</em>) – Participants middle name.</li>
<li><strong>lastname</strong> (<em>string</em>) – Participants last name.</li>
<li><strong>uid</strong> (<em>string</em>) – Unique identifier e.g. social security number.</li>
<li><strong>birthdate</strong> (<em>string</em>) – Birthdate in the format which is defined in the systemsettings of OpenSpecimen.</li>
<li><strong>vitalstatus</strong> (<em>string</em>) – Vital status of the Participant.</li>
<li><strong>deathdate</strong> (<em>string</em>) – Deathdate in the format which is defined in the systemsettings of OpenSpecimen.</li>
<li><strong>gender</strong> (<em>string</em>) – Gender of the participant, permissable values are Male, Female, Unknown, Unspecified.</li>
<li><strong>race</strong> (<em>string</em>) – Participants racial origination, permissable values are {American Indian or Alaska Native, Asian, Black or Afro American, Native Hawaiian
or other Pacific Islander, Not Reported, Unknown, White}</li>
<li><strong>ethnicities</strong> (<em>string</em>) – Participants ethnicities, permissable values are: {Hispanic or Latino, Not Hispanic or Latino, Not Reported, Unknown}</li>
<li><strong>sexgenotype</strong> (<em>string</em>) – Participants sex Genotype, permissable values are {XX Genotype, XY Genotype, XXX, Klinefelter’s Syndrome, XXXY syndrome,
XXYY syndrome, Mosaic including XXXXY, Penta X syndrome}</li>
<li><strong>pmis</strong> (<em>string</em>) – Collection of the Participants medical record number.</li>
<li><strong>mrn</strong> (<em>string</em>) – Participants medical record number.</li>
<li><strong>sitename</strong> (<em>string</em>) – Name of the site, where the participant is registered.</li>
<li><strong>empi</strong> (<em>string</em>) – Enterprise master patient index number</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the created Participant or the OpenSpecimen error message as Dictionary.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.get_participants">
<code class="descname">get_participants</code><span class="sig-paren">(</span><em>lastname=None</em>, <em>uid=None</em>, <em>birthdate=None</em>, <em>pmi=None</em>, <em>empi=None</em>, <em>reqreginfo=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpr_util.html#cpr_util.get_participants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.get_participants" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for one or more participants</p>
<p>Get the details of one or more participants, which are sepecified with the parameters from the function.
The parameters are optional and if its all empty 100 participants will get returned, default order is with PPID.
This function should be used before creating a participant to see if a participant is already in the system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lastname</strong> (<em>string</em>) – Substring of the Lastname of a Participant.</li>
<li><strong>uid</strong> (<em>string</em>) – Country specific unique social security number.</li>
<li><strong>birthdate</strong> (<em>string</em>) – The date of registration in the format, which is defined in the system settings.</li>
<li><strong>pmi</strong> (<em>dict</em>) – Dict with details of the Medical records number mrn and the assigned site with key siteName.</li>
<li><strong>empi</strong> (<em>string</em>) – Enterprise wide unique ID assigned to the participant.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>reqreginfo <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>OpenSpecimen’s boolean (true/false). If true, it returns details of the participant</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Details of the matching Parameters, if reqreginfo is true, return additional the participant info.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">JSON-dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.get_registrations">
<code class="descname">get_registrations</code><span class="sig-paren">(</span><em>cpid=None</em>, <em>registrationdate=None</em>, <em>ppid=None</em>, <em>name=None</em>, <em>birthdate=None</em>, <em>uid=None</em>, <em>specimen=None</em>, <em>includestats=None</em>, <em>startat=None</em>, <em>maxresults=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpr_util.html#cpr_util.get_registrations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.get_registrations" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for one or more participants</p>
<p>Get the details of one or more participants, which are sepecified with the parameters from the function.
The parameters are optional and if its all empty 100 participants will get returned, default order is with PPID.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cpid</strong> (<em>int</em>) – The collection protocols Id where the participant is registrered.</li>
<li><strong>registrationdate</strong> (<em>string</em>) – The date of registration in the format, which is defined in the system settings.</li>
<li><strong>ppid</strong> (<em>string</em>) – The Participant protocoll ID.</li>
<li><strong>name</strong> (<em>string</em>) – Substring of the first, middle or last name.</li>
<li><strong>birthdate</strong> (<em>string</em>) – The date of registration in the format, which is defined in the system settings.</li>
<li><strong>uid</strong> (<em>string</em>) – Social Security Number or another unique national ID.</li>
<li><strong>specimen</strong> (<em>string</em>) – The label or barcode of a specimen from the participant.</li>
<li><strong>includestats</strong> (<em>string</em>) – OpenSpecimen’s boolean (true/false). If true, it returns the number of specimens and visits.</li>
<li><strong>startat</strong> (<em>int</em>) – Defines which line of the matches is the first to show, the rows before get ignored in the return.</li>
<li><strong>maxresults</strong> (<em>int</em>) – Defines how many rows should be displayed. OpenSpecimen’s default is 100.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the Participant, who are matching the search criteria.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.register_to_cp">
<code class="descname">register_to_cp</code><span class="sig-paren">(</span><em>cprid</em>, <em>regdate</em>, <em>cpid</em>, <em>ppid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpr_util.html#cpr_util.register_to_cp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.register_to_cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a Participant to another protocol</p>
<p>Register an existing Participant to another Collection protocol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cprid</strong> (<em>int</em>) – Unique ID of the Participant’s Registration.</li>
<li><strong>regdate</strong> (<em>string</em>) – Date of the registration.</li>
<li><strong>cpid</strong> (<em>int</em>) – Unique ID of the Collection Protocol, which is autogenerated from OpenSpecimen. cpid or cptitle or cpshorttile is mandatory.</li>
<li><strong>ppid</strong> (<em>string</em>) – Participant protocol ID, is mandatory if created manually and has to be empty if it is autogenerated.
This is a protocol setting.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">JSON-dict with details of the new participant, or the OS specific error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.update_registration">
<code class="descname">update_registration</code><span class="sig-paren">(</span><em>regdate</em>, <em>cprid</em>, <em>id_</em>, <em>cpid=None</em>, <em>cptitle=None</em>, <em>cpshorttitle=None</em>, <em>ppid=None</em>, <em>firstname=None</em>, <em>middlename=None</em>, <em>lastname=None</em>, <em>uid=None</em>, <em>birthdate=None</em>, <em>vitalstatus=None</em>, <em>deathdate=None</em>, <em>gender=None</em>, <em>race=None</em>, <em>ethnicities=None</em>, <em>sexgenotype=None</em>, <em>pmis=None</em>, <em>mrn=None</em>, <em>sitename=None</em>, <em>empi=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/cpr_util.html#cpr_util.update_registration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.cpr_util.cpr_util.update_registration" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a Participant to a Collection Protocol.</p>
<p>This function can create a new participant to an already existing Collection Protocol. To use this function one
has to know either the Collection Protocoll id &lt;cpId&gt;,the title of the Collection Protocol &lt;cpTitle&gt; or
the short title of the Collection Protocol &lt;cpshorttitle&gt; .
Those values can be seen via GUI, extracted from the responses with the class collection_protocol in os_core or
collection_protocol_util in os_util.  For updating a participant the cprid has to be known. This can be seen via GUI
or with searching the participant first.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Either cpid or cptitle or cpshorttitle are mandatory to identify the Collection Protocol.
ppid has to be left empty, if PPID is auto-generated at protocol level, else it is mandatory.
regdate is mandatory.
For creating a participant, all participant fields can be left empty, except the first five have special rules.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>regdate</strong> (<em>string</em>) – Mandatory field with date of registration in the format which is defined in the systemsettings of OpenSpecimen.</li>
<li><strong>cprid</strong> (<em>int</em>) – Unique ID of the Participant’s Registration.</li>
<li><strong>cpid</strong> (<em>int</em>) – Unique ID of the Collection Protocol, which is autogenerated from OpenSpecimen. cpid or cptitle or cpshorttile is mandatory.</li>
<li><strong>cptitle</strong> (<em>string</em>) – Unique title of the Collection Protocol. cpid or cptitle or cpshorttile is mandatory.</li>
<li><strong>cpshorttitle</strong> (<em>string</em>) – Unique Acronym of the Collection Protocol. cpid or cptitle or cpshorttile is mandatory.</li>
<li><strong>ppid</strong> (<em>string</em>) – Participant protocol ID, is mandatory if created manually and has to be empty if it is autogenerated.
This is a protocol setting.</li>
<li><strong>firstname</strong> (<em>string</em>) – Participants first name.</li>
<li><strong>middlename</strong> (<em>string</em>) – Participants middle name.</li>
<li><strong>lastname</strong> (<em>string</em>) – Participants last name.</li>
<li><strong>uid</strong> (<em>string</em>) – Unique identifier e.g. social security number.</li>
<li><strong>birthdate</strong> (<em>string</em>) – Birthdate in the format which is defined in the systemsettings of OpenSpecimen.</li>
<li><strong>vitalstatus</strong> (<em>string</em>) – Vital status of the Participant.</li>
<li><strong>deathdate</strong> (<em>string</em>) – Deathdate in the format which is defined in the systemsettings of OpenSpecimen.</li>
<li><strong>gender</strong> (<em>string</em>) – Gender of the participant, permissable values are Male, Female, Unknown, Unspecified.</li>
<li><strong>race</strong> (<em>string</em>) – Participants racial origination, permissable values are {American Indian or Alaska Native, Asian, Black or Afro American, Native Hawaiian
or other Pacific Islander, Not Reported, Unknown, White}</li>
<li><strong>ethnicities</strong> (<em>string</em>) – Participants ethnicities, permissable values are: {Hispanic or Latino, Not Hispanic or Latino, Not Reported, Unknown}</li>
<li><strong>sexgenotype</strong> (<em>string</em>) – Participants sex Genotype, permissable values are {XX Genotype, XY Genotype, XXX, Klinefelter’s Syndrome, XXXY syndrome,
XXYY syndrome, Mosaic including XXXXY, Penta X syndrome}</li>
<li><strong>pmis</strong> (<em>string</em>) – Collection of the Participants medical record number.</li>
<li><strong>mrn</strong> (<em>string</em>) – Participants medical record number.</li>
<li><strong>sitename</strong> (<em>string</em>) – Name of the site, where the participant is registered.</li>
<li><strong>empi</strong> (<em>string</em>) – Enterprise master patient index number.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the updated Participant or the OpenSpecimen error message as Dictionary.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.csv_exp_util">
<span id="openspecimenapiconnector-os-util-csv-exp-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.csv_exp_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.csv_exp_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.csv_exp_util.</code><code class="descname">csv_exporter</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/csv_exp_util.html#csv_exporter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the export of CSV files from open specimen for different entities like collection protocols, specimens etc etc.</p>
<p>This class handles the CSV export of various different entities and creates CSV files of the requested entities like collection protocols, institutes etc.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<p>A code Examples, where the Institutes are handled is in the Jupyter-Notebook:</p>
<p>$ jupyter notebook main.ipynb</p>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter.csv_export">
<code class="descname">csv_export</code><span class="sig-paren">(</span><em>objecttype</em>, <em>recordids=None</em>, <em>cpid=None</em>, <em>ppids=None</em>, <em>entitytype=None</em>, <em>formname=None</em>, <em>specimenlabels=None</em>, <em>csv=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/csv_exp_util.html#csv_exporter.csv_export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.csv_exp_util.csv_exporter.csv_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Export CV for entity collection protocol</p>
<p>Export function for collection protocols</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>objecttype</strong> (<em>string</em>) – Identifying the general object to be exported.
Permissible Values: institute, site, user, cpr, specimen, extensions, storageContainer</li>
<li><strong>recordids</strong> (<em>list or string</em>) – Comma seperated list of record ids for fetching selected entries by their identifier. (Sites, Institutes, Users and Containers)</li>
<li><strong>cp_id</strong> (<em>string</em>) – Collection protocol id of export target not neccesary for objects higher in the hierachy like institue or site.
For all others it can be specified or set to -1 which means all data in the system.</li>
<li><strong>ppids</strong> (<em>list or string</em>) – List of comma seperated participant identifiers; String if its a singular participant to be exported
Used in combination with specimen object type as a parameter</li>
<li><strong>entitytype</strong> (<em>string</em>) – Paramter defining the entity for data extraction (e.g. attached form at participant level)
used with the extension object type</li>
<li><strong>formname</strong> (<em>string</em>) – Defines the form to be downloaded in context of the extension object type together with the specified entity</li>
<li><strong>specimenlabels</strong> (<em>list or string</em>) – List of comma seperated specimen identifiers or str if its a singular specimen to be exported</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>job</strong> – Returns the csv file as Pandas data frame or CSV binary string</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Pandas DataFrame or CSV binary File</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.institute_util">
<span id="openspecimenapiconnector-os-util-institute-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.institute_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.institute_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.institute_util.institutes_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.institute_util.</code><code class="descname">institutes_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/institute_util.html#institutes_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.institute_util.institutes_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the API calls for the institutes</p>
<p>Handles the OpenSpecimen API calls for the institutes. This class can
create, and update institutes. The other calls are in the os_core class institutes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<p>A code Examples, where the institutes are handled is in the Jupyter-Notebook:</p>
<blockquote>
<div>$ jupyter notebook main.ipynb</div></blockquote>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.institute_util.institutes_util.create_institute">
<code class="descname">create_institute</code><span class="sig-paren">(</span><em>institutename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/institute_util.html#institutes_util.create_institute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.institute_util.institutes_util.create_institute" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an Institute.</p>
<p>Creates an Institute in OpenSpecimen.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>institutename</strong> (<em>string</em>) – the name of the institute.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.query_util">
<span id="openspecimenapiconnector-os-util-query-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.query_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.query_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.query_util.query_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.query_util.</code><code class="descname">query_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/query_util.html#query_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.query_util.query_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the API calls for the queries</p>
<p>Handles the OpenSpecimen API calls for the queries. This class can
create, execute, search for queries.  The other calls are in the os_core class query.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<p>A code Examples, where the queries are handled is in the Jupyter-Notebook:</p>
<blockquote>
<div>$ jupyter notebook main.ipynb</div></blockquote>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.query_util.query_util.create_aql">
<code class="descname">create_aql</code><span class="sig-paren">(</span><em>cpid</em>, <em>aql</em>, <em>rowmode='OFF'</em>, <em>columnexpr='true'</em>, <em>isodate='true'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/query_util.html#query_util.create_aql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.query_util.query_util.create_aql" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Query in OpenSpecimen</p>
<p>Creates a Query which is stored in the Queries in OpenSpecimen. The query language
can be extracted from the OpenSpecimen GUI query generator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cpid</strong> (<em>int</em>) – The collection Protocol ID  where the query gets assigned to.</li>
<li><strong>aql</strong> (<em>string</em>) – Command to execute in the OpenSpecimen’s Advanced Query Language.</li>
<li><strong>rowmode</strong> (<em>string</em>) – Permissable Values OFF/SHALLOW/DEEP. Specify if multi-valued attributes result in a single row or one row per value.</li>
<li><strong>columnexpr</strong> (<em>string</em>) – Permissable values true/false. If true Userfriendly column labels are included in the response.</li>
<li><strong>isodate</strong> (<em>string</em>) – Permissable values are true/false. If true, the API accepts a ISO-date-format(yyy-MM-dd’T’HH:mm:ss), or else it takes the format from the OS local settings.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the saved query or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.query_util.query_util.execute_query">
<code class="descname">execute_query</code><span class="sig-paren">(</span><em>qryid</em>, <em>start='0'</em>, <em>results='100'</em>, <em>rowmode='OFF'</em>, <em>drivingform='Participant'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/query_util.html#query_util.execute_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.query_util.query_util.execute_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a saved Query.</p>
<p>Execute an already existing Query with the OpenSpecimen’s unique Query ID &lt;qryid&gt; .
The query ID can be seen via clicking on the Queries in OpenSpecimen and it is the
number after # in the title.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>qryid</strong> (<em>int</em>) – The System’s ID of the Query, will be converted to a string.</li>
<li><strong>start</strong> (<em>int</em>) – Defines the row of the outcomes from which they will be displayed.</li>
<li><strong>results</strong> (<em>int</em>) – Defines how many results will be displayed.</li>
<li><strong>rowmode</strong> (<em>string</em>) – Permissable values are DEEP/SHALLOW/OFF.  If OFF all values of a multivalued field are shown in one row.</li>
<li><strong>drivingform</strong> (<em>string</em>) – Defines the search perspective, precisely which tables are searched at, permissable values are Participant, Specimen.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of all matching queries or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.query_util.query_util.search_query">
<code class="descname">search_query</code><span class="sig-paren">(</span><em>cpid=None</em>, <em>searchstring=None</em>, <em>start=None</em>, <em>max_=None</em>, <em>countreq=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/query_util.html#query_util.search_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.query_util.query_util.search_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for list of queries with specific suburl.</p>
<p>Search for one or more queries with the parameters in the suburl defined. The search URL looks like:
http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/saved-queries?{param_1}={value_1}&amp;…&amp;{param_x}={value_x}</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cpid</strong> (<em>int</em>) – The collection Protocol ID  where the query is assigned to.</li>
<li><strong>searchstring</strong> (<em>string</em>) – Substring of the query title.</li>
<li><strong>start</strong> (<em>int</em>) – Defines the row of the outcomes from which they will be displayed.</li>
<li><strong>max_</strong> (<em>int</em>) – Defines how many results will be displayed.</li>
<li><strong>countreq</strong> (<em>string</em>) – OpenSpecimen’s boolean, if true total number of saved queries will be shown.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of all matching queries or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.site_util">
<span id="openspecimenapiconnector-os-util-site-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.site_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.site_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.site_util.site_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.site_util.</code><code class="descname">site_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/site_util.html#site_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.site_util.site_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the calls for sites</p>
<p>This class handles the API calls for OpenSpecimen Sites. It can create, update and search
sites with different parameters. The other calls are in the os_core class sites.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<dl class="docutils">
<dt>A code Examples, where the collection protocols are handled is in the Jupyter-Notebook</dt>
<dd>$ jupyter notebook main.ipynb</dd>
</dl>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.site_util.site_util.create_sites">
<code class="descname">create_sites</code><span class="sig-paren">(</span><em>name</em>, <em>institutename</em>, <em>type_</em>, <em>coordinators=None</em>, <em>address=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/site_util.html#site_util.create_sites"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.site_util.site_util.create_sites" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a site in OpenSpecimen</p>
<p>Create a site in OpenSpecimen with an API call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<em>string</em>) – Name of the site.</li>
<li><strong>institutename</strong> (<em>string</em>) – Name of the institute where the site belongs to.</li>
<li><strong>type_</strong> (<em>string</em>) – Type of the site, permissable values are: collection site, repository, laboratory, not specified.</li>
<li><strong>coordiantors</strong> (<em>dict</em>) – Dict with identifier of coordinators.[optional]</li>
<li><strong>address</strong> (<em>string</em>) – String with the Address of the site[optional].</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the created site as dictionary or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.site_util.site_util.search_sites">
<code class="descname">search_sites</code><span class="sig-paren">(</span><em>sitename=None</em>, <em>institutename=None</em>, <em>maxresults=100</em>, <em>siteExtension=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/site_util.html#site_util.search_sites"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.site_util.site_util.search_sites" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for Sites with specific values.</p>
<p>Search for one or more sites with the values in search_string defined. The search string looks like:
http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/sites?{param_1}={value_1}&amp;…&amp;{param_x}={value_x}
This string gets generated here. If siteExtension is true, the detailed site parameters will get returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sitename</strong> (<em>string</em>) – Substring of the sitenames.</li>
<li><strong>institutename</strong> (<em>string</em>) – Substring of the Institutenames</li>
<li><strong>maxresults</strong> (<em>int</em>) – Defines how many results will get returned maximally.</li>
<li><strong>siteExtension</strong> (<em>boolean</em>) – If true, returns also the extension details.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the matching sites, if no one matches it is an empty list.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">JSON-dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.site_util.site_util.update_sites">
<code class="descname">update_sites</code><span class="sig-paren">(</span><em>siteid</em>, <em>name=None</em>, <em>institutename=None</em>, <em>type_=None</em>, <em>coordinators=None</em>, <em>address=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/site_util.html#site_util.update_sites"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.site_util.site_util.update_sites" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a site in OpenSpecimen</p>
<p>Update a site in OpenSpecimen with an API call. In order to update a site one has to know
the ID of the site which can be seen in the GUI, by clicking on the site, the URL looks like:
http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/sites/{siteid}/overview. Or it can be first searched for,
for Examples, by name with the function search_sites and then the ID can be extracted from there.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>siteid</strong> (<em>int</em>) – Unique Identifier of the Site</li>
<li><strong>name</strong> (<em>string</em>) – Name of the Site.</li>
<li><strong>institutename</strong> (<em>string</em>) – Name of the institute where the site belongs to.</li>
<li><strong>type_</strong> (<em>string</em>) – Type of the site, permissable values are: collection site, repository, laboratory, not specified.</li>
<li><strong>coordiantors</strong> (<em>dict</em>) – Dict with identifier of coordinators.[optional]</li>
<li><strong>address</strong> (<em>string</em>) – String with the Address of the site[optional].</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the created site as dictionary or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.specimen_util">
<span id="openspecimenapiconnector-os-util-specimen-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.specimen_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.specimen_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.specimen_util.</code><code class="descname">specimen_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/specimen_util.html#specimen_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the calls for Specimens</p>
<p>This class handles the API calls for OpenSpecimen Specimens. It can create, update, delete,
search specimens with different parameters. The other calls are in the os_core class specimens.
The output is a JSON dict or the Error message as dict. It also can check if a
specimen exists which returns a string which tells you if it exists.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<dl class="docutils">
<dt>A code Examples, where the Specimens/Derivatives/Aliquots are handled is in the Jupyter-Notebook</dt>
<dd>$ jupyter notebook main.ipynb</dd>
</dl>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.create_specimen">
<code class="descname">create_specimen</code><span class="sig-paren">(</span><em>specimenclass</em>, <em>specimentype</em>, <em>pathology</em>, <em>anatomic</em>, <em>laterality</em>, <em>initqty</em>, <em>avaqty</em>, <em>visitid</em>, <em>recqlt</em>, <em>userid</em>, <em>colltime=None</em>, <em>rectime=None</em>, <em>lineage='New'</em>, <em>status='Collected'</em>, <em>stor_name=None</em>, <em>storlocx=None</em>, <em>storlocy=None</em>, <em>concetration=None</em>, <em>biohazard=None</em>, <em>comments=None</em>, <em>collproc=None</em>, <em>label=None</em>, <em>conttype=None</em>, <em>extensionudn=None</em>, <em>extensionmap=None</em>, <em>extensiondict=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/specimen_util.html#specimen_util.create_specimen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.create_specimen" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Specimen to a visit</p>
<p>Create a Specimen to an already existing Visit. In order to use this function one has to know,
the mandatory details of the specimen e.g. the class of the Specimen.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The label is mandatory if the Protocolsettings are such that the Label is created manually, otherwise
it has to be left empty.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>specimenclass</strong> (<em>string</em>) – Class of the specimen.</li>
<li><strong>specimentype</strong> (<em>string</em>) – Type of the specimen, belongs to the class.</li>
<li><strong>pathology</strong> (<em>string</em>) – Pathologystatus of the Specimen.</li>
<li><strong>anatomic</strong> (<em>string</em>) – The anatomic site of the specimen.</li>
<li><strong>laterality</strong> (<em>string</em>) – The laterality of the specimen.</li>
<li><strong>initqty</strong> (<em>int</em>) – The initial quantity of a specimen.</li>
<li><strong>avaqty</strong> (<em>int</em>) – The available quantity of a specimen.</li>
<li><strong>visitid</strong> (<em>int</em>) – The unique identifier of the visit.</li>
<li><strong>recqlt</strong> (<em>string</em>) – The received quality.</li>
<li><strong>label</strong> (<em>string</em>) – The Label of the specimen, if automatically generated it has to be left empty, or else it is mandatory.</li>
<li><strong>colltime</strong> (<em>string</em>) – Date and Time of the collection event, the format is in the OpenSpecimen’s System configuration.[optional]</li>
<li><strong>rectime</strong> (<em>string</em>) – Date and Time of the received event, the format is in the OpenSpecimen’s System configuration.[optional]</li>
<li><strong>lineage</strong> (<em>string</em>) – Lineage of the specimen, default value is New.</li>
<li><strong>status</strong> (<em>string</em>) – Status of the Specimen, default is ‘Collected’.</li>
<li><strong>stor_name</strong> (<em>string</em>) – Name of the container. [optional]</li>
<li><strong>storlocx</strong> (<em>int</em>) – Position of the specimen in the Container in x direction.[optional]</li>
<li><strong>storlocy</strong> (<em>int</em>) – Position of the specimen in the container in y direction.[optional]</li>
<li><strong>concetration</strong> (<em>int</em>) – Concentration of the specimen[optional].</li>
<li><strong>biohazard</strong> (<em>string</em>) – Biohazards of that specimen.[optional]</li>
<li><strong>userid</strong> (<em>int</em>) – ID of the user who creates the specimen. If not specified the API user is taken.</li>
<li><strong>comments</strong> (<em>string</em>) – Comments regarding to the specimen[optional].</li>
<li><strong>collproc</strong> (<em>string</em>) – The procedure of the collection[otpional].</li>
<li><strong>conttype</strong> (<em>string</em>) – Type of the storage conatiner.</li>
<li><strong>extensionudn</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false. If true, the extension keys are the udn values of the corresponding form.[optional]</li>
<li><strong>extensionmap</strong> (<em>string</em>) – The name of the Form which should be taken.[optional]</li>
<li><strong>extensiondict</strong> (<em>dict</em>) – The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). [optional]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Dictionary with details of the specimen or the OpenSpecimen’s error meessage.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.delete_specimens">
<code class="descname">delete_specimens</code><span class="sig-paren">(</span><em>specimenids</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/specimen_util.html#specimen_util.delete_specimens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.delete_specimens" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a Specimen/Derivative/Aliquot</p>
<p>Delete an already existing Specimen/Derivative/Aliquot. The Parameters &lt;specimenid&gt; is the uniqe ID of the Specimen/
Derivative/Aliquot which is generated automatically from OpenSpecimen. To get the ID one can click in the GUI on the
Specimen/Derivative/Aliquot and read it from the URL, with format:
http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cp-view/{cpid}/specimen/{specimenid}/… .
Another possibility is to search via ‘search_specimens’ for a specific Parameters and then extract the ID
from the JSON-dict which get returned. The function allows also to delete a list of specimen</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>specimenids</strong> (<em>list or int</em>) – The unique ID(s) of the Specimen/Aliquot/Derivative which OpenSpecimen creates itself.
The URL of the specimens, which should be deleted, has the form “?id=specimenid_1+…+specimenid_n”</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Details of the Specimens which are deleted or the OpenSpecimen error message as dict.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">JSON-dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.search_specimens">
<code class="descname">search_specimens</code><span class="sig-paren">(</span><em>label=None</em>, <em>cprid=None</em>, <em>eventid=None</em>, <em>visitid=None</em>, <em>maxres='100'</em>, <em>exact='false'</em>, <em>extension='true'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/specimen_util.html#specimen_util.search_specimens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.search_specimens" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for Specimen with specific values.</p>
<p>Search for one or more Specimens with the values in the search_string defined. The search string looks like:
http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/rest/np/specimens?{param_1}={value_1}&amp;…&amp;{param_x}={value_x}</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>label</strong> (<em>string</em>) – Label of the specimen.</li>
<li><strong>cprid</strong> (<em>int</em>) – Collection Protocol Registration ID to what Participant the specimen belongs to.</li>
<li><strong>eventid</strong> (<em>int</em>) – Unique systemwide Identifier of the event.</li>
<li><strong>visitid</strong> (<em>int</em>) – Unique systemwide identifier of the visit.</li>
<li><strong>maxres</strong> (<em>int</em>) – Defines how many results are returned maximally.</li>
<li><strong>exact</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false. If true Parameters have to match exactly.</li>
<li><strong>extension</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false. If true extension Details will get returned too.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the matching Specimens, if no one matches it is an empty list.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.update_specimen">
<code class="descname">update_specimen</code><span class="sig-paren">(</span><em>specimenid</em>, <em>label=None</em>, <em>specimenclass=None</em>, <em>specimentype=None</em>, <em>pathology=None</em>, <em>anatomic=None</em>, <em>laterality=None</em>, <em>initqty=None</em>, <em>avaqty=None</em>, <em>visitid=None</em>, <em>recqlt=None</em>, <em>colltime=None</em>, <em>rectime=None</em>, <em>lineage='New'</em>, <em>status='Collected'</em>, <em>stor_name=None</em>, <em>storlocx=None</em>, <em>storlocy=None</em>, <em>concetration=None</em>, <em>biohazard=None</em>, <em>userid=None</em>, <em>comments=None</em>, <em>collproc=None</em>, <em>conttype=None</em>, <em>extensionudn=None</em>, <em>extensionmap=None</em>, <em>extensiondict=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/specimen_util.html#specimen_util.update_specimen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.specimen_util.specimen_util.update_specimen" title="Permalink to this definition">¶</a></dt>
<dd><p>Update an existing Specimen</p>
<p>Update an existing Specimen in order to use this function one has to know the specimenid. This can be seen via the GUI
by clicking on the desired specimen, and read from the URL: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/cps/{cpid}/specimens/{specimenid}/… .
Or via search Specimen, for Examples by name and then extract the ID via key [“id”].</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The specimenid is mandatory, all the other keys are otional for updating. If left empty nothing will be changed.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>specimenid</strong> (<em>int</em>) – Unique Id of the specimen.</li>
<li><strong>specimenclass</strong> (<em>string</em>) – Class of the specimen.</li>
<li><strong>specimentype</strong> (<em>string</em>) – Type of the specimen, belongs to the class.</li>
<li><strong>pathology</strong> (<em>string</em>) – Pathologystatus of the Specimen.</li>
<li><strong>anatomic</strong> (<em>string</em>) – The anatomic site of the specimen.</li>
<li><strong>laterality</strong> (<em>string</em>) – The laterality of the specimen.</li>
<li><strong>initqty</strong> (<em>int</em>) – The initial quantity of a specimen.</li>
<li><strong>avaqty</strong> (<em>int</em>) – The available quantity of a specimen.</li>
<li><strong>visitid</strong> (<em>int</em>) – The unique identifier of the visit.</li>
<li><strong>recqlt</strong> (<em>string</em>) – The received quality.</li>
<li><strong>label</strong> (<em>string</em>) – The Label of the specimen.</li>
<li><strong>colltime</strong> (<em>string</em>) – Date and Time of the collection event, the format is in the OpenSpecimen’s System configuration.</li>
<li><strong>rectime</strong> (<em>string</em>) – Date and Time of the received event, the format is in the OpenSpecimen’s System configuration.</li>
<li><strong>lineage</strong> (<em>string</em>) – Lineage of the specimen, default value is New.</li>
<li><strong>status</strong> (<em>string</em>) – Status of the Specimen, default is ‘Collected’.</li>
<li><strong>stor_name</strong> (<em>string</em>) – Name of the container.</li>
<li><strong>storlocx</strong> (<em>int</em>) – Position of the specimen in the Container in x direction.</li>
<li><strong>storlocy</strong> (<em>int</em>) – Position of the specimen in the container in y direction.</li>
<li><strong>concetration</strong> (<em>int</em>) – Concentration of the specimen.</li>
<li><strong>biohazard</strong> (<em>string</em>) – Biohazards of that specimen.</li>
<li><strong>userid</strong> (<em>int</em>) – ID of the user who creates the specimen. If not specified the API user is taken.</li>
<li><strong>comments</strong> (<em>string</em>) – Comments regarding to the specimen.</li>
<li><strong>collproc</strong> (<em>string</em>) – The procedure of the collection.</li>
<li><strong>conttype</strong> (<em>string</em>) – Type of the storage container.</li>
<li><strong>extensionudn</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false. If true the extension keys are the udn values of the corresponding form.</li>
<li><strong>extensionmap</strong> (<em>string</em>) – The name of the Form which should be taken.</li>
<li><strong>extensiondict</strong> (<em>dict</em>) – The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Dictionary with details of the specimen or the OpenSpecimen’s error meessage.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.users_util">
<span id="openspecimenapiconnector-os-util-users-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.users_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.users_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.users_util.user_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.users_util.</code><code class="descname">user_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/users_util.html#user_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.users_util.user_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.users_util.user_util.assign_role">
<code class="descname">assign_role</code><span class="sig-paren">(</span><em>userid</em>, <em>siteid</em>, <em>cpid</em>, <em>role</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/users_util.html#user_util.assign_role"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.users_util.user_util.assign_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a role to a user</p>
<p>Assign a role to a user with ID {userid} in OpenSpecimen. To use this function one has to know the ID of
the user, the site, the collection protocol and the name of the role. The user Id can be seen in the
GUI, if one clicks on the user and reads from the URL which has the format:
http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/users/{userid}/… .
Or with the function get_all_users and then extract the ID to the wanted user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>userid</strong> (<em>int</em>) – The ID of the user.</li>
<li><strong>siteid</strong> (<em>int</em>) – The ID of the site.</li>
<li><strong>cpid</strong> (<em>int</em>) – The ID of the collection protocol.</li>
<li><strong>role</strong> (<em>string</em>) – The name of the role.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">JSON dict with Details of the Roles of the User with ID userid or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.users_util.user_util.change_password">
<code class="descname">change_password</code><span class="sig-paren">(</span><em>userid</em>, <em>newpw</em>, <em>oldpw=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/users_util.html#user_util.change_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.users_util.user_util.change_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the password of a user</p>
<p>Change the Password of a user. If the API-User is Superadmin, the parameters are userid, newpassword.
If the User isn’t the Superadmin, nor the Superadmin changes his own password the parameters are userid,
oldpassword, new password.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the Systemsetting the Superadmin can define the passwords’ complexity.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>userid</strong> (<em>int</em>) – ID of the user, whose password should be changed.</li>
<li><strong>newpw</strong> (<em>string</em>) – The  new password of the user.</li>
<li><strong>oldpw</strong> (<em>string</em>) – The old password of the user, has to be specified if the API user is not the Superadmin or
the Superadmin changes his password.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Dict with status code. 200 password updated, 400 invalid Parameters, 500 unknown error.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.users_util.user_util.create_user">
<code class="descname">create_user</code><span class="sig-paren">(</span><em>first</em>, <em>last</em>, <em>email</em>, <em>login</em>, <em>institute</em>, <em>type_</em>, <em>phone=None</em>, <em>address=None</em>, <em>domain='openSpecimen'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/users_util.html#user_util.create_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.users_util.user_util.create_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a user</p>
<p>Create a User in OpenSpecimen. This function parses the input to a dict,
what OpenSpecimen can understand.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>first</strong> (<em>string</em>) – Firstname of the User.</li>
<li><strong>last</strong> (<em>string</em>) – Lastname of the User.</li>
<li><strong>email</strong> (<em>string</em>) – Emailaddress of the user.</li>
<li><strong>phone</strong> (<em>string</em>) – Phonenumber of the user.</li>
<li><strong>login</strong> (<em>string</em>) – Loginename of the user, which has to be  unique within the domain.</li>
<li><strong>institute</strong> (<em>string</em>) – Name of the institute where the user belongs.</li>
<li><strong>type_</strong> (<em>string</em>) – Name of the usertype, defined in the OpenSpecimen distribution.</li>
<li><strong>address</strong> (<em>string</em>) – Address of the user. [optional]</li>
<li><strong>domain</strong> (<em>string</em>) – Domainname, by default OpenSpecimen.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">JSON dict with Details of the created User or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.users_util.user_util.update_user">
<code class="descname">update_user</code><span class="sig-paren">(</span><em>userid</em>, <em>first</em>, <em>last</em>, <em>email</em>, <em>login</em>, <em>institute</em>, <em>phone=None</em>, <em>type_=None</em>, <em>address=None</em>, <em>domain='openspecimen'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/users_util.html#user_util.update_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.users_util.user_util.update_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a user</p>
<p>Update a User in OpenSpecimen. To use this function one has to know the ID of the user.
This can be seen in the GUI if one clicks on the user and reads from the URL which has
the format: http(s)://&lt;host&gt;:&lt;port&gt;/openspecimen/users/{userid}/… .
Or with the function get_all_users and then extract the ID to the wanted user.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For updating, the user has to be identified with its unique id {userid},
all the other parameters of the user are optional. If they are not passed
to the function, they stay the same.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>userid</strong> (<em>int</em>) – Unique Id of the user.</li>
<li><strong>first</strong> (<em>string</em>) – Firstname of the User.</li>
<li><strong>last</strong> (<em>string</em>) – Lastname of the User.</li>
<li><strong>email</strong> (<em>string</em>) – Emailaddress of the user.</li>
<li><strong>phone</strong> (<em>string</em>) – Phonenumber of the user.</li>
<li><strong>login</strong> (<em>string</em>) – Loginename of the user, which has to be unique within the domain.</li>
<li><strong>institute</strong> (<em>string</em>) – Name of the institute where the user belongs to.</li>
<li><strong>type_</strong> (<em>string</em>) – Name of the usertype, defined in the OpenSpecimen distribution.</li>
<li><strong>address</strong> (<em>string</em>) – Address of the user. [optional]</li>
<li><strong>domain</strong> (<em>string</em>) – Domainname, by default OpenSpecimen.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">JSON dict with Details of the created User or the OpenSpecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util.visit_util">
<span id="openspecimenapiconnector-os-util-visit-util-module"></span><h2>OpenSpecimenAPIconnector.os_util.visit_util module<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util.visit_util" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OpenSpecimenAPIconnector.os_util.visit_util.visit_util">
<em class="property">class </em><code class="descclassname">OpenSpecimenAPIconnector.os_util.visit_util.</code><code class="descname">visit_util</code><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/visit_util.html#visit_util"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.visit_util.visit_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the API calls for Visits</p>
<p>This class handles the API calls for OpenSpecimen Visits. It can create, update,
search visits with different parameters, add visits and specimens in one call.
The outputs are JSON dicts or the Error messages as dict.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use this and also the other classes, the user has to know OpenSpecimen.
The API calls are documented in <a class="reference external" href="https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs">https://openspecimen.atlassian.net/wiki/spaces/CAT/pages/1116035/REST+APIs</a> and
the calls refer to this site. More details can be seen in the documentation.</p>
</div>
<p class="rubric">Examples</p>
<dl class="docutils">
<dt>A code Examples, where the visits are handled is in the Jupyter-Notebook</dt>
<dd>$ jupyter notebook main.ipynb</dd>
</dl>
<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.visit_util.visit_util.add_visit">
<code class="descname">add_visit</code><span class="sig-paren">(</span><em>name</em>, <em>site</em>, <em>eventid=None</em>, <em>eventlabel=None</em>, <em>cprid=None</em>, <em>ppid=None</em>, <em>cptitle=None</em>, <em>cpshorttitle=None</em>, <em>cpid=None</em>, <em>diagnosis=None</em>, <em>clinicalstatus=None</em>, <em>activity=None</em>, <em>visitstatus='Complete'</em>, <em>missedreason=None</em>, <em>missedby=None</em>, <em>comments=None</em>, <em>pathologynumber=None</em>, <em>cohort=None</em>, <em>visitdate=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/visit_util.html#visit_util.add_visit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.visit_util.visit_util.add_visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a visit to a Participant.</p>
<p>Add a visit to a participant in OpenSpecimen via API call. To use this function, one has to know the
Parameters of the Participant, event and site.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle) or (ppid and cpid)
- name, site</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<em>string</em>) – Name of the Visit.</li>
<li><strong>site</strong> (<em>string</em>) – Site to which the Visit belongs to.</li>
<li><strong>eventid</strong> (<em>int</em>) – ID of the event to which the visit belongs to.[optional]</li>
<li><strong>eventlabel</strong> (<em>string</em>) – Label of the event to which the visit belongs to.[optional]</li>
<li><strong>cprid</strong> (<em>int</em>) – Identifier of the Collection Protocoll Registration to which the visit belongs to.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>ppid</strong> (<em>string</em>) – Identifier of the Participant to whom the visit belongs to.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cptitle</strong> (<em>string</em>) – Name of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cpshorttitle</strong> (<em>title</em>) – Acronym of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cpid</strong> (<em>int</em>) – Identifier of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>diagnosis</strong> (<em>string</em>) – Name of the diagnoses of the visit.</li>
<li><strong>clinicalstatus</strong> (<em>string</em>) – Clinical Status of the visit.[optional]</li>
<li><strong>activity</strong> (<em>string</em>) – Activity Status of the Visit.[optional]</li>
<li><strong>visitstatus</strong> (<em>string</em>) – Status of the visit.[optional]</li>
<li><strong>missedreason</strong> (<em>string</em>) – Reason why the visit was missed.[optional]</li>
<li><strong>missedby</strong> (<em>string</em>) – Details of the person who missed the visit.[optional]</li>
<li><strong>comments</strong> (<em>string</em>) – Comments regarding the visit.[optional]</li>
<li><strong>pathologynumber</strong> (<em>string</em>) – Surgical Pathology number. [optional]</li>
<li><strong>cohort</strong> (<em>string</em>) – Cohorts to which the visit belongs to. [optional]</li>
<li><strong>visitdate</strong> (<em>string</em>) – Date when the visit will occur, if empty takes the current date.[optional]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the visit as JSON dict or the Openspecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.visit_util.visit_util.add_visit_speci">
<code class="descname">add_visit_speci</code><span class="sig-paren">(</span><em>name</em>, <em>lineage</em>, <em>av_qty</em>, <em>user</em>, <em>init_qty</em>, <em>spec_class</em>, <em>spec_type</em>, <em>anat_site</em>, <em>site</em>, <em>path</em>, <em>speclabel=None</em>, <em>eventid=None</em>, <em>eventlabel=None</em>, <em>cprid=None</em>, <em>ppid=None</em>, <em>cptitle=None</em>, <em>cpshorttitle=None</em>, <em>cpid=None</em>, <em>diagnosis=None</em>, <em>clinicalstatus=None</em>, <em>activity=None</em>, <em>visitstatus=None</em>, <em>missedreason=None</em>, <em>missedby=None</em>, <em>comments=None</em>, <em>pathologynumber=None</em>, <em>cohort=None</em>, <em>visitdate=None</em>, <em>laterality=None</em>, <em>rec_qlt=None</em>, <em>colltime=None</em>, <em>rectime=None</em>, <em>status='Collected'</em>, <em>stor_name=None</em>, <em>storlocx=None</em>, <em>storlocy=None</em>, <em>concentration=None</em>, <em>biohazrad=None</em>, <em>collproc=None</em>, <em>conttype=None</em>, <em>extensionudn=None</em>, <em>extensionmap=None</em>, <em>extensiondict=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/visit_util.html#visit_util.add_visit_speci"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.visit_util.visit_util.add_visit_speci" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a visit and a specimen in one call.</p>
<p>Add a visit and a specimen in OpenSpecimen via one API call. To use this function, one has to know the
Parameters of the participant, event and site.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Mandatory fields are -cprId or (ppid and cpTitle) or (ppid and cpShortTitle) or (ppid and cpid)
- name, site
The label is mandatory if the Protocolsettings are such that the Label is created manually, otherwise
it has to be left empty.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cprid</strong> (<em>int</em>) – Identifier of the Collection Protocoll Registration to which the visit belongs to.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>name</strong> (<em>string</em>) – Name of the Visit.</li>
<li><strong>lineage</strong> (<em>string</em>) – Lineage of the specimen, if created it is New.</li>
<li><strong>av_qty</strong> (<em>int</em>) – The available quantity of a specimen.</li>
<li><strong>user</strong> (<em>int</em>) – ID of the user who creates the specimen. If not specified the API user is taken.</li>
<li><strong>init_qty</strong> (<em>int</em>) – The initial quantity of a specimen.</li>
<li><strong>spec_class</strong> (<em>string</em>) – Class of the specimen.</li>
<li><strong>spec_type</strong> (<em>string</em>) – Type of the specimen, belongs to the class.</li>
<li><strong>anat_site</strong> (<em>string</em>) – The anatomic site of the specimen.</li>
<li><strong>site</strong> (<em>string</em>) – Site to which the visit belongs to.</li>
<li><strong>site,</strong></li>
<li><strong>eventid</strong> (<em>int</em>) – ID of the event to which the visit belongs to.[optional]</li>
<li><strong>eventlabel</strong> (<em>string</em>) – Label of the event to which the visit belongs to.[optional]</li>
<li><strong>ppid</strong> (<em>string</em>) – Identifier of the Participant to whom the visit belongs to.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cptitle</strong> (<em>string</em>) – Name of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cpshorttitle</strong> (<em>title</em>) – Acronym of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cpid</strong> (<em>int</em>) – Identifier of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>diagnosis</strong> (<em>string</em>) – Name of the diagnoses of the visit.</li>
<li><strong>clinicalstatus</strong> (<em>string</em>) – Clinical Status of the visit.[optional]</li>
<li><strong>activity</strong> (<em>stringsite,</em>) – Activity Status of the visit.[optional]</li>
<li><strong>visitstatus</strong> (<em>string</em>) – Status of the visit.[optional]</li>
<li><strong>missedreason</strong> (<em>string</em>) – Reason why the visit was missed.[optional]</li>
<li><strong>missedby</strong> (<em>string</em>) – Details of the person who missed the visit.[optional]</li>
<li><strong>comments</strong> (<em>string</em>) – Comments regarding the visit.[optional]</li>
<li><strong>pathologynumber</strong> (<em>string</em>) – Surgical Pathology number. [optional]</li>
<li><strong>cohort</strong> (<em>string</em>) – Cohorts to which the visit belongs to. [optional]</li>
<li><strong>visitdate</strong> (<em>string</em>) – Date when the visit will occur, if empty takes the current date.[optional]</li>
<li><strong>pathology</strong> (<em>string</em>) – Pathologystatus of the Specimen.</li>
<li><strong>laterality</strong> (<em>string</em>) – The laterality of the specimen.</li>
<li><strong>recqlt</strong> (<em>string</em>) – The received quality.</li>
<li><strong>colltime</strong> (<em>string</em>) – Date and Time of the collection event, the format is in the OpenSpecimen’s System configuration.[optional]</li>
<li><strong>rectime</strong> (<em>string</em>) – Date and Time of the received event, the format is in the OpenSpecimen’s System configuration.[optional]</li>
<li><strong>status</strong> (<em>string</em>) – Status of the Specimen, default is ‘Collected’.</li>
<li><strong>stor_name</strong> (<em>string</em>) – Name of the container. [optional]</li>
<li><strong>storlocx</strong> (<em>int</em>) – Position of the specimen in the Container in x direction.[optional]</li>
<li><strong>storlocy</strong> (<em>int</em>) – Position of the specimen in the container in y direction.[optional]</li>
<li><strong>concetration</strong> (<em>int</em>) – Concentration of the specimen[optional].</li>
<li><strong>biohazard</strong> (<em>string</em>) – Biohazards of that specimen.[optional]</li>
<li><strong>comments</strong> (<em>string</em>) – Comments regarding to the specimen[optional].</li>
<li><strong>collproc</strong> (<em>string</em>) – The procedure of the collection[otpional].</li>
<li><strong>conttype</strong> (<em>string</em>) – Type of the storage container.</li>
<li><strong>extensionudn</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false. If true, the extension keys are the udn values of the corresponding form.[optional]</li>
<li><strong>extensionmap</strong> (<em>string</em>) – The name of the form which should be taken.[optional]</li>
<li><strong>extensiondict</strong> (<em>dict</em>) – The dictionary of the extensions, has to be created manually. Either with udn or name (as defined before). [optional]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Details of the visit and specimen as JSON dict or the Openspecimen’s error message.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.visit_util.visit_util.search_visit_cprid">
<code class="descname">search_visit_cprid</code><span class="sig-paren">(</span><em>cprid</em>, <em>includestats='false'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/visit_util.html#visit_util.search_visit_cprid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.visit_util.visit_util.search_visit_cprid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a Visit by the Collection protocol Registration Id.</p>
<p>Get a visit by the Collection Protocoll Registration ID. Those parameters have to be known
in order to know this function. They can be extracted from calling a search function in the
os_core class visits.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cprid</strong> (<em>int</em>) – Identifier of the collection protocol registration.</li>
<li><strong>includestats</strong> (<em>string</em>) – OpenSpecimen’s boolean true/false. If true the stats of the participants, e.g. number of visits are included.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">JSON-dict with details of the visit.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.visit_util.visit_util.search_visit_namespr">
<code class="descname">search_visit_namespr</code><span class="sig-paren">(</span><em>visitname=None</em>, <em>sprnumber=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/visit_util.html#visit_util.search_visit_namespr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.visit_util.visit_util.search_visit_namespr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a Visit by the name or the Surgical pathology number</p>
<p>Get one or more visits by the name or the surgical pathology number. Those parameters have to be known
in order to know this function. If just the visitname is passed, one returns a visit with the corresponding name.
If just the surgical pathology number is passed it returns all visits with this number. If both are passed
it works as logical AND.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>visitname</strong> (<em>string</em>) – Substring of the name of the visit.</li>
<li><strong>sprnumber</strong> (<em>string</em>) – Surgical Pathology number of the visits.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">JSON-dict with details of the visits.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="OpenSpecimenAPIconnector.os_util.visit_util.visit_util.update_visit">
<code class="descname">update_visit</code><span class="sig-paren">(</span><em>visitid</em>, <em>name=None</em>, <em>site=None</em>, <em>eventid=None</em>, <em>eventlabel=None</em>, <em>cprid=None</em>, <em>ppid=None</em>, <em>cptitle=None</em>, <em>cpshorttitle=None</em>, <em>diagnosis=None</em>, <em>clinicalstatus=None</em>, <em>activity=None</em>, <em>visitstatus=None</em>, <em>missedreason=None</em>, <em>missedby=None</em>, <em>comments=None</em>, <em>pathologynumber=None</em>, <em>cohort=None</em>, <em>visitdate=None</em>, <em>cpid=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/OpenSpecimenAPIconnector/os_util/visit_util.html#visit_util.update_visit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OpenSpecimenAPIconnector.os_util.visit_util.visit_util.update_visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Updating a visit</p>
<p>Update an existing visit with ID visitid and the parameters params. All parameters are
optional for updating and  those which are not passed stay the same. Those parameters and
the visit Id have to be known to use this function and can
be found out in the GUI by clicking on a participant and the visit. It looks like:
http(s)://&lt;host&gt;:&lt;port&gt;/openspeicmen/cp-view/{cpid}/participant/{cprid}/visits/detail/ocerview?visitId={visitid}&amp;eventId={eventId} .
Or via the function get_visit_namespr, when one knows the name of the visit and then extracts the id from there.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All parameters are optional, except the visitid. The parameters which are not passed will stay the same.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>visitid</strong> (<em>int</em>) – Id of the visit, gets converted to a string</li>
<li><strong>name</strong> (<em>string</em>) – Name of the visit.</li>
<li><strong>site</strong> (<em>string</em>) – Site to which the visit belongs to.</li>
<li><strong>eventid</strong> (<em>int</em>) – ID of the event to which the visit belongs to.[optional]</li>
<li><strong>eventlabel</strong> (<em>string</em>) – Label of the event to which the visit belongs to.[optional]</li>
<li><strong>cprid</strong> (<em>int</em>) – Identifier of the Collection Protocoll Registration to which the visit belongs to.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>ppid</strong> (<em>string</em>) – Identifier of the Participant to whom the visit belongs to.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cptitle</strong> (<em>string</em>) – Name of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cpshorttitle</strong> (<em>title</em>) – Acronym of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>cpid</strong> (<em>int</em>) – Identifier of the Collection Protocol.
cprid or (cptitle and ppid) or (cpid and ppid) or (cpshorttitle and ppid) are mandatory.</li>
<li><strong>diagnosis</strong> (<em>string</em>) – Name of the diagnoses of the visit.</li>
<li><strong>clinicalstatus</strong> (<em>string</em>) – Clinical Status of the visit.[optional]</li>
<li><strong>activity</strong> (<em>string</em>) – Activity Status of the visit.[optional]</li>
<li><strong>visitstatus</strong> (<em>string</em>) – Status of the visit.[optional]</li>
<li><strong>missedreason</strong> (<em>string</em>) – Reason why the visit was missed.[optional]</li>
<li><strong>missedby</strong> (<em>string</em>) – Details of the person who missed the visit.[optional]</li>
<li><strong>comments</strong> (<em>string</em>) – Comments regarding the visit.[optional]</li>
<li><strong>pathologynumber</strong> (<em>string</em>) – Surgical Pathology number. [optional]</li>
<li><strong>cohort</strong> (<em>string</em>) – Cohorts to which the visit belongs to. [optional]</li>
<li><strong>visitdate</strong> (<em>string</em>) – Date when the visit will occur, if empty takes the current date.[optional]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">JSON-dict with details of the updated visit or OpenSpecimens Error message</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-OpenSpecimenAPIconnector.os_util">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-OpenSpecimenAPIconnector.os_util" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Christian Schorn, Simon Streit.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>